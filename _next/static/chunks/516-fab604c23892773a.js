(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[516],{1854:function(e,t,n){"use strict";n.d(t,{b:function(){return sH}});var r,i,o,s,a,c,u,l,f,h,d,p,g,y,v,m,b,_,S,w,E,I,T,A,C,O,k,N,P,D,U,R,x,F,M,L,j,B,K,V,q,G,W,H,z,J,Y,Q,X,Z,$,ee={};n.r(ee),n.d(ee,{hasBrowserEnv:function(){return o4},hasStandardBrowserEnv:function(){return o5},hasStandardBrowserWebWorkerEnv:function(){return o6}});var et=n(5949),en=n(3728),er=n(1463);function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eo="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function es(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function ea(e,t){var n=e.locationOffset.column-1,r=eu(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=1===t.line?n:0,c=t.column+a,u="".concat(e.name,":").concat(s,":").concat(c,"\n"),l=r.split(/\r\n|[\n\r]/g),f=l[i];if(f.length>120){for(var h=Math.floor(c/80),d=[],p=0;p<f.length;p+=80)d.push(f.slice(p,p+80));return u+ec([["".concat(s),d[0]]].concat(d.slice(1,h+1).map(function(e){return["",e]}),[[" ",eu(c%80-1)+"^"],["",d[h+1]]]))}return u+ec([["".concat(s-1),l[i-1]],["".concat(s),f],["",eu(c-1)+"^"],["".concat(s+1),l[i+1]]])}function ec(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=Math.max.apply(Math,t.map(function(e){return e[0].length}));return t.map(function(e){var t=e[0],r=e[1];return eu(n-t.length)+t+(r?" | "+r:" |")}).join("\n")}function eu(e){return Array(e+1).join(" ")}function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ed(e,t){return t&&("object"===el(t)||"function"==typeof t)?t:ep(e)}function ep(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eg(e){var t="function"==typeof Map?new Map:void 0;return(eg=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ey(e,arguments,eb(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),em(n,e)})(e)}function ey(e,t,n){return(ey=ev()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&em(i,n.prototype),i}).apply(null,arguments)}function ev(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function em(e,t){return(em=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eb(e){return(eb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&em(e,t)}(o,e);var t,n,r,i=(t=ev(),function(){var e,n=eb(o);if(t){var r=eb(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ed(this,e)});function o(e,t,n,r,s,a,c){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),(y=i.call(this,e)).name="GraphQLError",y.originalError=null!=a?a:void 0,y.nodes=eS(Array.isArray(t)?t:t?[t]:void 0);for(var u,l=[],f=0,h=null!==(v=y.nodes)&&void 0!==v?v:[];f<h.length;f++){var d,p,g,y,v,m=h[f].loc;null!=m&&l.push(m)}l=eS(l),y.source=null!=n?n:null===(d=l)||void 0===d?void 0:d[0].source,y.positions=null!=r?r:null===(p=l)||void 0===p?void 0:p.map(function(e){return e.start}),y.locations=r&&n?r.map(function(e){return es(n,e)}):null===(g=l)||void 0===g?void 0:g.map(function(e){return es(e.source,e.start)}),y.path=null!=s?s:void 0;var b=null==a?void 0:a.extensions;return null==c&&"object"==ei(u=b)&&null!==u?y.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach(function(t){var r,i;r=e,i=n[t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},b):y.extensions=null!=c?c:{},(Object.defineProperties(ep(y),{message:{enumerable:!0},locations:{enumerable:null!=y.locations},path:{enumerable:null!=y.path},extensions:{enumerable:null!=y.extensions&&Object.keys(y.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=a&&a.stack)?(Object.defineProperty(ep(y),"stack",{value:a.stack,writable:!0,configurable:!0}),ed(y)):(Error.captureStackTrace?Error.captureStackTrace(ep(y),o):Object.defineProperty(ep(y),"stack",{value:Error().stack,writable:!0,configurable:!0}),y)}return n=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i,o=r[n];o.loc&&(t+="\n\n"+ea((i=o.loc).source,es(i.source,i.start)))}else if(e.source&&e.locations)for(var s=0,a=e.locations;s<a.length;s++){var c=a[s];t+="\n\n"+ea(e.source,c)}return t}(this)}},{key:eo,get:function(){return"Object"}}],eh(o.prototype,n),r&&eh(o,r),o}(eg(Error));function eS(e){return void 0===e||0===e.length?void 0:e}function ew(e,t,n){return new e_("Syntax Error: ".concat(n),void 0,e,[t])}var eE=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),eI="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function eT(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(0))throw Error(null!=t?t:"Unexpected invariant triggered.")}(0),e.prototype.inspect=t,eI&&(e.prototype[eI]=t)}var eA=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();eT(eA);var eC=function(){function e(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function eO(e){return null!=e&&"string"==typeof e.kind}eT(eC);var ek=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function eN(e){return(eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eP(e,t){switch(eN(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":if(null===e)return"null";return function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n,r,i=[].concat(t,[e]),o="function"==typeof(n=e[String(eI)])?n:"function"==typeof e.inspect?e.inspect:void 0;if(void 0!==o){var s=o.call(e);if(s!==e)return"string"==typeof s?s:eP(s,i)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,i=[],o=0;o<n;++o)i.push(eP(e[o],t));return 1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items")),"["+i.join(", ")+"]"}(e,i);return 0===(r=Object.keys(e)).length?"{}":i.length>2?"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]":"{ "+r.map(function(t){var n=eP(e[t],i);return t+": "+n}).join(", ")+" }"}(e,t);default:return String(e)}}function eD(e,t){if(!Boolean(e))throw Error(t)}function eU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var eR=function(){var e;function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||eD(0,"Body must be a string. Received: ".concat(eP(e,[]),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||eD(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||eD(0,"column in locationOffset is 1-indexed and must be positive.")}return eU(t.prototype,[{key:eo,get:function(){return"Source"}}]),e&&eU(t,e),t}(),ex=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function eF(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"	"!==e[t])return!1;return!0}var eM=function(){function e(e){var t=new eC(ek.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e,t=this.token;if(t.kind!==ek.EOF)do t=null!==(e=t.next)&&void 0!==e?e:t.next=function(e,t){for(var n=e.source,r=n.body,i=r.length,o=t.end;o<i;){var s=r.charCodeAt(o),a=e.line,c=1+o-e.lineStart;switch(s){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++e.line,e.lineStart=o;continue;case 13:10===r.charCodeAt(o+1)?o+=2:++o,++e.line,e.lineStart=o;continue;case 33:return new eC(ek.BANG,o,o+1,a,c,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;do o=s.charCodeAt(++a);while(!isNaN(o)&&(o>31||9===o));return new eC(ek.COMMENT,t,a,n,r,i,s.slice(t+1,a))}(n,o,a,c,t);case 36:return new eC(ek.DOLLAR,o,o+1,a,c,t);case 38:return new eC(ek.AMP,o,o+1,a,c,t);case 40:return new eC(ek.PAREN_L,o,o+1,a,c,t);case 41:return new eC(ek.PAREN_R,o,o+1,a,c,t);case 46:if(46===r.charCodeAt(o+1)&&46===r.charCodeAt(o+2))return new eC(ek.SPREAD,o,o+3,a,c,t);break;case 58:return new eC(ek.COLON,o,o+1,a,c,t);case 61:return new eC(ek.EQUALS,o,o+1,a,c,t);case 64:return new eC(ek.AT,o,o+1,a,c,t);case 91:return new eC(ek.BRACKET_L,o,o+1,a,c,t);case 93:return new eC(ek.BRACKET_R,o,o+1,a,c,t);case 123:return new eC(ek.BRACE_L,o,o+1,a,c,t);case 124:return new eC(ek.PIPE,o,o+1,a,c,t);case 125:return new eC(ek.BRACE_R,o,o+1,a,c,t);case 34:if(34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2))return function(e,t,n,r,i,o){for(var s=e.body,a=t+3,c=a,u=0,l="";a<s.length&&!isNaN(u=s.charCodeAt(a));){if(34===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2))return l+=s.slice(c,a),new eC(ek.BLOCK_STRING,t,a+3,n,r,i,function(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,i=0,o=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:10===e.charCodeAt(s+1)&&++s;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(null===o||i<o)&&(o=i),r=!1}return null!==(t=o)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&eF(t[i]);)++i;for(var o=t.length;o>i&&eF(t[o-1]);)--o;return t.slice(i,o).join("\n")}(l));if(u<32&&9!==u&&10!==u&&13!==u)throw ew(e,a,"Invalid character within String: ".concat(eL(u),"."));10===u?(++a,++o.line,o.lineStart=a):13===u?(10===s.charCodeAt(a+1)?a+=2:++a,++o.line,o.lineStart=a):92===u&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2)&&34===s.charCodeAt(a+3)?(l+=s.slice(c,a)+'"""',a+=4,c=a):++a}throw ew(e,a,"Unterminated string.")}(n,o,a,c,t,e);return function(e,t,n,r,i){for(var o=e.body,s=t+1,a=s,c=0,u="";s<o.length&&!isNaN(c=o.charCodeAt(s))&&10!==c&&13!==c;){if(34===c)return u+=o.slice(a,s),new eC(ek.STRING,t,s+1,n,r,i,u);if(c<32&&9!==c)throw ew(e,s,"Invalid character within String: ".concat(eL(c),"."));if(++s,92===c){switch(u+=o.slice(a,s-1),c=o.charCodeAt(s)){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+="\n";break;case 114:u+="\r";break;case 116:u+="	";break;case 117:var l,f,h,d,p=(l=o.charCodeAt(s+1),f=o.charCodeAt(s+2),h=o.charCodeAt(s+3),d=o.charCodeAt(s+4),eB(l)<<12|eB(f)<<8|eB(h)<<4|eB(d));if(p<0){var g=o.slice(s+1,s+5);throw ew(e,s,"Invalid character escape sequence: \\u".concat(g,"."))}u+=String.fromCharCode(p),s+=4;break;default:throw ew(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}a=++s}}throw ew(e,s,"Unterminated string.")}(n,o,a,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s,a=e.body,c=n,u=t,l=!1;if(45===c&&(c=a.charCodeAt(++u)),48===c){if((c=a.charCodeAt(++u))>=48&&c<=57)throw ew(e,u,"Invalid number, unexpected digit after 0: ".concat(eL(c),"."))}else u=ej(e,u,c),c=a.charCodeAt(u);if(46===c&&(l=!0,c=a.charCodeAt(++u),u=ej(e,u,c),c=a.charCodeAt(u)),(69===c||101===c)&&(l=!0,(43===(c=a.charCodeAt(++u))||45===c)&&(c=a.charCodeAt(++u)),u=ej(e,u,c),c=a.charCodeAt(u)),46===c||95===(s=c)||s>=65&&s<=90||s>=97&&s<=122)throw ew(e,u,"Invalid number, expected digit but got: ".concat(eL(c),"."));return new eC(l?ek.FLOAT:ek.INT,t,u,r,i,o,a.slice(t,u))}(n,o,s,a,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){for(var o=e.body,s=o.length,a=t+1,c=0;a!==s&&!isNaN(c=o.charCodeAt(a))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new eC(ek.NAME,t,a,n,r,i,o.slice(t,a))}(n,o,a,c,t)}throw ew(n,o,s<32&&9!==s&&10!==s&&13!==s?"Cannot contain the invalid character ".concat(eL(s),"."):39===s?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(eL(s),"."))}var u=e.line,l=1+o-e.lineStart;return new eC(ek.EOF,i,i,u,l,t)}(this,t);while(t.kind===ek.COMMENT);return t},e}();function eL(e){return isNaN(e)?ek.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function ej(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do o=r.charCodeAt(++i);while(o>=48&&o<=57);return i}throw ew(e,i,"Invalid number, expected digit but got: ".concat(eL(o),"."))}function eB(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function eK(e,t){return new eV(e,t).parseDocument()}var eV=function(){function e(e,t){var n=e instanceof eR?e:new eR(e);this._lexer=new eM(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(ek.NAME);return{kind:eE.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:eE.DOCUMENT,definitions:this.many(ek.SOF,this.parseDefinition,ek.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(ek.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else if(this.peek(ek.BRACE_L))return this.parseOperationDefinition();else if(this.peekDescription())return this.parseTypeSystemDefinition();throw this.unexpected()},t.parseOperationDefinition=function(){var e,t=this._lexer.token;if(this.peek(ek.BRACE_L))return{kind:eE.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var n=this.parseOperationType();return this.peek(ek.NAME)&&(e=this.parseName()),{kind:eE.OPERATION_DEFINITION,operation:n,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseOperationType=function(){var e=this.expectToken(ek.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(ek.PAREN_L,this.parseVariableDefinition,ek.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:eE.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(ek.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(ek.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(ek.DOLLAR),{kind:eE.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:eE.SELECTION_SET,selections:this.many(ek.BRACE_L,this.parseSelection,ek.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(ek.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(ek.COLON)?(e=r,t=this.parseName()):t=r,{kind:eE.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(ek.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(ek.PAREN_L,t,ek.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(ek.COLON),{kind:eE.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:eE.ARGUMENT,name:this.parseName(),value:(this.expectToken(ek.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(ek.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(ek.NAME)?{kind:eE.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:eE.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return(this.expectKeyword("fragment"),(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)===!0)?{kind:eE.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:eE.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case ek.BRACKET_L:return this.parseList(e);case ek.BRACE_L:return this.parseObject(e);case ek.INT:return this._lexer.advance(),{kind:eE.INT,value:t.value,loc:this.loc(t)};case ek.FLOAT:return this._lexer.advance(),{kind:eE.FLOAT,value:t.value,loc:this.loc(t)};case ek.STRING:case ek.BLOCK_STRING:return this.parseStringLiteral();case ek.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:eE.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:eE.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:eE.NULL,loc:this.loc(t)};default:return{kind:eE.ENUM,value:t.value,loc:this.loc(t)}}case ek.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:eE.STRING,value:e.value,block:e.kind===ek.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:eE.LIST,values:this.any(ek.BRACKET_L,function(){return t.parseValueLiteral(e)},ek.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:eE.OBJECT,fields:this.any(ek.BRACE_L,function(){return t.parseObjectField(e)},ek.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(ek.COLON),{kind:eE.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(ek.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(ek.AT),{kind:eE.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return(this.expectOptionalToken(ek.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(ek.BRACKET_R),e={kind:eE.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(ek.BANG))?{kind:eE.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:eE.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===ek.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(ek.STRING)||this.peek(ek.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(ek.BRACE_L,this.parseOperationTypeDefinition,ek.BRACE_R);return{kind:eE.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(ek.COLON);var n=this.parseNamedType();return{kind:eE.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:eE.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:eE.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if((null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)===!0){var t=[];this.expectOptionalToken(ek.AMP);do t.push(this.parseNamedType());while(this.expectOptionalToken(ek.AMP)||this.peek(ek.NAME));return t}return this.delimitedMany(ek.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)===!0&&this.peek(ek.BRACE_L)&&this._lexer.lookahead().kind===ek.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(ek.BRACE_L,this.parseFieldDefinition,ek.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(ek.COLON);var i=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:eE.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(ek.PAREN_L,this.parseInputValueDef,ek.PAREN_R)},t.parseInputValueDef=function(){var e,t=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(ek.COLON);var i=this.parseTypeReference();this.expectOptionalToken(ek.EQUALS)&&(e=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:eE.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:e,directives:o,loc:this.loc(t)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:eE.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:eE.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(ek.EQUALS)?this.delimitedMany(ek.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:eE.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(ek.BRACE_L,this.parseEnumValueDefinition,ek.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:eE.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:eE.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(ek.BRACE_L,this.parseInputValueDef,ek.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===ek.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(ek.BRACE_L,this.parseOperationTypeDefinition,ek.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:eE.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:eE.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:eE.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:eE.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:eE.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:eE.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:eE.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(ek.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:eE.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(ek.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==ex[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if((null===(t=this._options)||void 0===t?void 0:t.noLocation)!==!0)return new eA(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw ew(this._lexer.source,t.start,"Expected ".concat(eG(e),", found ").concat(eq(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind===ek.NAME&&t.value===e)this._lexer.advance();else throw ew(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(eq(t),"."))},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===ek.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return ew(this._lexer.source,t.start,"Unexpected ".concat(eq(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n},e}();function eq(e){var t=e.value;return eG(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function eG(e){return e===ek.BANG||e===ek.DOLLAR||e===ek.AMP||e===ek.PAREN_L||e===ek.PAREN_R||e===ek.SPREAD||e===ek.COLON||e===ek.EQUALS||e===ek.AT||e===ek.BRACKET_L||e===ek.BRACKET_R||e===ek.BRACE_L||e===ek.PIPE||e===ek.BRACE_R?'"'.concat(e,'"'):e}var eW={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},eH=Object.freeze({});function ez(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eW,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],c=void 0,u=void 0,l=void 0,f=[],h=[],d=e;do{var p,g=++s===o.length,y=g&&0!==a.length;if(g){if(u=0===h.length?void 0:f[f.length-1],c=l,l=h.pop(),y){if(i)c=c.slice();else{for(var v={},m=0,b=Object.keys(c);m<b.length;m++){var _=b[m];v[_]=c[_]}c=v}for(var S=0,w=0;w<a.length;w++){var E=a[w][0],I=a[w][1];i&&(E-=S),i&&null===I?(c.splice(E,1),S++):c[E]=I}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(u=l?i?s:o[s]:void 0,null==(c=l?l[u]:d))continue;l&&f.push(u)}var T=void 0;if(!Array.isArray(c)){if(!eO(c))throw Error("Invalid AST Node: ".concat(eP(c,[]),"."));var A=function(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}(t,c.kind,g);if(A){if((T=A.call(t,c,u,l,f,h))===eH)break;if(!1===T){if(!g){f.pop();continue}}else if(void 0!==T&&(a.push([u,T]),!g)){if(eO(T))c=T;else{f.pop();continue}}}}void 0===T&&y&&a.push([u,c]),g?f.pop():(r={inArray:i,index:s,keys:o,edits:a,prev:r},o=(i=Array.isArray(c))?c:null!==(p=n[c.kind])&&void 0!==p?p:[],s=-1,a=[],l&&h.push(l),l=c)}while(void 0!==r);return 0!==a.length&&(d=a[a.length-1][1]),d}(e,{leave:eJ})}var eJ={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return eQ(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=eZ("(",eQ(e.variableDefinitions,", "),")"),i=eQ(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?eQ([t,eQ([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+eZ(" = ",r)+eZ(" ",eQ(i," "))},SelectionSet:function(e){return eX(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet,s=eZ("",t,": ")+n,a=s+eZ("(",eQ(r,", "),")");return a.length>80&&(a=s+eZ("(\n",e$(eQ(r,"\n")),"\n)")),eQ([a,eQ(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+eZ(" ",eQ(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return eQ(["...",eZ("on ",t),eQ(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(eZ("(",eQ(r,", "),")")," ")+"on ".concat(n," ").concat(eZ("",eQ(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"	"===e[0],o='"'===e[e.length-1],s="\\"===e[e.length-1],a=!r||o||s||n,c="";return a&&!(r&&i)&&(c+="\n"+t),c+=t?e.replace(/\n/g,"\n"+t):e,a&&(c+="\n"),'"""'+c.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+eQ(e.values,", ")+"]"},ObjectValue:function(e){return"{"+eQ(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+eZ("(",eQ(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:eY(function(e){var t=e.directives,n=e.operationTypes;return eQ(["schema",eQ(t," "),eX(n)]," ")}),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:eY(function(e){return eQ(["scalar",e.name,eQ(e.directives," ")]," ")}),ObjectTypeDefinition:eY(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return eQ(["type",t,eZ("implements ",eQ(n," & ")),eQ(r," "),eX(i)]," ")}),FieldDefinition:eY(function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(e1(n)?eZ("(\n",e$(eQ(n,"\n")),"\n)"):eZ("(",eQ(n,", "),")"))+": "+r+eZ(" ",eQ(i," "))}),InputValueDefinition:eY(function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return eQ([t+": "+n,eZ("= ",r),eQ(i," ")]," ")}),InterfaceTypeDefinition:eY(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return eQ(["interface",t,eZ("implements ",eQ(n," & ")),eQ(r," "),eX(i)]," ")}),UnionTypeDefinition:eY(function(e){var t=e.name,n=e.directives,r=e.types;return eQ(["union",t,eQ(n," "),r&&0!==r.length?"= "+eQ(r," | "):""]," ")}),EnumTypeDefinition:eY(function(e){var t=e.name,n=e.directives,r=e.values;return eQ(["enum",t,eQ(n," "),eX(r)]," ")}),EnumValueDefinition:eY(function(e){return eQ([e.name,eQ(e.directives," ")]," ")}),InputObjectTypeDefinition:eY(function(e){var t=e.name,n=e.directives,r=e.fields;return eQ(["input",t,eQ(n," "),eX(r)]," ")}),DirectiveDefinition:eY(function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(e1(n)?eZ("(\n",e$(eQ(n,"\n")),"\n)"):eZ("(",eQ(n,", "),")"))+(r?" repeatable":"")+" on "+eQ(i," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return eQ(["extend schema",eQ(t," "),eX(n)]," ")},ScalarTypeExtension:function(e){return eQ(["extend scalar",e.name,eQ(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return eQ(["extend type",t,eZ("implements ",eQ(n," & ")),eQ(r," "),eX(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return eQ(["extend interface",t,eZ("implements ",eQ(n," & ")),eQ(r," "),eX(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return eQ(["extend union",t,eQ(n," "),r&&0!==r.length?"= "+eQ(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return eQ(["extend enum",t,eQ(n," "),eX(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return eQ(["extend input",t,eQ(n," "),eX(r)]," ")}};function eY(e){return function(t){return eQ([t.description,e(t)],"\n")}}function eQ(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter(function(e){return e}).join(n))&&void 0!==t?t:""}function eX(e){return eZ("{\n",e$(eQ(e,"\n")),"\n}")}function eZ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function e$(e){return eZ("  ",e.replace(/\n/g,"\n  "))}function e0(e){return -1!==e.indexOf("\n")}function e1(e){return null!=e&&e.some(e0)}var e2={},e3=function(){function e(){}return e.setItem=function(e,t){return e2[e]=t,e2[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(e2,e)?e2[e]:void 0},e.removeItem=function(e){return delete e2[e]},e.clear=function(){return e2={}},e}(),e4=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(e){this.storageWindow=e3}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),e5=n(5630),e6=function(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then(function(e){return r=!0,t=!1,e},function(e){throw n=!0,t=!1,e});return i.isFullfilled=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i},e8=function(){if("undefined"==typeof self)return!1;var e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope},e7=function(){return{isBrowser:"undefined"!=typeof window&&void 0!==window.document,isNode:void 0!==e5&&null!=e5.versions&&null!=e5.versions.node}},e9=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!tt(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[t.includes(i)?i:i[0].toLowerCase()+i.slice(1)]=n.includes(i)?e[i]:e9(e[i],t,n));return r},te=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!tt(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[t.includes(i)?i:i[0].toUpperCase()+i.slice(1)]=n.includes(i)?e[i]:te(e[i],t,n));return r},tt=function(e){return e instanceof Object&&!(e instanceof Array)&&!(e instanceof Function)&&!(e instanceof Number)&&!(e instanceof String)&&!(e instanceof Boolean)},tn=(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tr=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},ti=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},to=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ts=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},ta=new en.k("Util"),tc=function(e){function t(t){var n=e.call(this,t)||this;return n.nonRetryable=!0,n}return tn(t,e),t}(Error),tu=function(e){return e&&e.nonRetryable};function tl(e){return void 0===e&&(e=3e5),function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}var tf=function(e,t,n,r){return void 0===n&&(n=3e5),function(e,t,n,r){return tr(this,void 0,void 0,function(){var i=this;return ti(this,function(o){if("function"!=typeof e)throw Error("functionToRetry must be a function");return[2,new Promise(function(o,s){return tr(i,void 0,void 0,function(){var i,a,c,u,l,f,h;return ti(this,function(d){switch(d.label){case 0:i=0,a=!1,u=function(){},r&&r.then(function(){a=!0,clearTimeout(c),u()}),f=function(){var r,f,h,d;return ti(this,function(p){switch(p.label){case 0:i++,ta.debug("".concat(e.name," attempt #").concat(i," with this vars: ").concat(JSON.stringify(t))),p.label=1;case 1:return p.trys.push([1,3,,7]),r={},f=o,[4,e.apply(void 0,ts([],to(t),!1))];case 2:return[2,(r.value=f.apply(void 0,[p.sent()]),r)];case 3:if(l=h=p.sent(),ta.debug("error on ".concat(e.name),h),tu(h))return ta.debug("".concat(e.name," non retryable error"),h),[2,{value:s(h)}];if(d=n(i,t,h),ta.debug("".concat(e.name," retrying in ").concat(d," ms")),!(!1===d||a))return[3,4];return[2,{value:s(h)}];case 4:return[4,new Promise(function(e){c=setTimeout(u=e,d)})];case 5:p.sent(),p.label=6;case 6:return[3,7];case 7:return[2]}})},d.label=1;case 1:if(a)return[3,3];return[5,f()];case 2:if("object"==typeof(h=d.sent()))return[2,h.value];return[3,1];case 3:return s(l),[2]}})})})]})})}(e,t,tl(n),r)},th=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},td=new en.k("CognitoCredentials"),tp=new Promise(function(e,t){return e7().isBrowser?(window.gapi&&window.gapi.auth2?window.gapi.auth2:null)?(td.debug("google api already loaded"),e()):void setTimeout(function(){return e()},2e3):(td.debug("not in the browser, directly resolved"),e())}),tg=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){var e,t,n,r;return e=this,t=void 0,n=void 0,r=function(){return th(this,function(e){switch(e.label){case 0:if(this.initialized)return[3,2];return td.debug("need to wait for the Google SDK loaded"),[4,tp];case 1:e.sent(),this.initialized=!0,td.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}})},new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},e.prototype._refreshGoogleTokenImpl=function(){var e=null;return(e7().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e)?new Promise(function(t,n){e.getAuthInstance().then(function(e){e||(td.debug("google Auth undefined"),n(new tc("google Auth undefined")));var r=e.currentUser.get();r.isSignedIn()?(td.debug("refreshing the google access token"),r.reloadAuthResponse().then(function(e){t({token:e.id_token,expires_at:e.expires_at})}).catch(function(e){e&&"network_error"===e.error?n("Network error reloading google auth response"):n(new tc("Failed to reload google auth response"))})):n(new tc("User is not signed in with Google"))}).catch(function(e){td.debug("Failed to refresh google token",e),n(new tc("Failed to refresh google token"))})}):(td.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),ty=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},tv=new en.k("CognitoCredentials"),tm=new Promise(function(e,t){return e7().isBrowser?window.FB?(tv.debug("FB SDK already loaded"),e()):void setTimeout(function(){return e()},2e3):(tv.debug("not in the browser, directly resolved"),e())}),tb=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){var e,t,n,r;return e=this,t=void 0,n=void 0,r=function(){return ty(this,function(e){switch(e.label){case 0:if(this.initialized)return[3,2];return tv.debug("need to wait for the Facebook SDK loaded"),[4,tm];case 1:e.sent(),this.initialized=!0,tv.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}})},new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},e.prototype._refreshFacebookTokenImpl=function(){var e=null;if(e7().isBrowser&&(e=window.FB),!e){var t="no fb sdk available";return tv.debug(t),Promise.reject(new tc(t))}return new Promise(function(t,n){e.getLoginStatus(function(e){if(e&&e.authResponse){var r=e.authResponse,i=r.accessToken,o=1e3*r.expiresIn+new Date().getTime();if(!i){var s="the jwtToken is undefined";tv.debug(s),n(new tc(s))}t({token:i,expires_at:o})}else{var s="no response from facebook when refreshing the jwt token";tv.debug(s),n(new tc(s))}},{scope:"public_profile,email"})})},e}(),t_=new tg,tS=new tb,tw={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},tE={partitions:[tw,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},tI=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tT=function(e){var t,n,r=tE.partitions;try{for(var i=tI(r),o=i.next();!o.done;o=i.next()){var s=o.value,a=s.regions,c=s.outputs,u=s.regionRegex,l=RegExp(u);if(a.includes(e)||l.test(e))return c.dnsSuffix}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return tw.outputs.dnsSuffix},tA=function(){return(tA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},tC=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},tO=function(e,t){if(null==t?void 0:t.aborted)return Promise.resolve();var n,r,i=new Promise(function(t){r=t,n=setTimeout(t,e)});return null==t||t.addEventListener("abort",function e(i){clearTimeout(n),null==t||t.removeEventListener("abort",e),r()}),i},tk=function(e,t){var n;"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata=tA(tA({},null!==(n=e.$metadata)&&void 0!==n?n:{}),{attempts:t}))},tN=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},tP=function(e,t){return function(n,r){for(var i={},o=function(t){return e(t,r)},s=t.length-1;s>=0;s--)o=(0,t[s])(r)(o,i);return o(n)}};n(2451);var tD=function(e){var t;return function(){return t||(t=e()),t}},tU=function(){return(tU=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},tR=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},tx=tP(function(e,t){var n,r,i,o,s=e.url,a=e.method,c=e.headers,u=e.body,l=t.abortSignal;return n=void 0,r=void 0,i=void 0,o=function(){var e,t,n,r,i,o,f;return tR(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,,3]),[4,fetch(s,{method:a,headers:c,body:["HEAD","GET","DELETE"].includes(a.toUpperCase())?void 0:u,signal:l})];case 1:return e=h.sent(),[3,3];case 2:if((t=h.sent())instanceof TypeError)throw Error("Network error");throw t;case 3:return n={},null===(o=e.headers)||void 0===o||o.forEach(function(e,t){n[t.toLowerCase()]=e}),r={statusCode:e.status,headers:n,body:null},i=Object.assign(null!==(f=e.body)&&void 0!==f?f:{},{text:tD(function(){return e.text()}),blob:tD(function(){return e.blob()}),json:tD(function(){return e.json()})}),[2,tU(tU({},r),{body:i})]}})},new(i||(i=Promise))(function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(s,a)}c((o=o.apply(n,r||[])).next())})},[function(e){var t=e.userAgentHeader,n=void 0===t?"x-amz-user-agent":t,r=e.userAgentValue,i=void 0===r?"":r;return function(e){return function(t){var r,o,s,a;return r=this,o=void 0,s=void 0,a=function(){var r;return tN(this,function(o){switch(o.label){case 0:if(0!==i.trim().length)return[3,2];return[4,e(t)];case 1:case 3:return[2,o.sent()];case 2:return r=n.toLowerCase(),t.headers[r]=t.headers[r]?"".concat(t.headers[r]," ").concat(i):i,[4,e(t)]}})},new(s||(s=Promise))(function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function i(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):((r=t.value)instanceof s?r:new s(function(e){e(r)})).then(n,i)}c((a=a.apply(r,o||[])).next())})}}},function(e){var t=e.maxAttempts,n=void 0===t?3:t,r=e.retryDecider,i=e.computeDelay,o=e.abortSignal;if(n<1)throw Error("maxAttempts must be greater than 0");return function(e,t){return function(s){var a,c,u,l,f;return c=this,u=void 0,l=void 0,f=function(){var c,u,l,f;return tC(this,function(h){switch(h.label){case 0:u=null!==(a=t.attemptsCount)&&void 0!==a?a:0,f=function(){if(l)return tk(l,u),l;throw tk(c,u),c},h.label=1;case 1:if(!(!(null==o?void 0:o.aborted)&&u<n))return[3,11];h.label=2;case 2:return h.trys.push([2,4,,5]),[4,e(s)];case 3:return l=h.sent(),c=void 0,[3,5];case 4:return c=h.sent(),l=void 0,[3,5];case 5:return u=t.attemptsCount>u?t.attemptsCount:u+1,t.attemptsCount=u,[4,r(l,c)];case 6:if(!h.sent())return[3,9];if(!(!(null==o?void 0:o.aborted)&&u<n))return[3,8];return[4,tO(i(u),o)];case 7:h.sent(),h.label=8;case 8:case 10:return[3,1];case 9:return[2,f()];case 11:if(null==o||!o.aborted)return[2,f()];throw Error("Request aborted.")}})},new(l||(l=Promise))(function(e,t){function n(e){try{i(f.next(e))}catch(e){t(e)}}function r(e){try{i(f.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof l?i:new l(function(e){e(i)})).then(n,r)}i((f=f.apply(c,u||[])).next())})}}}]),tF=function(){return(tF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},tM=function(e){var t,n,r=e.headers,i=e.statusCode;return tF(tF({},tL(e)?e.$metadata:{}),{httpStatusCode:i,requestId:null!==(n=null!==(t=r["x-amzn-requestid"])&&void 0!==t?t:r["x-amzn-request-id"])&&void 0!==n?n:r["x-amz-request-id"],extendedRequestId:r["x-amz-id-2"],cfId:r["x-amz-cf-id"]})},tL=function(e){return"object"==typeof(null==e?void 0:e.$metadata)},tj=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},tB=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},tK=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},tV=function(e){return tj(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return tB(this,function(c){switch(c.label){case 0:if(!e||e.statusCode<300)return[2];return[4,tq(e)];case 1:var u;return t=c.sent(),n=(u=tK((null!==(o=null!==(i=null!==(r=e.headers["x-amzn-errortype"])&&void 0!==r?r:t.code)&&void 0!==i?i:t.__type)&&void 0!==o?o:"UnknownError").toString().split(/[\,\:]+/),1)[0]).includes("#")?u.split("#")[1]:u,[2,Object.assign(Error(null!==(a=null!==(s=t.message)&&void 0!==s?s:t.Message)&&void 0!==a?a:"Unknown error"),{name:n,$metadata:tM(e)})]}})})},tq=function(e){return tj(void 0,void 0,void 0,function(){return tB(this,function(t){switch(t.label){case 0:if(!e.body)throw Error("Missing response payload");return[4,e.body.json()];case 1:return[2,Object.assign(t.sent(),{$metadata:tM(e)})]}})})},tG=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],tW=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},tH=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],tz=["TimeoutError","RequestTimeout","RequestTimeoutException"];(i=T||(T={})).WebUnknown="0",i.React="1",i.NextJs="2",i.Angular="3",i.VueJs="4",i.Nuxt="5",i.Svelte="6",i.ServerSideUnknown="100",i.ReactSSR="101",i.NextJsSSR="102",i.AngularSSR="103",i.VueJsSSR="104",i.NuxtSSR="105",i.SvelteSSR="106",i.ReactNative="201",i.Expo="202",(o=A||(A={})).API="api",o.Auth="auth",o.Analytics="analytics",o.DataStore="datastore",o.Geo="geo",o.InAppMessaging="inappmessaging",o.Interactions="interactions",o.Predictions="predictions",o.PubSub="pubsub",o.PushNotification="pushnotification",o.Storage="storage",(s=C||(C={})).Record="1",s.UpdateEndpoint="2",(a=O||(O={})).GraphQl="1",a.Get="2",a.Post="3",a.Put="4",a.Patch="5",a.Del="6",a.Head="7",(k||(k={})).FederatedSignIn="30",(c=N||(N={})).Subscribe="1",c.GraphQl="2",(P||(P={})).None="0",(D||(D={})).None="0",(U||(U={})).None="0",(u=R||(R={})).Convert="1",u.Identify="2",u.Interpret="3",(x||(x={})).Subscribe="1",(F||(F={})).None="0",(l=M||(M={})).Put="1",l.Get="2",l.List="3",l.Copy="4",l.Remove="5",l.GetProperties="6";var tJ="5.3.15",tY=n(5630),tQ=function(){return void 0!==n.g},tX=function(){return"undefined"!=typeof window},tZ=function(){return"undefined"!=typeof document},t$=function(){return void 0!==tY},t0=function(e,t){return!!Object.keys(e).find(function(e){return e.startsWith(t)})},t1=n(5630),t2=n(5630),t3=n(5630),t4=[{platform:T.Expo,detectionMethod:function(){return tQ()&&void 0!==n.g.expo}},{platform:T.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:T.NextJs,detectionMethod:function(){return tX()&&window.next&&"object"==typeof window.next}},{platform:T.Nuxt,detectionMethod:function(){return tX()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:T.Angular,detectionMethod:function(){var e=Boolean(tZ()&&document.querySelector("[ng-version]")),t=Boolean(tX()&&void 0!==window.ng);return e||t}},{platform:T.React,detectionMethod:function(){var e=function(e){return e.startsWith("_react")||e.startsWith("__react")};return tZ()&&Array.from(document.querySelectorAll("[id]")).some(function(t){return Object.keys(t).find(e)})}},{platform:T.VueJs,detectionMethod:function(){return tX()&&t0(window,"__VUE")}},{platform:T.Svelte,detectionMethod:function(){return tX()&&t0(window,"__SVELTE")}},{platform:T.WebUnknown,detectionMethod:function(){return tX()}},{platform:T.NextJsSSR,detectionMethod:function(){return tQ()&&(t0(n.g,"__next")||t0(n.g,"__NEXT"))}},{platform:T.NuxtSSR,detectionMethod:function(){return tQ()&&void 0!==n.g.__NUXT_PATHS__}},{platform:T.ReactSSR,detectionMethod:function(){return t$()&&void 0!==t1.env&&!!Object.keys(t1.env).find(function(e){return e.includes("react")})}},{platform:T.VueJsSSR,detectionMethod:function(){return tQ()&&t0(n.g,"__VUE")}},{platform:T.AngularSSR,detectionMethod:function(){var e;return t$()&&"object"==typeof t3.env&&(null===(e=t3.env.npm_lifecycle_script)||void 0===e?void 0:e.startsWith("ng "))||!1}},{platform:T.SvelteSSR,detectionMethod:function(){return t$()&&void 0!==t2.env&&!!Object.keys(t2.env).find(function(e){return e.includes("svelte")})}}],t5=[],t6=!1,t8=function(){if(!L){var e;if(L=(null===(e=t4.find(function(e){return e.detectionMethod()}))||void 0===e?void 0:e.platform)||T.ServerSideUnknown,t6)for(;t5.length;)t5.pop()();else t5.forEach(function(e){return e()});t9(T.ServerSideUnknown,10),t9(T.WebUnknown,10)}return L},t7=function(e){t6||t5.push(e)};function t9(e,t){L!==e||t6||setTimeout(function(){L=void 0,t6=!0,setTimeout(t8,1e3)},t)}var ne=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},nt="aws-amplify",nn=new(function(){function e(){this.userAgent="".concat(nt,"/").concat(tJ)}return Object.defineProperty(e.prototype,"framework",{get:function(){return t8()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReactNative",{get:function(){return this.framework===T.ReactNative||this.framework===T.Expo},enumerable:!1,configurable:!0}),e.prototype.observeFrameworkChanges=function(e){t7(e)},e}()),nr=function(e){var t=void 0===e?{}:e,n=t.category,r=t.action;t.framework;var i=[[nt,tJ]];return n&&i.push([n,r]),i.push(["framework",t8()]),i},ni=function(e){return nr(e).map(function(e){var t=ne(e,2),n=t[0],r=t[1];return"".concat(n,"/").concat(r)}).join(" ")},no=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},ns=tP(tx,[function(){return function(e,t){return function(t){var n,r,i,o;return n=this,r=void 0,i=void 0,o=function(){return no(this,function(n){return t.headers["cache-control"]="no-store",[2,e(t)]})},new(i||(i=Promise))(function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(s,a)}c((o=o.apply(n,r||[])).next())})}}}]),na={service:"cognito-identity",endpointResolver:function(e){var t=e.region;return{url:new URL("https://cognito-identity.".concat(t,".").concat(tT(t)))}},retryDecider:function(e,t){var n,r,i,o;return n=void 0,r=void 0,i=void 0,o=function(){var n,r,i,o;return tW(this,function(s){switch(s.label){case 0:if(!(null!=t))return[3,1];return r=t,[3,3];case 1:return[4,tV(e)];case 2:r=s.sent(),s.label=3;case 3:return n=(null!==(o=r)&&void 0!==o?o:{}).name,i=null==e?void 0:e.statusCode,[2,(null==t?void 0:t.name)==="Network error"||429===i||tH.includes(n)||tG.includes(n)||[500,502,503,504].includes(i)||tz.includes(n)]}})},new(i||(i=Promise))(function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(s,a)}c((o=o.apply(n,r||[])).next())})},computeDelay:function(e){var t=tl(3e5)(e);return!1===t?3e5:t},userAgentValue:ni()};t7(function(){na.userAgentValue=ni()});var nc=function(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.".concat(e)}},nu=function(e,t,n){return{headers:t,url:e.url,body:n,method:"POST"}},nl=function(){return(nl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},nf=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},nh=function(e,t,n,r){return function(i,o){var s,a,c,u;return s=void 0,a=void 0,c=void 0,u=function(){var s;return nf(this,function(a){switch(a.label){case 0:return[4,(s=nl(nl({},r),i)).endpointResolver(s,o)];case 1:return[4,t(o,a.sent())];case 2:return[4,e(a.sent(),nl({},s))];case 3:return[4,n(a.sent())];case 4:return[2,a.sent()]}})},new(c||(c=Promise))(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof c?i:new c(function(e){e(i)})).then(n,r)}i((u=u.apply(s,a||[])).next())})}},nd=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},np=nh(ns,function(e,t){return nu(t,nc("GetId"),JSON.stringify(e))},function(e){var t,n,r,i;return t=void 0,n=void 0,r=void 0,i=function(){return nd(this,function(t){switch(t.label){case 0:if(!(e.statusCode>=300))return[3,2];return[4,tV(e)];case 1:throw t.sent();case 2:return[4,tq(e)];case 3:return[2,{IdentityId:t.sent().IdentityId,$metadata:tM(e)}]}})},new(r||(r=Promise))(function(e,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(s,a)}c((i=i.apply(t,n||[])).next())})},na),ng=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},ny=nh(ns,function(e,t){return nu(t,nc("GetCredentialsForIdentity"),JSON.stringify(e))},function(e){var t,n,r,i;return t=void 0,n=void 0,r=void 0,i=function(){var t;return ng(this,function(n){switch(n.label){case 0:if(!(e.statusCode>=300))return[3,2];return[4,tV(e)];case 1:throw n.sent();case 2:return[4,tq(e)];case 3:var r;return[2,{IdentityId:(t=n.sent()).IdentityId,Credentials:(void 0===(r=t.Credentials)&&(r={}),{AccessKeyId:r.AccessKeyId,SecretKey:r.SecretKey,SessionToken:r.SessionToken,Expiration:new Date(1e3*r.Expiration)}),$metadata:tM(e)}]}})},new(r||(r=Promise))(function(e,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(s,a)}c((i=i.apply(t,n||[])).next())})},na),nv=function(){return(nv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},nm=new en.k("Parser"),nb=function(e){var t,n={};if(e.aws_mobile_analytics_app_id){var r={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}};n.Analytics=r}return(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(n.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in,signUpVerificationMethod:e.aws_cognito_sign_up_verification_method||"code"}),t=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},e.Logging&&(n.Logging=nv(nv({},e.Logging),{region:e.aws_project_region})),e.geo&&(n.Geo=Object.assign({},e.geo),e.geo.amazon_location_service&&(n.Geo={AmazonLocationService:e.geo.amazon_location_service})),n.Analytics=Object.assign({},n.Analytics,e.Analytics),n.Auth=Object.assign({},n.Auth,e.Auth),n.Storage=Object.assign({},t),n.Logging=Object.assign({},n.Logging,e.Logging),nm.debug("parse config",e,"to amplifyconfig",n),n},n_=function(){return(n_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},nS=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},nw=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},nE=new en.k("Hub"),nI="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",nT=new(function(){function e(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}return e.prototype._remove=function(e,t){if(e instanceof RegExp){var n=this.patterns.find(function(t){return t.pattern.source===e.source});if(!n){nE.warn("No listeners for ".concat(e));return}this.patterns=nw([],nS(this.patterns.filter(function(e){return e!==n})),!1)}else{var r=this.listeners[e];if(!r){nE.warn("No listeners for ".concat(e));return}this.listeners[e]=nw([],nS(r.filter(function(e){return e.callback!==t})),!1)}},e.prototype.remove=function(e,t){this._remove(e,t)},e.prototype.dispatch=function(e,t,n,r){void 0===n&&(n=""),this.protectedChannels.indexOf(e)>-1&&r!==nI&&nE.warn("WARNING: ".concat(e," is protected and dispatching on it can have unintended consequences"));var i={channel:e,payload:n_({},t),source:n,patternInfo:[]};try{this._toListeners(i)}catch(e){nE.error(e)}},e.prototype.listen=function(e,t,n){var r,i=this;if(void 0===n&&(n="noname"),void 0!==t.onHubCapsule)nE.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),r=t.onHubCapsule.bind(t);else if("function"!=typeof t)throw Error("No callback supplied to Hub");else r=t;if(e instanceof RegExp)this.patterns.push({pattern:e,callback:r});else{var o=this.listeners[e];o||(o=[],this.listeners[e]=o),o.push({name:n,callback:r})}return function(){i._remove(e,r)}},e.prototype._toListeners=function(e){var t=e.channel,n=e.payload,r=this.listeners[t];if(r&&r.forEach(function(r){nE.debug("Dispatching to ".concat(t," with "),n);try{r.callback(e)}catch(e){nE.error(e)}}),this.patterns.length>0){if(!n.message){nE.warn("Cannot perform pattern matching without a message key");return}var i=n.message;this.patterns.forEach(function(t){var n=i.match(t.pattern);if(n){var r=nS(n).slice(1),o=n_(n_({},e),{patternInfo:r});try{t.callback(o)}catch(e){nE.error(e)}}})}},e}())("__default__"),nA=function(){return(nA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},nC=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},nO=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},nk=new en.k("Credentials"),nN="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",nP=function(e,t,n){nT.dispatch("core",{event:e,data:t,message:n},"Credentials",nN)},nD=new(function(){function e(e){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(e),this._refreshHandlers.google=t_.refreshGoogleToken,this._refreshHandlers.facebook=tS.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=nA(nA({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=new e4().getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),nP("credentials_configured",null,"Credentials has been configured successfully"),this._config},e.prototype.get=function(){return nk.debug("getting credentials"),this._pickupCredentials()},e.prototype._getCognitoIdentityIdStorageKey=function(e){return"".concat("CognitoIdentityId-").concat(e)},e.prototype._pickupCredentials=function(){return nk.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?nk.debug("getting old cred promise"):(nk.debug("getting new cred promise"),this._gettingCredPromise=e6(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return nC(this,void 0,void 0,function(){var e,t,n,r,i,o;return nO(this,function(s){switch(s.label){case 0:if(nk.debug("checking if credentials exists and not expired"),(e=this._credentials)&&!this._isExpired(e)&&!this._isPastTTL())return nk.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(e)];if(nk.debug("need to get a new credential or refresh the existing one"),!(n=void 0===(t=this.Auth)?er.d.Auth:t)||"function"!=typeof n.currentUserCredentials)return[2,this._setCredentialsForGuest()];if(!(!this._isExpired(e)&&this._isPastTTL()))return[3,6];nk.debug("ttl has passed but token is not yet expired"),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,n.currentUserPoolUser()];case 2:return r=s.sent(),[4,n.currentSession()];case 3:return i=s.sent().refreshToken,[4,new Promise(function(e,t){r.refreshSession(i,function(n,r){return n?t(n):e(r)})})];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),nk.debug("Error attempting to refreshing the session",o),[3,6];case 6:return[2,n.currentUserCredentials()]}})})},e.prototype.refreshFederatedToken=function(e){nk.debug("Getting federated credentials");var t=e.provider,n=e.user,r=e.token,i=e.identity_id,o=e.expires_at;return(o=1970===new Date(o).getFullYear()?1e3*o:o,nk.debug("checking if federated jwt token expired"),o>new Date().getTime())?(nk.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:r,user:n,identity_id:i,expires_at:o})):this._refreshHandlers[t]&&"function"==typeof this._refreshHandlers[t]?(nk.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:this._refreshHandlers[t],provider:t,user:n})):(nk.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(e){var t=this,n=e.refreshHandler,r=e.provider,i=e.user;return tf(n,[],1e4).then(function(e){return nk.debug("refresh federated token sucessfully",e),t._setCredentialsFromFederation({provider:r,token:e.token,user:i,identity_id:e.identity_id,expires_at:e.expires_at})}).catch(function(e){return"string"==typeof e&&0===e.toLowerCase().lastIndexOf("network error",e.length)||t.clear(),nk.debug("refresh federated token failed",e),Promise.reject("refreshing federation token failed: "+e)})},e.prototype._isExpired=function(e){if(!e)return nk.debug("no credentials for expiration check"),!0;nk.debug("are these credentials expired?",e);var t=Date.now();return e.expiration.getTime()<=t},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){var e;return nC(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c,u,l=this;return nO(this,function(f){switch(f.label){case 0:if(nk.debug("setting credentials for guest"),(null===(e=this._config)||void 0===e?void 0:e.identityPoolId)||(this._config=Object.assign({},this._config,nb(this._config||{}).Auth)),n=(t=this._config).identityPoolId,r=t.region,i=t.mandatorySignIn,o=t.identityPoolRegion,i)return[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")];if(!n)return nk.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")];if(!o&&!r)return nk.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")];return a=this,[4,this._getGuestIdentityId()];case 1:return s=a._identityId=f.sent(),c={region:null!=o?o:r},u=nC(l,void 0,void 0,function(){var e,t;return nO(this,function(r){switch(r.label){case 0:if(s)return[3,2];return[4,np(c,{IdentityPoolId:n})];case 1:e=r.sent().IdentityId,this._identityId=e,r.label=2;case 2:return[4,ny(c,{IdentityId:this._identityId})];case 3:return t=r.sent().Credentials,[2,{identityId:this._identityId,accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretKey,sessionToken:t.SessionToken,expiration:t.Expiration}]}})}).catch(function(e){return nC(l,void 0,void 0,function(){return nO(this,function(t){throw e})})}),[2,this._loadCredentials(u,"guest",!1,null).then(function(e){return e}).catch(function(e){return nC(l,void 0,void 0,function(){var t=this;return nO(this,function(r){switch(r.label){case 0:if(!("ResourceNotFoundException"===e.name&&e.message==="Identity '".concat(s,"' not found.")))return[3,2];return nk.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()];case 1:return r.sent(),u=nC(t,void 0,void 0,function(){var e,t;return nO(this,function(r){switch(r.label){case 0:return[4,np(c,{IdentityPoolId:n})];case 1:return e=r.sent().IdentityId,this._identityId=e,[4,ny(c,{IdentityId:e})];case 2:return[2,{identityId:e,accessKeyId:(t=r.sent().Credentials).AccessKeyId,secretAccessKey:t.SecretKey,sessionToken:t.SessionToken,expiration:t.Expiration}]}})}).catch(function(e){return nC(t,void 0,void 0,function(){return nO(this,function(t){throw e})})}),[2,this._loadCredentials(u,"guest",!1,null)];case 2:return[2,e]}})})})]}})})},e.prototype._setCredentialsFromFederation=function(e){var t=this,n=e.provider,r=e.token,i=e.identity_id,o={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[n]||n;if(!o)return Promise.reject("You must specify a federated provider");var s={};s[o]=r;var a=this._config,c=a.identityPoolId,u=a.region,l=a.identityPoolRegion;if(!c)return nk.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!l&&!u)return nk.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var f={region:null!=l?l:u},h=nC(t,void 0,void 0,function(){var e;return nO(this,function(t){switch(t.label){case 0:if(i)return[3,2];return[4,np(f,{IdentityPoolId:c,Logins:s})];case 1:i=t.sent().IdentityId,t.label=2;case 2:return[4,ny(f,{IdentityId:i,Logins:s})];case 3:return[2,{identityId:i,accessKeyId:(e=t.sent().Credentials).AccessKeyId,secretAccessKey:e.SecretKey,sessionToken:e.SessionToken,expiration:e.Expiration}]}})}).catch(function(e){return nC(t,void 0,void 0,function(){return nO(this,function(t){throw e})})});return this._loadCredentials(h,"federated",!0,e)},e.prototype._setCredentialsFromSession=function(e){var t=this;nk.debug("set credentials from session");var n=e.getIdToken().getJwtToken(),r=this._config,i=r.region,o=r.userPoolId,s=r.identityPoolId,a=r.identityPoolRegion;if(!s)return nk.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!a&&!i)return nk.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var c={};c["cognito-idp."+i+".amazonaws.com/"+o]=n;var u={region:null!=a?a:i},l=nC(t,void 0,void 0,function(){var e,t,n,r,i,o,a,l,f;return nO(this,function(h){switch(h.label){case 0:return[4,this._getGuestIdentityId()];case 1:if(e=h.sent())return[3,3];return[4,np(u,{IdentityPoolId:s,Logins:c})];case 2:t=h.sent().IdentityId,h.label=3;case 3:return[4,ny(u,{IdentityId:e||t,Logins:c})];case 4:if(i=(r=(n=h.sent()).Credentials).AccessKeyId,o=r.Expiration,a=r.SecretKey,l=r.SessionToken,f=n.IdentityId,this._identityId=f,!e)return[3,6];return nk.debug("The guest identity ".concat(e," has been successfully linked to the logins")),e===f&&nk.debug("The guest identity ".concat(e," has become the primary identity")),[4,this._removeGuestIdentityId()];case 5:h.sent(),h.label=6;case 6:return[2,{accessKeyId:i,secretAccessKey:a,sessionToken:l,expiration:o,identityId:f}]}})}).catch(function(e){return nC(t,void 0,void 0,function(){return nO(this,function(t){throw e})})});return this._loadCredentials(l,"userPool",!0,null)},e.prototype._loadCredentials=function(e,t,n,r){var i=this,o=this;return new Promise(function(s,a){e.then(function(e){return nC(i,void 0,void 0,function(){var i,a,c,u,l;return nO(this,function(f){switch(f.label){case 0:if(nk.debug("Load credentials successfully",e),this._identityId&&!e.identityId&&(e.identityId=this._identityId),o._credentials=e,o._credentials.authenticated=n,o._credentials_source=t,o._nextCredentialsRefresh=new Date().getTime()+3e6,"federated"===t){i=Object.assign({id:this._credentials.identityId},r.user),a=r.provider,c=r.token,u=r.expires_at,l=r.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:a,token:c,user:i,expires_at:u,identity_id:l}))}catch(e){nk.debug("Failed to put federated info into auth storage",e)}}if("guest"!==t)return[3,2];return[4,this._setGuestIdentityId(e.identityId)];case 1:f.sent(),f.label=2;case 2:return s(o._credentials),[2]}})})}).catch(function(t){if(t){nk.debug("Failed to load credentials",e),nk.debug("Error loading credentials",t),a(t);return}})})},e.prototype.set=function(e,t){return"session"===t?this._setCredentialsFromSession(e):"federation"===t?this._setCredentialsFromFederation(e):"guest"===t?this._setCredentialsForGuest():(nk.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return nC(this,void 0,void 0,function(){return nO(this,function(e){return this._credentials=null,this._credentials_source=null,nk.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]})})},e.prototype._getGuestIdentityId=function(){return nC(this,void 0,void 0,function(){var e,t;return nO(this,function(n){switch(n.label){case 0:e=this._config.identityPoolId,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._storageSync];case 2:return n.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(e))];case 3:return t=n.sent(),nk.debug("Failed to get the cached guest identityId",t),[3,4];case 4:return[2]}})})},e.prototype._setGuestIdentityId=function(e){return nC(this,void 0,void 0,function(){var t,n;return nO(this,function(r){switch(r.label){case 0:t=this._config.identityPoolId,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(t),e),[3,4];case 3:return n=r.sent(),nk.debug("Failed to cache guest identityId",n),[3,4];case 4:return[2]}})})},e.prototype._removeGuestIdentityId=function(){return nC(this,void 0,void 0,function(){var e;return nO(this,function(t){return e=this._config.identityPoolId,nk.debug("removing ".concat(this._getCognitoIdentityIdStorageKey(e)," from storage")),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(e)),[2]})})},e.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e}())(null);er.d.register(nD);for(var nU="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",nR="x-amz-user-agent",nx=n(8666),nF=n.n(nx)(),nM=n(3880),nL=n(2674),nj=n(6379),nB=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},nK={clockOffset:0,getDateWithClockOffset:function(){return nK.clockOffset?new Date(new Date().getTime()+nK.clockOffset):new Date},getClockOffset:function(){return nK.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=nK.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var t=nB(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6];return new Date(Date.UTC(Number(n),Number(r)-1,Number(i),Number(o),Number(s),Number(a)))},isClockSkewed:function(e){return Math.abs(e.getTime()-nK.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var t=e.response.headers;return Boolean(["BadRequestException","InvalidSignatureException"].includes(t["x-amzn-errortype"])&&(t.date||t.Date))},setClockOffset:function(e){nK.clockOffset=e}},nV=function(e){return Object.keys(e).map(function(e){return e.toLowerCase()}).sort().join(";")},nq="X-Amz-Date",nG="X-Amz-Security-Token",nW="host",nH=nq.toLowerCase(),nz=nG.toLowerCase(),nJ="aws4_request",nY="AWS4-HMAC-SHA256",nQ=function(e){var t=e.toISOString().replace(/[:\-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}},nX=function(e){var t=e.credentials,n=e.signingDate,r=void 0===n?new Date:n,i=e.signingRegion,o=e.signingService,s=e.uriEscapePath,a=t.accessKeyId,c=t.secretAccessKey,u=t.sessionToken,l=nQ(r),f=l.longDate,h=l.shortDate;return{accessKeyId:a,credentialScope:"".concat(h,"/").concat(i,"/").concat(o,"/").concat(nJ),longDate:f,secretAccessKey:c,sessionToken:u,shortDate:h,signingRegion:i,signingService:o,uriEscapePath:void 0===s||s}},nZ=n(1441),n$={},n0={},n1=0;n1<256;n1++){var n2=n1.toString(16).toLowerCase();1===n2.length&&(n2="0"+n2),n$[n1]=n2,n0[n2]=n1}var n3=function(e,t){var n=new nZ.Sha256(e);return n.update(t),n.digestSync()},n4=function(e,t){return function(e){for(var t="",n=0;n<e.byteLength;n++)t+=n$[e[n]];return t}(n3(e,t))},n5=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},n6=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},n8=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,n7)},n7=function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())},n9=function(e,t){var n,r,i,o=e.body,s=e.headers,a=e.method,c=e.url;return void 0===t&&(t=!0),[a,(r=c.pathname,void 0===(i=t)&&(i=!0),r?i?encodeURIComponent(r).replace(/%2F/g,"/"):r:"/"),Array.from(c.searchParams).sort(function(e,t){var n=n6(e,2),r=n[0],i=n[1],o=n6(t,2),s=o[0],a=o[1];return r===s?i<a?-1:1:r<s?-1:1}).map(function(e){var t=n6(e,2),n=t[0],r=t[1];return"".concat(n8(n),"=").concat(n8(r))}).join("&"),Object.entries(s).map(function(e){var t,n=n5(e,2),r=n[0],i=n[1];return{key:r.toLowerCase(),value:null!==(t=null==i?void 0:i.trim().replace(/\s+/g," "))&&void 0!==t?t:""}}).sort(function(e,t){return e.key<t.key?-1:1}).map(function(e){return"".concat(e.key,":").concat(e.value,"\n")}).join(""),nV(s),null==o?"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855":"string"==typeof o||ArrayBuffer.isView(o)||(n=o,"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(n))?n4(null,o):"UNSIGNED-PAYLOAD"].join("\n")},re=function(e,t,n,r){var i=n3("".concat("AWS4").concat(e),t),o=n3(i,n),s=n3(o,r);return n3(s,nJ)},rt=function(e,t){var n=t.credentialScope,r=t.longDate,i=t.secretAccessKey,o=t.shortDate,s=t.signingRegion,a=t.signingService,c=n9(e,t.uriEscapePath),u=[nY,r,n,n4(null,c)].join("\n");return n4(re(i,o,s,a),u)},rn=function(){return(rn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},rr=function(e,t){var n=nX(t),r=n.accessKeyId,i=n.credentialScope,o=n.longDate,s=n.sessionToken,a=rn({},e.headers);a[nW]=e.url.host,a[nH]=o,s&&(a[nz]=s);var c=rn(rn({},e),{headers:a}),u=rt(c,n),l="Credential=".concat(r,"/").concat(i),f="SignedHeaders=".concat(nV(a));return a.authorization="".concat(nY," ").concat(l,", ").concat(f,", ").concat("Signature=".concat(u)),c},ri=function(){return(ri=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ro=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},rs=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ra=function(e,t){var n,r,i,o,s=e.body,a=e.method,c=e.url,u=t.expiration,l=nX(ro(t,["expiration"])),f=l.accessKeyId,h=l.credentialScope,d=l.longDate,p=l.sessionToken,g=new URL(c);Object.entries(ri(ri(((n={})["X-Amz-Algorithm"]=nY,n["X-Amz-Credential"]="".concat(f,"/").concat(h),n[nq]=d,n["X-Amz-SignedHeaders"]=nW,n),u&&((r={})["X-Amz-Expires"]=u.toString(),r)),p&&((i={})[nG]=p,i))).forEach(function(e){var t=rs(e,2),n=t[0],r=t[1];g.searchParams.append(n,r)});var y=rt({body:s,headers:((o={})[nW]=c.host,o),method:void 0===a?"GET":a,url:g},l);return g.searchParams.append("X-Amz-Signature",y),g},rc=function(){return(rc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ru=/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com(.cn)?$/,rl=function(){function e(){}return e.sign=function(e,t,n){if(e.headers=e.headers||{},e.body&&!e.data)throw Error('The attribute "body" was found on the request object. Please use the attribute "data" instead.');var r=rc(rc({},e),{body:e.data,url:new URL(e.url)}),i=rf(r,t,n),o=rr(r,i);return o.url=o.url.toString(),o.headers.Authorization=o.headers.authorization,o.headers["X-Amz-Security-Token"]=o.headers["x-amz-security-token"],delete o.headers.authorization,delete o.headers["x-amz-security-token"],o},e.signUrl=function(e,t,n,r){var i="object"==typeof e?e.url:e,o="object"==typeof e?e.method:"GET",s={body:"object"==typeof e?e.body:void 0,method:o,url:new URL(i)},a=rf(s,t,n,r),c=ra(s,a);return t.session_token&&!rd(a.signingService)&&c.searchParams.append(nG,t.session_token),c.toString()},e}(),rf=function(e,t,n,r){var i=null!=t?t:{},o=i.access_key,s=i.secret_key,a=i.session_token,c=rh(e.url),u=c.region,l=c.service,f=null!=n?n:{},h=f.region,d=f.service,p=void 0===d?l:d,g=rc({accessKeyId:o,secretAccessKey:s},rd(p)?{sessionToken:a}:{});return rc({credentials:g,signingDate:nK.getDateWithClockOffset(),signingRegion:void 0===h?u:h,signingService:p},r&&{expiration:r})},rh=function(e){var t,n=(null!==(t=e.host.match(ru))&&void 0!==t?t:[]).slice(1,3);return"es"===n[1]&&(n=n.reverse()),{service:n[0],region:n[1]}},rd=function(e){return"iotdevicegateway"!==e},rp={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:new e4().getStorage()};function rg(e){var t=0;t=e.length;for(var n=e.length;n>=0;n-=1){var r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function ry(){return new Date().getTime()}function rv(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}var rm={};!function(){function e(){}e.clear=function(){rm={}},e.getItem=function(e){return rm[e]||null},e.setItem=function(e,t){rm[e]=t},e.removeItem=function(e){delete rm[e]}}();var rb=new en.k("StorageCache"),r_=function(){function e(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){rv(this.config.capacityInBytes)||(rb.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=rp.capacityInBytes),rv(this.config.itemMaxSize)||(rb.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=rp.itemMaxSize),rv(this.config.defaultTTL)||(rb.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=rp.defaultTTL),rv(this.config.defaultPriority)||(rb.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=rp.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(rb.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=rp.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(rb.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=rp.defaultPriority),(Number(this.config.warningThreshold)>1||0>Number(this.config.warningThreshold))&&(rb.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=rp.warningThreshold),this.config.capacityInBytes>5242880&&(rb.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=rp.capacityInBytes)},e.prototype.fillCacheItem=function(e,t,n){var r={key:e,data:t,timestamp:ry(),visitedTime:ry(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return r.byteSize=rg(JSON.stringify(r)),r.byteSize=rg(JSON.stringify(r)),r},e.prototype.configure=function(e){return e&&(e.keyPrefix&&rb.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},e}(),rS=new en.k("Cache"),rw=new(function(e){function t(t){var n=this,r=t?Object.assign({},rp,t):rp;return(n=e.call(this,r)||this).config.storage=r.storage,n.getItem=n.getItem.bind(n),n.setItem=n.setItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return(0,et.__extends)(t,e),t.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},t.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},t.prototype._refreshItem=function(e,t){return e.visitedTime=ry(),this.config.storage.setItem(t,JSON.stringify(e)),e},t.prototype._isExpired=function(e){var t=JSON.parse(this.config.storage.getItem(e));return ry()>=t.expires},t.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},t.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),rS.error("Failed to set item "+e)}},t.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return t>n?t:n},t.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},t.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(var n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},t.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);if(null!=o){var s=JSON.parse(o);n.push(s)}}n.sort(function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.visitedTime<t.visitedTime?-1:1});for(var i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},t.prototype.setItem=function(e,t,n){rS.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey){rS.warn("Invalid key: should not be empty or 'CurSize'");return}if(void 0===t){rS.warn("The value of item should not be undefined!");return}var i={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+ry()};if(i.priority<1||i.priority>5){rS.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");return}var o=this.fillCacheItem(r,t,i);if(o.byteSize>this.config.itemMaxSize){rS.warn("Item with key: "+e+" you are trying to put into is too big!");return}try{var s=this.config.storage.getItem(r);if(s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(o.byteSize)){var a=this._findValidKeys();if(this._isCacheFull(o.byteSize)){var c=this._sizeToPop(o.byteSize);this._popOutItems(a,c)}}this._setItem(r,o)}catch(e){rS.warn("setItem failed! "+e)}},t.prototype.getItem=function(e,t){rS.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return rS.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(n=this.config.storage.getItem(r),null!=n){if(this._isExpired(r))this._removeItem(r,JSON.parse(n).byteSize),n=null;else{var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}}if(t&&void 0!==t.callback){var o=t.callback();return null!==o&&this.setItem(e,o,t),o}return null}catch(e){return rS.warn("getItem failed! "+e),null}},t.prototype.removeItem=function(e){rS.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){rS.warn("removeItem failed! "+e)}},t.prototype.clear=function(){rS.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(var t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){rS.warn("clear failed! "+e)}},t.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},t.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},t.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==rp.keyPrefix||(rS.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=ry.toString()),new t(e)},t}(r_));function rE(e){return e&&!!["provider"].find(function(t){return e.hasOwnProperty(t)})}function rI(e){return void 0!==e.redirectSignIn}er.d.register(rw),(f=j||(j={})).Cognito="COGNITO",f.Google="Google",f.Facebook="Facebook",f.Amazon="LoginWithAmazon",f.Apple="SignInWithApple",(h=B||(B={})).NoConfig="noConfig",h.MissingAuthConfig="missingAuthConfig",h.EmptyUsername="emptyUsername",h.InvalidUsername="invalidUsername",h.EmptyPassword="emptyPassword",h.EmptyCode="emptyCode",h.SignUpError="signUpError",h.NoMFA="noMFA",h.InvalidMFA="invalidMFA",h.EmptyChallengeResponse="emptyChallengeResponse",h.NoUserSession="noUserSession",h.Default="default",h.DeviceConfig="deviceConfig",h.NetworkError="networkError",h.AutoSignInError="autoSignInError",(d=K||(K={})).API_KEY="API_KEY",d.AWS_IAM="AWS_IAM",d.OPENID_CONNECT="OPENID_CONNECT",d.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",d.AWS_LAMBDA="AWS_LAMBDA";var rT=n(3188);function rA(e,t){void 0===t&&(t={});var n,r=e&&"j"===e[0]&&":"===e[1]?e.substr(2):e;if(void 0===(n=t.doNotParse)&&(n=!r||"{"!==r[0]&&"["!==r[0]&&'"'!==r[0]),!n)try{return JSON.parse(r)}catch(e){}return e}var rC=function(){return(rC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},rO=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies="string"==typeof e?rT.Q(e,t):"object"==typeof e&&null!==e?e:{},new Promise(function(){n.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie}).catch(function(){})}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=rT.Q(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),rA(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var r in this.cookies)n[r]=rA(this.cookies[r],e);return n},e.prototype.set=function(e,t,n){var r;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=rC(rC({},this.cookies),((r={})[e]=t,r)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=rT.q(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=rC(rC({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=rC({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=rT.q(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}(),rk=function(){return(rk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},rN=e7().isBrowser,rP=function(){function e(e){void 0===e&&(e={}),this.cookies=new rO,this.store=rN?window.localStorage:Object.create(null),this.cookies=e.req?new rO(decodeURIComponent(e.req.headers.cookie)):new rO,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!1,configurable:!0}),e.prototype.clear=function(){var e=this;Array.from(Array(this.length)).map(function(t,n){return e.key(n)}).forEach(function(t){return e.removeItem(t)})},e.prototype.getItem=function(e){return this.getLocalItem(e)},e.prototype.getLocalItem=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)?this.store[e]:null},e.prototype.getUniversalItem=function(e){return this.cookies.get(e)},e.prototype.key=function(e){return Object.keys(this.store)[e]},e.prototype.removeItem=function(e){this.removeLocalItem(e),this.removeUniversalItem(e)},e.prototype.removeLocalItem=function(e){delete this.store[e]},e.prototype.removeUniversalItem=function(e){this.cookies.remove(e,{path:"/"})},e.prototype.setItem=function(e,t){this.setLocalItem(e,t);var n=e.split(".").pop();["LastAuthUser","accessToken","refreshToken","idToken"].includes(null!=n?n:"")&&this.setUniversalItem(e,t,{expires:new Date(Date.now()+31536e6)})},e.prototype.setLocalItem=function(e,t){this.store[e]=t},e.prototype.setUniversalItem=function(e,t,n){void 0===n&&(n={}),this.cookies.set(e,t,rk(rk({},n),{path:"/",sameSite:!0,secure:!rN||"localhost"!==window.location.hostname}))},e}(),rD=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,i=t.Password,o=t.AuthParameters,s=t.ClientMetadata;this.validationData=n||{},this.authParameters=o||{},this.clientMetadata=s||{},this.username=r,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}();if("undefined"!=typeof window&&window.crypto&&(V=window.crypto),!V&&"undefined"!=typeof window&&window.msCrypto&&(V=window.msCrypto),!V&&void 0!==n.g&&n.g.crypto&&(V=n.g.crypto),!V)try{V=n(4658)}catch(e){}var rU=function(){function e(e,t){e=this.words=e||[],void 0!=t?this.sigBytes=t:this.sigBytes=4*e.length}var t=e.prototype;return t.random=function(t){for(var n=[],r=0;r<t;r+=4)n.push(function(){if(V){if("function"==typeof V.getRandomValues)try{return V.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof V.randomBytes)try{return V.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")}());return new e(n,t)},t.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},e}();function rR(e,t){null!=e&&this.fromString(e,t)}function rx(){return new rR(null)}var rF="undefined"!=typeof navigator;rF&&"Microsoft Internet Explorer"==navigator.appName?(rR.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var c=32767&this[e],u=this[e++]>>15,l=a*c+u*s;i=((c=s*c+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*u+(i>>>30),n[r++]=1073741823&c}return i},q=30):rF&&"Netscape"!=navigator.appName?(rR.prototype.am=function(e,t,n,r,i,o){for(;--o>=0;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},q=26):(rR.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var c=16383&this[e],u=this[e++]>>14,l=a*c+u*s;i=((c=s*c+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*u,n[r++]=268435455&c}return i},q=28),rR.prototype.DB=q,rR.prototype.DM=(1<<q)-1,rR.prototype.DV=1<<q,rR.prototype.FV=4503599627370496,rR.prototype.F1=52-q,rR.prototype.F2=2*q-52;var rM=[];for(W=0,G=48;W<=9;++W)rM[G++]=W;for(W=10,G=97;W<36;++W)rM[G++]=W;for(W=10,G=65;W<36;++W)rM[G++]=W;function rL(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function rj(e){var t=rx();return t.fromInt(e),t}function rB(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function rK(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */function rV(e){return nj.lW.from(new rU().random(e).toString(),"hex")}rK.prototype.convert=function(e){var t=rx();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(rR.ZERO)>0&&this.m.subTo(t,t),t},rK.prototype.revert=function(e){var t=rx();return e.copyTo(t),this.reduce(t),t},rK.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},rK.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},rK.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},rR.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},rR.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},rR.prototype.fromString=function(e,t){if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else if(4==t)n=2;else throw Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var n,r=e.length,i=!1,o=0;--r>=0;){var s=function(e,t){var n=rM[e.charCodeAt(t)];return null==n?-1:n}(e,r);if(s<0){"-"==e.charAt(r)&&(i=!0);continue}i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB)}this.clamp(),i&&rR.ZERO.subTo(this,this)},rR.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},rR.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},rR.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},rR.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>i|a,a=(this[n]&o)<<r;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},rR.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()},rR.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},rR.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&rR.ZERO.subTo(t,t)},rR.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},rR.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){null!=t&&t.fromInt(0),null!=n&&this.copyTo(n);return}null==n&&(n=rx());var o=rx(),s=this.s,a=e.s,c=this.DB-rB(r[r.t-1]);c>0?(r.lShiftTo(c,o),i.lShiftTo(c,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,l=o[u-1];if(0!=l){var f=l*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),h=this.FV/f,d=(1<<this.F1)/f,p=1<<this.F2,g=n.t,y=g-u,v=null==t?rx():t;for(o.dlShiftTo(y,v),n.compareTo(v)>=0&&(n[n.t++]=1,n.subTo(v,n)),rR.ONE.dlShiftTo(u,v),v.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--y>=0;){var m=n[--g]==l?this.DM:Math.floor(n[g]*h+(n[g-1]+p)*d);if((n[g]+=o.am(0,m,n,y,0,u))<m)for(o.dlShiftTo(y,v),n.subTo(v,n);n[g]<--m;)n.subTo(v,n)}null!=t&&(n.drShiftTo(u,t),s!=a&&rR.ZERO.subTo(t,t)),n.t=u,n.clamp(),c>0&&n.rShiftTo(c,n),s<0&&rR.ZERO.subTo(n,n)}}},rR.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if((1&e)==0)return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},rR.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},rR.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else if(4==e)t=2;else throw Error("Only radix 2, 4, 8, 16, 32 are supported");var t,n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(i=!0,o=rL(n));s>=0;)a<t?n=(this[s]&(1<<a)-1)<<t-a|this[--s]>>(a+=this.DB-t):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=rL(n));return i?o:"0"},rR.prototype.negate=function(){var e=rx();return rR.ZERO.subTo(this,e),e},rR.prototype.abs=function(){return this.s<0?this.negate():this},rR.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},rR.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+rB(this[this.t-1]^this.s&this.DM)},rR.prototype.mod=function(e){var t=rx();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(rR.ZERO)>0&&e.subTo(t,t),t},rR.prototype.equals=function(e){return 0==this.compareTo(e)},rR.prototype.add=function(e){var t=rx();return this.addTo(e,t),t},rR.prototype.subtract=function(e){var t=rx();return this.subTo(e,t),t},rR.prototype.multiply=function(e){var t=rx();return this.multiplyTo(e,t),t},rR.prototype.divide=function(e){var t=rx();return this.divRemTo(e,t,null),t},rR.prototype.modPow=function(e,t,n){var r,i=e.bitLength(),o=rj(1),s=new rK(t);if(i<=0)return o;var a=[],c=3,u=(r=i<18?1:i<48?3:i<144?4:i<768?5:6)-1,l=(1<<r)-1;if(a[1]=s.convert(this),r>1){var f=rx();for(s.sqrTo(a[1],f);c<=l;)a[c]=rx(),s.mulTo(f,a[c-2],a[c]),c+=2}var h,d,p=e.t-1,g=!0,y=rx();for(i=rB(e[p])-1;p>=0;){for(i>=u?h=e[p]>>i-u&l:(h=(e[p]&(1<<i+1)-1)<<u-i,p>0&&(h|=e[p-1]>>this.DB+i-u)),c=r;(1&h)==0;)h>>=1,--c;if((i-=c)<0&&(i+=this.DB,--p),g)a[h].copyTo(o),g=!1;else{for(;c>1;)s.sqrTo(o,y),s.sqrTo(y,o),c-=2;c>0?s.sqrTo(o,y):(d=o,o=y,y=d),s.mulTo(y,a[h],o)}for(;p>=0&&(e[p]&1<<i)==0;)s.sqrTo(o,y),d=o,o=y,y=d,--i<0&&(i=this.DB-1,--p)}var v=s.revert(o);return n(null,v),v},rR.ZERO=rj(0),rR.ONE=rj(1);var rq=/^[89a-f]/i,rG=function(){function e(e){this.N=new rR("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new rR("2",16),this.k=new rR(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=nj.lW.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,function(n,r){n&&e(n,null),t.largeAValue=r,e(null,t.largeAValue)})},t.generateRandomSmallA=function(){var e=rV(128).toString("hex");return new rR(e,16)},t.generateRandomString=function(){return rV(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();var i=""+e+t+":"+this.randomPassword,o=this.hash(i),s=rV(16).toString("hex");this.SaltToHashDevices=this.padHex(new rR(s,16)),this.g.modPow(new rR(this.hexHash(this.SaltToHashDevices+o),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},t.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,function(e,r){e&&t(e,null),r.mod(n.N).equals(rR.ZERO)&&t(Error("Illegal paramater. A mod N cannot be 0."),null),t(null,r)})},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new rR(this.UHexHash,16)},t.hash=function(e){var t=new nZ.Sha256;t.update(e);var n=t.digestSync(),r=nj.lW.from(n).toString("hex");return Array(64-r.length).join("0")+r},t.hexHash=function(e){return this.hash(nj.lW.from(e,"hex"))},t.computehkdf=function(e,t){var n=nj.lW.concat([this.infoBits,nj.lW.from("\x01","utf8")]),r=new nZ.Sha256(t);r.update(e);var i=r.digestSync(),o=new nZ.Sha256(i);return o.update(n),o.digestSync().slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var o=this;if(n.mod(this.N).equals(rR.ZERO))throw Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(rR.ZERO))throw Error("U cannot be zero.");var s=""+this.poolName+e+":"+t,a=this.hash(s),c=new rR(this.hexHash(this.padHex(r)+a),16);this.calculateS(c,n,function(e,t){e&&i(e,null),i(null,o.computehkdf(nj.lW.from(o.padHex(t),"hex"),nj.lW.from(o.padHex(o.UValue),"hex")))})},t.calculateS=function(e,t,n){var r=this;this.g.modPow(e,this.N,function(i,o){i&&n(i,null),t.subtract(r.k.multiply(o)).modPow(r.smallAValue.add(r.UValue.multiply(e)),r.N,function(e,t){e&&n(e,null),n(null,t.mod(r.N))})})},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){if(!(e instanceof rR))throw Error("Not a BigInteger");var t=0>e.compareTo(rR.ZERO),n=e.abs().toString(16);if(n=n.length%2!=0?"0"+n:n,n=rq.test(n)?"00"+n:n,t){var r=n.split("").map(function(e){var t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)}).join("");(n=new rR(r,16).add(rR.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},e}(),rW=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(nj.lW.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();function rH(e,t){return(rH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var rz=function(e){var t;function n(t){var n=(void 0===t?{}:t).AccessToken;return e.call(this,n||"")||this}return(t=n).prototype=Object.create(e.prototype),t.prototype.constructor=t,rH(t,e),n}(rW);function rJ(e,t){return(rJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var rY=function(e){var t;function n(t){var n=(void 0===t?{}:t).IdToken;return e.call(this,n||"")||this}return(t=n).prototype=Object.create(e.prototype),t.prototype.constructor=t,rJ(t,e),n}(rW),rQ=function(){function e(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}return e.prototype.getToken=function(){return this.token},e}(),rX={userAgent:"aws-amplify/5.0.4",isReactNative:"undefined"!=typeof navigator&&"ReactNative"===navigator.product},rZ=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,i=t.AccessToken,o=t.ClockDrift;if(null==i||null==n)throw Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=i,this.clockDrift=void 0===o?this.calculateClockDrift():o}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),r$=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r0=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r1=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=r0[e.getUTCDay()],n=r$[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+i+":"+o+":"+s+" UTC "+e.getUTCFullYear()},e}(),r2=function(){function e(e){var t=void 0===e?{}:e,n=t.Name,r=t.Value;this.Name=n||"",this.Value=r||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),r3={},r4=function(){function e(){}return e.setItem=function(e,t){return r3[e]=t,r3[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(r3,e)?r3[e]:void 0},e.removeItem=function(e){return delete r3[e]},e.clear=function(){return r3={}},e}(),r5=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=r4}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),r6="undefined"!=typeof navigator?rX.isReactNative?"react-native":navigator.userAgent:"nodejs",r8=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||new r5().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,t){var n=this,r=e.getAuthParameters();r.USERNAME=this.username;var i=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:i};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",o,function(e,r){if(e)return t.onFailure(e);var i=r.ChallengeName,o=r.ChallengeParameters;return"CUSTOM_CHALLENGE"===i?(n.Session=r.Session,t.customChallenge(o)):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))})},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,t){var n,r,i=this,o=new rG(this.pool.getUserPoolName()),s=new r1,a={};null!=this.deviceKey&&(a.DEVICE_KEY=this.deviceKey),a.USERNAME=this.username,o.getLargeAValue(function(c,u){c&&t.onFailure(c),a.SRP_A=u.toString(16),"CUSTOM_AUTH"===i.authenticationFlowType&&(a.CHALLENGE_NAME="SRP_A");var l=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),f={AuthFlow:i.authenticationFlowType,ClientId:i.pool.getClientId(),AuthParameters:a,ClientMetadata:l};i.getUserContextData(i.username)&&(f.UserContextData=i.getUserContextData(i.username)),i.client.request("InitiateAuth",f,function(a,c){if(a)return t.onFailure(a);var u=c.ChallengeParameters;i.username=u.USER_ID_FOR_SRP,i.userDataKey=i.keyPrefix+"."+i.username+".userData",n=new rR(u.SRP_B,16),r=new rR(u.SALT,16),i.getCachedDeviceKeyAndPassword(),o.getPasswordAuthenticationKey(i.username,e.getPassword(),n,r,function(e,n){e&&t.onFailure(e);var r=s.getNowString(),a=nj.lW.concat([nj.lW.from(i.pool.getUserPoolName(),"utf8"),nj.lW.from(i.username,"utf8"),nj.lW.from(u.SECRET_BLOCK,"base64"),nj.lW.from(r,"utf8")]),f=new nZ.Sha256(n);f.update(a);var h=f.digestSync(),d=nj.lW.from(h).toString("base64"),p={};p.USERNAME=i.username,p.PASSWORD_CLAIM_SECRET_BLOCK=u.SECRET_BLOCK,p.TIMESTAMP=r,p.PASSWORD_CLAIM_SIGNATURE=d,null!=i.deviceKey&&(p.DEVICE_KEY=i.deviceKey);var g={ChallengeName:"PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:p,Session:c.Session,ClientMetadata:l};i.getUserContextData()&&(g.UserContextData=i.getUserContextData()),function e(t,n){return i.client.request("RespondToAuthChallenge",t,function(r,o){return r&&"ResourceNotFoundException"===r.code&&-1!==r.message.toLowerCase().indexOf("device")?(p.DEVICE_KEY=null,i.deviceKey=null,i.randomPassword=null,i.deviceGroupKey=null,i.clearCachedDeviceKeyAndPassword(),e(t,n)):n(r,o)})}(g,function(e,n){return e?t.onFailure(e):i.authenticateUserInternal(n,o,t)})})})})},t.authenticateUserPlainUsernamePassword=function(e,t){var n=this,r={};if(r.USERNAME=this.username,r.PASSWORD=e.getPassword(),!r.PASSWORD){t.onFailure(Error("PASSWORD parameter is required"));return}var i=new rG(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var o=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),s={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:o};this.getUserContextData(this.username)&&(s.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",s,function(e,r){return e?t.onFailure(e):n.authenticateUserInternal(r,i,t)})},t.authenticateUserInternal=function(e,t,n){var r=this,i=e.ChallengeName,o=e.ChallengeParameters;if("SMS_MFA"===i)return this.Session=e.Session,n.mfaRequired(i,o);if("SELECT_MFA_TYPE"===i)return this.Session=e.Session,n.selectMFAType(i,o);if("MFA_SETUP"===i)return this.Session=e.Session,n.mfaSetup(i,o);if("SOFTWARE_TOKEN_MFA"===i)return this.Session=e.Session,n.totpRequired(i,o);if("CUSTOM_CHALLENGE"===i)return this.Session=e.Session,n.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===i){this.Session=e.Session;var s=null,a=null,c=[],u=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(s=JSON.parse(e.ChallengeParameters.userAttributes),a=JSON.parse(e.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)c[l]=a[l].substr(u.length);return n.newPasswordRequired(s,c)}if("DEVICE_SRP_AUTH"===i){this.Session=e.Session,this.getDeviceResponse(n);return}this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=i,this.cacheTokens();var f=e.AuthenticationResult.NewDeviceMetadata;if(null==f)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(i){if(i)return n.onFailure(i);var o={Salt:nj.lW.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:nj.lW.from(t.getVerifierDevices(),"hex").toString("base64")};r.verifierDevices=o.PasswordVerifier,r.deviceGroupKey=f.DeviceGroupKey,r.randomPassword=t.getRandomPassword(),r.client.request("ConfirmDevice",{DeviceKey:f.DeviceKey,AccessToken:r.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:r6},function(t,i){return t?n.onFailure(t):(r.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,r.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary)?n.onSuccess(r.signInUserSession,i.UserConfirmationNecessary):n.onSuccess(r.signInUserSession)})})},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(Error("New password is required."));var o=new rG(this.pool.getUserPoolName()),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username;var c={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)})},t.getDeviceResponse=function(e,t){var n=this,r=new rG(this.deviceGroupKey),i=new r1,o={};o.USERNAME=this.username,o.DEVICE_KEY=this.deviceKey,r.getLargeAValue(function(s,a){s&&e.onFailure(s),o.SRP_A=a.toString(16);var c={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:o,ClientMetadata:t,Session:n.Session};n.getUserContextData()&&(c.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",c,function(t,o){if(t)return e.onFailure(t);var s=o.ChallengeParameters,a=new rR(s.SRP_B,16),c=new rR(s.SALT,16);r.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,a,c,function(t,r){if(t)return e.onFailure(t);var a=i.getNowString(),c=nj.lW.concat([nj.lW.from(n.deviceGroupKey,"utf8"),nj.lW.from(n.deviceKey,"utf8"),nj.lW.from(s.SECRET_BLOCK,"base64"),nj.lW.from(a,"utf8")]),u=new nZ.Sha256(r);u.update(c);var l=u.digestSync(),f=nj.lW.from(l).toString("base64"),h={};h.USERNAME=n.username,h.PASSWORD_CLAIM_SECRET_BLOCK=s.SECRET_BLOCK,h.TIMESTAMP=a,h.PASSWORD_CLAIM_SIGNATURE=f,h.DEVICE_KEY=n.deviceKey;var d={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:h,Session:o.Session};n.getUserContextData()&&(d.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",d,function(t,r){return t?e.onFailure(t):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))})})})})},t.confirmRegistration=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",i,function(e){return e?n(e,null):n(null,"SUCCESS")})},t.sendCustomChallengeAnswer=function(e,t,n){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new rG(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var s={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,function(e,n){return e?t.onFailure(e):r.authenticateUserInternal(n,o,t)})},t.sendMFACode=function(e,t,n,r){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;var s=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===s&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var a={ChallengeName:s,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,function(e,n){if(e)return t.onFailure(e);if("DEVICE_SRP_AUTH"===n.ChallengeName){i.getDeviceResponse(t);return}if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(i.signInUserSession);var r=new rG(i.pool.getUserPoolName());r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return t.onFailure(e);var o={Salt:nj.lW.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:nj.lW.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=o.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:r6},function(e,r){return e?t.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary)?t.onSuccess(i.signInUserSession,r.UserConfirmationNecessary):t.onSuccess(i.signInUserSession)})})})},t.changePassword=function(e,t,n,r){if(!(null!=this.signInUserSession&&this.signInUserSession.isValid()))return n(Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(Error("User is not authenticated"),null);var t=[];t.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t){return t?e(t,null):e(null,"SUCCESS")})},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t){return t?e(t,null):e(null,"SUCCESS")})},t.deleteUser=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(t){return t?e(t,null):(n.clearCachedUser(),e(null,"SUCCESS"))})},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e,n){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS",n)},{bypassCache:!0})})},t.getUserAttributes=function(e){if(!(null!=this.signInUserSession&&this.signInUserSession.isValid()))return e(Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t,n){if(t)return e(t,null);for(var r=[],i=0;i<n.UserAttributes.length;i++){var o={Name:n.UserAttributes[i].Name,Value:n.UserAttributes[i].Value},s=new r2(o);r.push(s)}return e(null,r)})},t.getMFAOptions=function(e){if(!(null!=this.signInUserSession&&this.signInUserSession.isValid()))return e(Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t,n){return t?e(t,null):e(null,n.MFAOptions)})},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(e){var t=this;return void 0===e&&(e={}),new Promise(function(n){var r=t.signInUserSession.getRefreshToken();r&&r.getToken()?t.refreshSession(r,n,e.clientMetadata):n()})},t.getUserData=function(e,t){var n=this;if(!(null!=this.signInUserSession&&this.signInUserSession.isValid()))return this.clearCachedUserData(),e(Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(!r){this.fetchUserData().then(function(t){e(null,t)}).catch(e);return}if(this.isFetchUserDataAndTokenRequired(t)){this.fetchUserData().then(function(e){return n.refreshSessionIfPossible(t).then(function(){return e})}).then(function(t){return e(null,t)}).catch(e);return}try{e(null,JSON.parse(r));return}catch(t){this.clearCachedUserData(),e(t,null);return}},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){var t=(e||{}).bypassCache;return void 0!==t&&t},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then(function(t){return e.cacheUserData(t),t})},t.deleteAttributes=function(e,t){var n=this;if(!(null!=this.signInUserSession&&this.signInUserSession.isValid()))return t(Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):n.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},t.resendConfirmationCode=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.client.request("ResendConfirmationCode",n,function(t,n){return t?e(t,null):e(null,n)})},t.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=n+".idToken";if(this.storage.getItem(r)){var i=new rY({IdToken:this.storage.getItem(r)}),o=new rz({AccessToken:this.storage.getItem(n+".accessToken")}),s=new rQ({RefreshToken:this.storage.getItem(n+".refreshToken")}),a=parseInt(this.storage.getItem(n+".clockDrift"),0)||0,c=new rZ({IdToken:i,AccessToken:o,RefreshToken:s,ClockDrift:a});if(c.isValid())return this.signInUserSession=c,e(null,this.signInUserSession);if(!s.getToken())return e(Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(s,e,t.clientMetadata)}else e(Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,t,n){var r=this,i=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(t):t,o={};o.REFRESH_TOKEN=e.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),a=s+".LastAuthUser";if(this.storage.getItem(a)){this.username=this.storage.getItem(a);var c=s+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(c),o.DEVICE_KEY=this.deviceKey}var u={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,ClientMetadata:n};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",u,function(t,n){if(t)return"NotAuthorizedException"===t.code&&r.clearCachedUser(),i(t,null);if(n){var o=n.AuthenticationResult;return Object.prototype.hasOwnProperty.call(o,"RefreshToken")||(o.RefreshToken=e.getToken()),r.signInUserSession=r.getCognitoUserSession(o),r.cacheTokens(),i(null,r.signInUserSession)}})},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(e+".LastAuthUser",this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username;this.storage.setItem(e+".deviceKey",this.deviceKey),this.storage.setItem(e+".randomPasswordKey",this.randomPassword),this.storage.setItem(e+".deviceGroupKey",this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(e+".randomPasswordKey"),this.deviceGroupKey=this.storage.getItem(e+".deviceGroupKey"))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username;this.storage.removeItem(e+".deviceKey"),this.storage.removeItem(e+".randomPasswordKey"),this.storage.removeItem(e+".deviceGroupKey")},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(e+".LastAuthUser"),this.storage.removeItem(i)},t.getCognitoUserSession=function(e){var t=new rY(e),n=new rz(e),r=new rQ(e);return new rZ({IdToken:t,AccessToken:n,RefreshToken:r})},t.forgotPassword=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)})},t.confirmPassword=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",i,function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},t.getAttributeVerificationCode=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess("SUCCESS")})},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},t.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(t,n){return t?e.onFailure(t):e.onSuccess(n)})},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},t.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")})},t.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")})},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(Error("User is not authenticated"));var r={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(r.PaginationToken=t),this.client.request("ListDevices",r,function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(n){return n?e.onFailure(n):(t.clearCachedUser(),e.onSuccess("SUCCESS"))})},t.signOut=function(e){var t=this;if(!e||"function"!=typeof e){this.cleanClientData();return}this.getSession(function(n,r){if(n)return e(n);t.revokeTokens(function(n){t.cleanClientData(),e(n)})})},t.revokeTokens=function(e){if(void 0===e&&(e=function(){}),"function"!=typeof e)throw Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession)return e(Error("User is not authenticated"));if(!this.signInUserSession.getAccessToken())return e(Error("No Access token available"));var t=this.signInUserSession.getRefreshToken().getToken(),n=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(n)&&t)return this.revokeToken({token:t,callback:e});e()},t.isSessionRevocable=function(e){if(e&&"function"==typeof e.decodePayload)try{return!!e.decodePayload().origin_jti}catch(e){}return!1},t.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},t.revokeToken=function(e){var t=e.token,n=e.callback;this.client.requestWithRetry("RevokeToken",{Token:t,ClientId:this.pool.getClientId()},function(e){if(e)return n(e);n()})},t.sendMFASelectionAnswer=function(e,t){var n=this,r={};r.USERNAME=this.username,r.ANSWER=e;var i={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",i,function(r,i){return r?t.onFailure(r):(n.Session=i.Session,"SMS_MFA"===e)?t.mfaRequired(i.ChallengeName,i.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(i.ChallengeName,i.ChallengeParameters):void 0})},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(n,r){return n?e.onFailure(n):(t.Session=r.Session,e.associateSecretCode(r.SecretCode))})},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;var i={};i.USERNAME=r.username;var o={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:i,Session:r.Session};r.getUserContextData()&&(o.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",o,function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))})})},e}();function r7(){}r7.prototype.userAgent=rX.userAgent;var r9=function(){r7.category="auth"},ie=function(e){r7.framework=e},it=function(e){var t=r7.category?" "+r7.category:"",n=r7.framework?" framework/"+r7.framework:"";return""+r7.prototype.userAgent+t+n};function ir(e){var t="function"==typeof Map?new Map:void 0;return(ir=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ii(e,arguments,is(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),io(n,e)})(e)}function ii(e,t,n){return(ii=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&io(i,n.prototype),i}:Reflect.construct.bind()).apply(null,arguments)}function io(e,t){return(io=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function is(e){return(is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ia=function(e){var t;function n(t,n,r,i){var o;return(o=e.call(this,t)||this).code=n,o.name=r,o.statusCode=i,o}return(t=n).prototype=Object.create(e.prototype),t.prototype.constructor=t,io(t,e),n}(ir(Error)),ic=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";var r=(n||{}).credentials;this.fetchOptions=r?{credentials:r}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var n=this;return new Promise(function(r,i){n.request(e,t,function(e,t){e?i(new ia(e.message,e.code,e.name,e.statusCode)):r(t)})})},t.requestWithRetry=function(e,t,n){var r=this;(function e(t,n,r,i){if(void 0===i&&(i=1),"function"!=typeof t)throw Error("functionToRetry must be a function");return iu.debug(t.name+" attempt #"+i+" with args: "+JSON.stringify(n)),t.apply(void 0,n).catch(function(o){if(iu.debug("error on "+t.name,o),o&&o.nonRetryable)throw iu.debug(t.name+" non retryable error",o),o;var s=r(i,n,o);if(iu.debug(t.name+" retrying in "+s+" ms"),!1!==s)return new Promise(function(e){return setTimeout(e,s)}).then(function(){return e(t,n,r,i+1)});throw o})})(function(t){return new Promise(function(n,i){r.request(e,t,function(e,t){e?i(e):n(t)})})},[t],function(e){var t=100*Math.pow(2,e)+100*Math.random();return!(t>5e3)&&t}).then(function(e){return n(null,e)}).catch(function(e){return n(e)})},t.request=function(e,t,n){var r,i={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":it(),"Cache-Control":"no-store"},o=Object.assign({},this.fetchOptions,{headers:i,method:"POST",mode:"cors",body:JSON.stringify(t)});fetch(this.endpoint,o).then(function(e){return r=e,e},function(e){if(e instanceof TypeError)throw Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(r.ok)return n(null,e);var t=(e.__type||e.code).split("#").pop(),i=Error(e.message||e.Message||null);return i.name=t,i.code=t,n(i)}).catch(function(e){if(r&&r.headers&&r.headers.get("x-amzn-errortype"))try{var t=r.headers.get("x-amzn-errortype").split(":")[0],i=Error(r.status?r.status.toString():null);return i.code=t,i.name=t,i.statusCode=r.status,n(i)}catch(e){}else e instanceof Error&&"Network error"===e.message&&(e.code="NetworkError");return n(e)})},e}(),iu={debug:function(){}},il=function(){function e(e,t){var n=e||{},r=n.UserPoolId,i=n.ClientId,o=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!i)throw Error("Both UserPoolId and ClientId are required.");if(r.length>55||!/^[\w-]+_[0-9a-zA-Z]+$/.test(r))throw Error("Invalid UserPoolId format.");var c=r.split("_")[0];this.userPoolId=r,this.clientId=i,this.client=new ic(c,o,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||new r5().getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},t.getClientId=function(){return this.clientId},t.signUp=function(e,t,n,r,i,o){var s=this,a={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:r,ClientMetadata:o};this.getUserContextData(e)&&(a.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",a,function(t,n){if(t)return i(t,null);var r={Username:e,Pool:s,Storage:s.storage};return i(null,{user:new r8(r),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails})})},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new r8(n)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),ih=n(7258),id=function(){function e(e){if(void 0===e&&(e={}),e.domain&&(this.domain=e.domain),e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),ih.set(e,t,n),ih.get(e)},t.getItem=function(e){return ih.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),ih.remove(e,t)},t.clear=function(){for(var e=ih.get(),t=Object.keys(e).length,n=0;n<t;++n)this.removeItem(Object.keys(e)[n]);return{}},e}(),ip=function(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()},ig=function(e){window.sessionStorage.setItem("oauth_state",e)},iy=function(){var e=window.sessionStorage.getItem("oauth_state");return window.sessionStorage.removeItem("oauth_state"),e},iv=function(e){window.sessionStorage.setItem("ouath_pkce_key",e)},im=function(){var e=window.sessionStorage.getItem("ouath_pkce_key");return window.sessionStorage.removeItem("ouath_pkce_key"),e},ib="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",i_=function(e,t,n){nT.dispatch("auth",{event:e,data:t,message:n},"Auth",ib)},iS=new en.k("OAuth"),iw=function(){function e(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,i=void 0===r?[]:r;if(this._urlOpener=t.urlOpener||ip,this._config=t,this._cognitoClientId=n,!this.isValidScopes(i))throw Error("scopes must be a String Array");this._scopes=i}return e.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},e.prototype.oauthSignIn=function(e,t,n,r,i,o){void 0===e&&(e="code"),void 0===i&&(i=j.Cognito);var s=this._generateState(32),a=o?s+"-"+o.split("").map(function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")}).join(""):s;ig(a);var c=this._generateRandom(128);iv(c);var u=this._generateChallenge(c),l=this._scopes.join(" "),f="https://"+t+"/oauth2/authorize?"+Object.entries((0,et.__assign)((0,et.__assign)({redirect_uri:n,response_type:e,client_id:r,identity_provider:i,scope:l,state:a},"code"===e?{code_challenge:u}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var t=(0,et.__read)(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&");iS.debug("Redirecting to "+f),this._urlOpener(f,n)},e.prototype._handleCodeFlow=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c,u,l,f,h,d,p,g,y;return(0,et.__generator)(this,function(v){switch(v.label){case 0:if(t=((0,nM.parse)(e).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n,r=(0,et.__read)(t,2),i=r[0],o=r[1];return(0,et.__assign)((0,et.__assign)({},e),((n={})[i]=o,n))},{code:void 0}).code,n=(0,nM.parse)(e).pathname||"/",r=(0,nM.parse)(this._config.redirectSignIn).pathname||"/",!t||n!==r)return[2];return i_("codeFlow",{},"Retrieving tokens from "+(i="https://"+this._config.domain+"/oauth2/token")),o=rI(this._config)?this._cognitoClientId:this._config.clientID,s=rI(this._config)?this._config.redirectSignIn:this._config.redirectUri,a=im(),c=(0,et.__assign)({grant_type:"authorization_code",code:t,client_id:o,redirect_uri:s},a?{code_verifier:a}:{}),iS.debug("Calling token endpoint: "+i+" with",c),u=Object.entries(c).map(function(e){var t=(0,et.__read)(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&"),l={category:A.Auth,action:k.FederatedSignIn},[4,fetch(i,{method:"POST",headers:((y={"Content-Type":"application/x-www-form-urlencoded"})[nR]=ni(l),y),body:u})];case 1:return[4,v.sent().json()];case 2:if(h=(f=v.sent()).access_token,d=f.refresh_token,p=f.id_token,g=f.error)throw Error(g);return[2,{accessToken:h,refreshToken:d,idToken:p}]}})})},e.prototype._handleImplicitFlow=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,et.__generator)(this,function(i){return n=(t=((0,nM.parse)(e).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n,r=(0,et.__read)(t,2),i=r[0],o=r[1];return(0,et.__assign)((0,et.__assign)({},e),((n={})[i]=o,n))},{id_token:void 0,access_token:void 0})).id_token,r=t.access_token,i_("implicitFlow",{},"Got tokens from "+e),iS.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]})})},e.prototype.handleAuthResponse=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return(0,et.__generator)(this,function(c){switch(c.label){case 0:if(c.trys.push([0,5,,6]),n=(t=e?(0,et.__assign)((0,et.__assign)({},((0,nM.parse)(e).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=(0,et.__read)(t,2),r=n[0],i=n[1];return e[r]=i,e},{})),((0,nM.parse)(e).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=(0,et.__read)(t,2),r=n[0],i=n[1];return e[r]=i,e},{})):{}).error,r=t.error_description,n)throw Error(r);if(i=this._validateState(t),iS.debug("Starting "+this._config.responseType+" flow with "+e),"code"!==this._config.responseType)return[3,2];return o=[{}],[4,this._handleCodeFlow(e)];case 1:return[2,et.__assign.apply(void 0,[et.__assign.apply(void 0,o.concat([c.sent()])),{state:i}])];case 2:return s=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,et.__assign.apply(void 0,[et.__assign.apply(void 0,s.concat([c.sent()])),{state:i}])];case 4:return[3,6];case 5:throw a=c.sent(),iS.debug("Error handling auth response.",a),a;case 6:return[2]}})})},e.prototype._validateState=function(e){if(e){var t=iy(),n=e.state;if(t&&t!==n)throw Error("Invalid state in OAuth flow");return n}},e.prototype.signOut=function(){return(0,et.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,et.__generator)(this,function(n){return i_("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+(e="https://"+this._config.domain+"/logout?"+Object.entries({client_id:rI(this._config)?this._cognitoClientId:this._config.oauth.clientID,logout_uri:encodeURIComponent(t=rI(this._config)?this._config.redirectSignOut:this._config.returnTo)}).map(function(e){var t=(0,et.__read)(e,2);return t[0]+"="+t[1]}).join("&"))),iS.debug("Signing out from "+e),[2,this._urlOpener(e,t)]})})},e.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";n>0;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},e.prototype._generateChallenge=function(e){var t=new nZ.Sha256;t.update(e);var n=t.digestSync(),r=nj.lW.from(n).toString("base64");return this._base64URL(r)},e.prototype._base64URL=function(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=66*Math.random()|0;return this._bufferToString(t)},e.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var i=e[r]%t.length;n.push(t[i])}return n.join("")},e}(),iE=function(e){if(e7().isBrowser&&window.location)e({url:window.location.href});else if(e7().isNode);else throw Error("Not supported")};(p=H||(H={})).DEFAULT_MSG="Authentication Error",p.EMPTY_EMAIL="Email cannot be empty",p.EMPTY_PHONE="Phone number cannot be empty",p.EMPTY_USERNAME="Username cannot be empty",p.INVALID_USERNAME="The username should either be a string or one of the sign in types",p.EMPTY_PASSWORD="Password cannot be empty",p.EMPTY_CODE="Confirmation code cannot be empty",p.SIGN_UP_ERROR="Error creating account",p.NO_MFA="No valid MFA method provided",p.INVALID_MFA="Invalid MFA type",p.EMPTY_CHALLENGE="Challenge response cannot be empty",p.NO_USER_SESSION="Failed to get the session because the user is empty",p.NETWORK_ERROR="Network Error",p.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",p.AUTOSIGNIN_ERROR="Please use your credentials to sign in";var iI=new en.k("AuthError"),iT=function(e){function t(n){var r=this,i=iC[n],o=i.message,s=i.log;return(r=e.call(this,o)||this).constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="AuthError",r.log=s||o,iI.error(r.log),r}return(0,et.__extends)(t,e),t}(Error),iA=function(e){function t(n){var r=e.call(this,n)||this;return r.constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="NoUserPoolError",r}return(0,et.__extends)(t,e),t}(iT),iC={noConfig:{message:H.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:H.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:H.EMPTY_USERNAME},invalidUsername:{message:H.INVALID_USERNAME},emptyPassword:{message:H.EMPTY_PASSWORD},emptyCode:{message:H.EMPTY_CODE},signUpError:{message:H.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:H.NO_MFA},invalidMFA:{message:H.INVALID_MFA},emptyChallengeResponse:{message:H.EMPTY_CHALLENGE},noUserSession:{message:H.NO_USER_SESSION},deviceConfig:{message:H.DEVICE_CONFIG},networkError:{message:H.NETWORK_ERROR},autoSignInError:{message:H.AUTOSIGNIN_ERROR},default:{message:H.DEFAULT_MSG}},iO=new en.k("AuthClass"),ik="aws.cognito.signin.user.admin",iN="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",iP=function(e,t,n){nT.dispatch("auth",{event:e,data:t,message:n},"Auth",iN)},iD=new(function(){function e(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.autoSignInInitiated=!1,this.inflightSessionPromise=null,this.inflightSessionPromiseCounter=0,this.Credentials=nD,this.wrapRefreshSessionCallback=function(e){return function(t,n){return n?iP("tokenRefresh",void 0,"New token retrieved"):iP("tokenRefresh_failure",t,"Failed to retrieve new token"),e(t,n)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),nT.listen("auth",function(e){switch(e.payload.event){case"verify":case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}}),r9(),ie(nn.framework),nn.observeFrameworkChanges(function(){ie(nn.framework)})}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(e){var t=this;if(!e)return this._config||{};iO.debug("configure Auth");var n=Object.assign({},this._config,nb(e).Auth,e);this._config=n;var r=this._config,i=r.userPoolId,o=r.userPoolWebClientId,s=r.cookieStorage,a=r.oauth,c=r.region,u=r.identityPoolId,l=r.mandatorySignIn,f=r.refreshHandlers,h=r.identityPoolRegion,d=r.clientMetadata,p=r.endpoint,g=r.storage;if(g){if(!this._isValidAuthStorage(g))throw iO.error("The storage in the Auth config is not valid!"),Error("Empty storage object");this._storage=g}else s?this._storage=new id(s):this._storage=e.ssr?new rP:new e4().getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i){var y={UserPoolId:i,ClientId:o,endpoint:p};y.Storage=this._storage,this.userPool=new il(y,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:l,region:c,userPoolId:i,identityPoolId:u,refreshHandlers:f,storage:this._storage,identityPoolRegion:h});var v=a?rI(this._config.oauth)?a:a.awsCognito:void 0;if(v){var m=Object.assign({cognitoClientId:o,UserPoolId:i,domain:v.domain,scopes:v.scope,redirectSignIn:v.redirectSignIn,redirectSignOut:v.redirectSignOut,responseType:v.responseType,Storage:this._storage,urlOpener:v.urlOpener,clientMetadata:d},v.options);this._oAuthHandler=new iw({scopes:m.scopes,config:m,cognitoClientId:m.cognitoClientId});var b={};iE(function(e){var n=e.url;b[n]||(b[n]=!0,t._handleAuthResponse(n))})}return iP("configured",null,"The Auth category has been configured successfully"),this.autoSignInInitiated||"function"!=typeof this._storage.getItem||(this.isTrueStorageValue("amplify-polling-started")&&(iP("autoSignIn_failure",null,B.AutoSignInError),this._storage.removeItem("amplify-auto-sign-in")),this._storage.removeItem("amplify-polling-started")),this._config},e.prototype.signUp=function(e){for(var t,n,r,i,o=this,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(!this.userPool)return this.rejectNoUserPool();var c=null,u=null,l=[],f=null,h={enabled:!1},d={},p={};if(e&&"string"==typeof e){c=e,u=s?s[0]:null;var g=s?s[1]:null,y=s?s[2]:null;g&&l.push(new r2({Name:"email",Value:g})),y&&l.push(new r2({Name:"phone_number",Value:y}))}else{if(!e||"object"!=typeof e)return this.rejectAuthError(B.SignUpError);c=e.username,u=e.password,e&&e.clientMetadata?i=e.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata);var v=e.attributes;v&&Object.keys(v).map(function(e){l.push(new r2({Name:e,Value:v[e]}))});var m=e.validationData;m&&(f=[],Object.keys(m).map(function(e){f.push(new r2({Name:e,Value:m[e]}))})),(h=null!==(t=e.autoSignIn)&&void 0!==t?t:{enabled:!1}).enabled&&(this._storage.setItem("amplify-auto-sign-in","true"),d=null!==(n=h.validationData)&&void 0!==n?n:{},p=null!==(r=h.clientMetaData)&&void 0!==r?r:{})}return c?u?(iO.debug("signUp attrs:",l),iO.debug("signUp validation data:",f),new Promise(function(e,t){o.userPool.signUp(c,u,l,f,function(n,r){n?(iP("signUp_failure",n,c+" failed to signup"),t(n)):(iP("signUp",r,c+" has signed up successfully"),h.enabled&&o.handleAutoSignIn(c,u,d,p,r),e(r))},i)})):this.rejectAuthError(B.EmptyPassword):this.rejectAuthError(B.EmptyUsername)},e.prototype.handleAutoSignIn=function(e,t,n,r,i){this.autoSignInInitiated=!0;var o=new rD({Username:e,Password:t,ValidationData:n,ClientMetadata:r});i.userConfirmed?this.signInAfterUserConfirmed(o):"link"===this._config.signUpVerificationMethod?this.handleLinkAutoSignIn(o):this.handleCodeAutoSignIn(o)},e.prototype.handleCodeAutoSignIn=function(e){var t=this,n=function(r){"confirmSignUp"===r.payload.event&&t.signInAfterUserConfirmed(e,n)};nT.listen("auth",n)},e.prototype.handleLinkAutoSignIn=function(e){var t=this;this._storage.setItem("amplify-polling-started","true");var n=Date.now(),r=setInterval(function(){Date.now()-n>18e4?(clearInterval(r),iP("autoSignIn_failure",null,"Please confirm your account and use your credentials to sign in."),t._storage.removeItem("amplify-auto-sign-in")):t.signInAfterUserConfirmed(e,null,r)},5e3)},e.prototype.signInAfterUserConfirmed=function(e,t,n){return(0,et.__awaiter)(this,void 0,void 0,function(){var r,i,o=this;return(0,et.__generator)(this,function(s){switch(s.label){case 0:r=this.createCognitoUser(e.getUsername()),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.authenticateUser(e,this.authCallbacks(r,function(r){iP("autoSignIn",r,e.getUsername()+" has signed in successfully"),t&&nT.remove("auth",t),n&&(clearInterval(n),o._storage.removeItem("amplify-polling-started")),o._storage.removeItem("amplify-auto-sign-in")},function(e){iO.error(e),o._storage.removeItem("amplify-auto-sign-in")}))];case 2:return s.sent(),[3,4];case 3:return i=s.sent(),iO.error(i),[3,4];case 4:return[2]}})})},e.prototype.confirmSignUp=function(e,t,n){var r,i=this;if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(B.EmptyUsername);if(!t)return this.rejectAuthError(B.EmptyCode);var o=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?r=n.clientMetadata:this._config.clientMetadata&&(r=this._config.clientMetadata),new Promise(function(n,a){o.confirmRegistration(t,s,function(t,r){t?a(t):(iP("confirmSignUp",r,e+" has been confirmed successfully"),i.isTrueStorageValue("amplify-auto-sign-in")&&!i.autoSignInInitiated&&(iP("autoSignIn_failure",null,B.AutoSignInError),i._storage.removeItem("amplify-auto-sign-in")),n(r))},r)})},e.prototype.isTrueStorageValue=function(e){var t=this._storage.getItem(e);return!!t&&"true"===t},e.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(B.EmptyUsername);var n=this.createCognitoUser(e);return new Promise(function(e,r){n.resendConfirmationCode(function(t,n){t?r(t):e(n)},t)})},e.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,i=null,o={};if("string"==typeof e)r=e,i=t;else{if(!e.username)return this.rejectAuthError(B.InvalidUsername);void 0!==t&&iO.warn("The password should be defined under the first parameter object!"),r=e.username,i=e.password,o=e.validationData}if(!r)return this.rejectAuthError(B.EmptyUsername);var s=new rD({Username:r,Password:i,ValidationData:o,ClientMetadata:n});return i?this.signInWithPassword(s):this.signInWithoutPassword(s)},e.prototype.authCallbacks=function(e,t,n){var r=this,i=this;return{onSuccess:function(o){return(0,et.__awaiter)(r,void 0,void 0,function(){var r,s,a,c;return(0,et.__generator)(this,function(u){switch(u.label){case 0:iO.debug(o),delete e.challengeName,delete e.challengeParam,u.label=1;case 1:return u.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return u.sent(),[4,this.Credentials.set(o,"session")];case 3:return r=u.sent(),iO.debug("succeed to get cognito credentials",r),[3,9];case 4:return s=u.sent(),iO.debug("cannot get cognito credentials",s),[3,9];case 5:return u.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return a=u.sent(),i.user=a,iP("signIn",a,"A user "+e.getUsername()+" has been signed in"),t(a),[3,8];case 7:return c=u.sent(),iO.error("Failed to get the signed in user",c),n(c),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(t){iO.debug("signIn failure",t),iP("signIn_failure",t,e.getUsername()+" failed to signin"),n(t)},customChallenge:function(n){iO.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=n,t(e)},mfaRequired:function(n,r){iO.debug("signIn MFA required"),e.challengeName=n,e.challengeParam=r,t(e)},mfaSetup:function(n,r){iO.debug("signIn mfa setup",n),e.challengeName=n,e.challengeParam=r,t(e)},newPasswordRequired:function(n,r){iO.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:n,requiredAttributes:r},t(e)},totpRequired:function(n,r){iO.debug("signIn totpRequired"),e.challengeName=n,e.challengeParam=r,t(e)},selectMFAType:function(n,r){iO.debug("signIn selectMFAType",n),e.challengeName=n,e.challengeParam=r,t(e)}}},e.prototype.signInWithPassword=function(e){var t=this;if(this.pendingSignIn)throw Error("Pending sign-in attempt already in progress");var n=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise(function(r,i){n.authenticateUser(e,t.authCallbacks(n,function(e){t.pendingSignIn=null,r(e)},function(e){t.pendingSignIn=null,i(e)}))}),this.pendingSignIn},e.prototype.signInWithoutPassword=function(e){var t=this,n=this.createCognitoUser(e.getUsername());return n.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(r,i){n.initiateAuth(e,t.authCallbacks(n,r,i))})},e.prototype.getMFAOptions=function(e){return new Promise(function(t,n){e.getMFAOptions(function(e,r){if(e){iO.debug("get MFA Options failed",e),n(e);return}iO.debug("get MFA options success",r),t(r)})})},e.prototype.getPreferredMFA=function(e,t){var n=this,r=this;return new Promise(function(i,o){var s=n._config.clientMetadata,a=!!t&&t.bypassCache;e.getUserData(function(t,s){return(0,et.__awaiter)(n,void 0,void 0,function(){var n,a;return(0,et.__generator)(this,function(c){switch(c.label){case 0:if(!t)return[3,5];if(iO.debug("getting preferred mfa failed",t),!this.isSessionInvalid(t))return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return c.sent(),[3,4];case 3:return n=c.sent(),o(Error("Session is invalid due to: "+t.message+" and failed to clean up invalid session: "+n.message)),[2];case 4:return o(t),[2];case 5:if(!(a=r._getMfaTypeFromUserData(s)))return o("invalid MFA Type"),[2];return i(a),[2]}})})},{bypassCache:a,clientMetadata:s})})},e.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var r=e.UserMFASettingList;r?0===r.length?t="NOMFA":iO.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(e,t){var n=this;return new Promise(function(r,i){e.getUserData(function(t,o){return(0,et.__awaiter)(n,void 0,void 0,function(){var n;return(0,et.__generator)(this,function(s){switch(s.label){case 0:if(!t)return[3,5];if(iO.debug("getting user data failed",t),!this.isSessionInvalid(t))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return s.sent(),[3,4];case 3:return n=s.sent(),i(Error("Session is invalid due to: "+t.message+" and failed to clean up invalid session: "+n.message)),[2];case 4:return i(t),[2];case 5:r(o),s.label=6;case 6:return[2]}})})},t)})},e.prototype.setPreferredMFA=function(e,t){return(0,et.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,c=this;return(0,et.__generator)(this,function(u){switch(u.label){case 0:return n=this._config.clientMetadata,[4,this._getUserData(e,{bypassCache:!0,clientMetadata:n})];case 1:switch(r=u.sent(),i=null,o=null,t){case"TOTP":case"SOFTWARE_TOKEN_MFA":return[3,2];case"SMS":case"SMS_MFA":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return o={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return s=r.UserMFASettingList,[4,this._getMfaTypeFromUserData(r)];case 5:if("NOMFA"===(a=u.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===a)i={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==a)return[2,this.rejectAuthError(B.InvalidMFA)];o={PreferredMfa:!1,Enabled:!1}}return s&&0!==s.length&&s.forEach(function(e){"SMS_MFA"===e?i={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(o={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return iO.debug("no validmfa method provided"),[2,this.rejectAuthError(B.NoMFA)];case 7:return[2,new Promise(function(t,r){e.setUserMfaPreference(i,o,function(i,o){if(i)return iO.debug("Set user mfa preference error",i),r(i);iO.debug("Set user mfa success",o),iO.debug("Caching the latest user data into local"),e.getUserData(function(n,i){return(0,et.__awaiter)(c,void 0,void 0,function(){var i;return(0,et.__generator)(this,function(s){switch(s.label){case 0:if(!n)return[3,5];if(iO.debug("getting user data failed",n),!this.isSessionInvalid(n))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return s.sent(),[3,4];case 3:return i=s.sent(),r(Error("Session is invalid due to: "+n.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,r(n)];case 5:return[2,t(o)]}})})},{bypassCache:!0,clientMetadata:n})})})]}})})},e.prototype.disableSMS=function(e){return new Promise(function(t,n){e.disableMFA(function(e,r){if(e){iO.debug("disable mfa failed",e),n(e);return}iO.debug("disable mfa succeed",r),t(r)})})},e.prototype.enableSMS=function(e){return new Promise(function(t,n){e.enableMFA(function(e,r){if(e){iO.debug("enable mfa failed",e),n(e);return}iO.debug("enable mfa succeed",r),t(r)})})},e.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){iO.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){iO.debug("associateSoftwareToken success",e),t(e)}})})},e.prototype.verifyTotpToken=function(e,t){iO.debug("verification totp token",e,t),e&&"function"==typeof e.getSignInUserSession&&(n=e.getSignInUserSession());var n,r=null==n?void 0:n.isValid();return new Promise(function(n,i){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(e){iO.debug("verifyTotpToken failed",e),i(e)},onSuccess:function(t){r||iP("signIn",e,"A user "+e.getUsername()+" has been signed in"),iP("verify",e,"A user "+e.getUsername()+" has been verified"),iO.debug("verifyTotpToken success",t),n(t)}})})},e.prototype.confirmSignIn=function(e,t,n,r){var i=this;if(void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(B.EmptyCode);var o=this;return new Promise(function(s,a){e.sendMFACode(t,{onSuccess:function(t){return(0,et.__awaiter)(i,void 0,void 0,function(){var n,r,i,a;return(0,et.__generator)(this,function(c){switch(c.label){case 0:iO.debug(t),c.label=1;case 1:return c.trys.push([1,4,5,10]),[4,this.Credentials.clear()];case 2:return c.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=c.sent(),iO.debug("succeed to get cognito credentials",n),[3,10];case 4:return r=c.sent(),iO.debug("cannot get cognito credentials",r),[3,10];case 5:o.user=e,c.label=6;case 6:return c.trys.push([6,8,,9]),[4,this.currentUserPoolUser()];case 7:return i=c.sent(),e.attributes=i.attributes,[3,9];case 8:return a=c.sent(),iO.debug("cannot get updated Cognito User",a),[3,9];case 9:return iP("signIn",e,"A user "+e.getUsername()+" has been signed in"),s(e),[7];case 10:return[2]}})})},onFailure:function(e){iO.debug("confirm signIn failure",e),a(e)}},n,r)})},e.prototype.completeNewPassword=function(e,t,n,r){var i=this;if(void 0===n&&(n={}),void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(B.EmptyPassword);var o=this;return new Promise(function(s,a){e.completeNewPasswordChallenge(t,n,{onSuccess:function(t){return(0,et.__awaiter)(i,void 0,void 0,function(){var n,r;return(0,et.__generator)(this,function(i){switch(i.label){case 0:iO.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),iO.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=i.sent(),iO.debug("cannot get cognito credentials",r),[3,6];case 5:return o.user=e,iP("signIn",e,"A user "+e.getUsername()+" has been signed in"),s(e),[7];case 6:return[2]}})})},onFailure:function(e){iO.debug("completeNewPassword failure",e),iP("completeNewPassword_failure",e,i.user+" failed to complete the new password flow"),a(e)},mfaRequired:function(t,n){iO.debug("signIn MFA required"),e.challengeName=t,e.challengeParam=n,s(e)},mfaSetup:function(t,n){iO.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,s(e)},totpRequired:function(t,n){iO.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,s(e)}},r)})},e.prototype.sendCustomChallengeAnswer=function(e,t,n){var r=this;return(void 0===n&&(n=this._config.clientMetadata),this.userPool)?t?new Promise(function(i,o){e.sendCustomChallengeAnswer(t,r.authCallbacks(e,i,o),n)}):this.rejectAuthError(B.EmptyChallengeResponse):this.rejectNoUserPool()},e.prototype.deleteUserAttributes=function(e,t){var n=this;return new Promise(function(r,i){n.userSession(e).then(function(n){e.deleteAttributes(t,function(e,t){return e?i(e):r(t)})})})},e.prototype.deleteUser=function(){return(0,et.__awaiter)(this,void 0,void 0,function(){var e,t,n=this;return(0,et.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this._storageSync];case 1:return r.sent(),[3,3];case 2:throw e=r.sent(),iO.debug("Failed to sync cache info into memory",e),Error(e);case 3:return t=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(e,r){return(0,et.__awaiter)(n,void 0,void 0,function(){var n,i=this;return(0,et.__generator)(this,function(o){if(this.userPool){if(!(n=this.userPool.getCurrentUser()))return iO.debug("Failed to get user from user pool"),[2,r(Error("No current user."))];n.getSession(function(o,s){return(0,et.__awaiter)(i,void 0,void 0,function(){var i,s=this;return(0,et.__generator)(this,function(a){switch(a.label){case 0:if(!o)return[3,5];if(iO.debug("Failed to get the user session",o),!this.isSessionInvalid(o))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(n)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),r(Error("Session is invalid due to: "+o.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,r(o)];case 5:n.deleteUser(function(i,o){if(i)r(i);else{iP("userDeleted",o,"The authenticated user has been deleted."),n.signOut(),s.user=null;try{s.cleanCachedItems()}catch(e){iO.debug("failed to clear cached items")}t?s.oAuthSignOutRedirect(e,r):(iP("signOut",s.user,"A user has been signed out"),e(o))}}),a.label=6;case 6:return[2]}})})})}else iO.debug("no Congito User pool"),r(Error("Cognito User pool does not exist"));return[2]})})})]}})})},e.prototype.updateUserAttributes=function(e,t,n){var r=this;void 0===n&&(n=this._config.clientMetadata);var i=[],o=this;return new Promise(function(s,a){o.userSession(e).then(function(o){for(var c in t)if("sub"!==c&&0>c.indexOf("_verified")){var u={Name:c,Value:t[c]};i.push(u)}e.updateAttributes(i,function(e,n,i){return e?(iP("updateUserAttributes_failure",e,"Failed to update attributes"),a(e)):(iP("updateUserAttributes",r.createUpdateAttributesResultList(t,null==i?void 0:i.CodeDeliveryDetailsList),"Attributes successfully updated"),s(n))},n)})})},e.prototype.createUpdateAttributesResultList=function(e,t){var n={};return Object.keys(e).forEach(function(e){n[e]={isUpdated:!0};var r=null==t?void 0:t.find(function(t){return t.AttributeName===e});r&&(n[e].isUpdated=!1,n[e].codeDeliveryDetails=r)}),n},e.prototype.userAttributes=function(e){var t=this;return new Promise(function(n,r){t.userSession(e).then(function(t){e.getUserAttributes(function(e,t){e?r(e):n(t)})})})},e.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then(function(e){var n=t.attributesToObject(e),r={},i={};return n.email&&(n.email_verified?i.email=n.email:r.email=n.email),n.phone_number&&(n.phone_number_verified?i.phone_number=n.phone_number:r.phone_number=n.phone_number),{verified:i,unverified:r}})},e.prototype.isErrorWithMessage=function(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"message")},e.prototype.isTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&"Access Token has been revoked"===e.message},e.prototype.isRefreshTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&"Refresh Token has been revoked"===e.message},e.prototype.isUserDisabledError=function(e){return this.isErrorWithMessage(e)&&"User is disabled."===e.message},e.prototype.isUserDoesNotExistError=function(e){return this.isErrorWithMessage(e)&&"User does not exist."===e.message},e.prototype.isRefreshTokenExpiredError=function(e){return this.isErrorWithMessage(e)&&"Refresh Token has expired"===e.message},e.prototype.isPasswordResetRequiredError=function(e){return this.isErrorWithMessage(e)&&"Password reset required for the user"===e.message},e.prototype.isSignedInHostedUI=function(){return this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI")},e.prototype.isSessionInvalid=function(e){return this.isUserDisabledError(e)||this.isUserDoesNotExistError(e)||this.isTokenRevokedError(e)||this.isRefreshTokenRevokedError(e)||this.isRefreshTokenExpiredError(e)||this.isPasswordResetRequiredError(e)},e.prototype.cleanUpInvalidSession=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){var t=this;return(0,et.__generator)(this,function(n){switch(n.label){case 0:e.signOut(),this.user=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.cleanCachedItems()];case 2:return n.sent(),[3,4];case 3:return n.sent(),iO.debug("failed to clear cached items"),[3,4];case 4:if(this.isSignedInHostedUI())return[2,new Promise(function(e,n){t.oAuthSignOutRedirect(e,n)})];return iP("signOut",this.user,"A user has been signed out"),[2]}})})},e.prototype.currentUserPoolUser=function(e){var t=this;return this.userPool?new Promise(function(n,r){t._storageSync.then(function(){return(0,et.__awaiter)(t,void 0,void 0,function(){var t,i,o,s,a,c=this;return(0,et.__generator)(this,function(u){switch(u.label){case 0:if(!this.isOAuthInProgress())return[3,2];return iO.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(e){var t=setTimeout(function(){iO.debug("OAuth signIn in progress timeout"),nT.remove("auth",n),e()},1e4);function n(r){var i=r.payload.event;("cognitoHostedUI"===i||"cognitoHostedUI_failure"===i)&&(iO.debug("OAuth signIn resolved: "+i),clearTimeout(t),nT.remove("auth",n),e())}nT.listen("auth",n)})];case 1:u.sent(),u.label=2;case 2:if(!(t=this.userPool.getCurrentUser()))return iO.debug("Failed to get user from user pool"),r("No current user"),[2];u.label=3;case 3:return u.trys.push([3,7,,8]),[4,this._userSession(t)];case 4:if(i=u.sent(),!(o=!!e&&e.bypassCache))return[3,6];return[4,this.Credentials.clear()];case 5:u.sent(),u.label=6;case 6:if(s=this._config.clientMetadata,!(void 0===(a=i.getAccessToken().decodePayload().scope)?"":a).split(" ").includes(ik))return iO.debug("Unable to get the user data because the "+ik+" is not in the scopes of the access token"),[2,n(t)];return t.getUserData(function(e,i){return(0,et.__awaiter)(c,void 0,void 0,function(){var o,s,a,c,u,l;return(0,et.__generator)(this,function(f){switch(f.label){case 0:if(!e)return[3,7];if(iO.debug("getting user data failed",e),!this.isSessionInvalid(e))return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return f.sent(),[3,4];case 3:return o=f.sent(),r(Error("Session is invalid due to: "+e.message+" and failed to clean up invalid session: "+o.message)),[2];case 4:return r(e),[3,6];case 5:n(t),f.label=6;case 6:return[2];case 7:for(c=0,s=i.PreferredMfaSetting||"NOMFA",a=[];c<i.UserAttributes.length;c++)u={Name:i.UserAttributes[c].Name,Value:i.UserAttributes[c].Value},l=new r2(u),a.push(l);return Object.assign(t,{attributes:this.attributesToObject(a),preferredMFA:s}),[2,n(t)]}})})},{bypassCache:o,clientMetadata:s}),[3,8];case 7:return r(u.sent()),[3,8];case 8:return[2]}})})}).catch(function(e){return iO.debug("Failed to sync cache info into memory",e),r(e)})}):this.rejectNoUserPool()},e.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},e.prototype.currentAuthenticatedUser=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o;return(0,et.__generator)(this,function(s){switch(s.label){case 0:iO.debug("getting current authenticated user"),t=null,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._storageSync];case 2:return s.sent(),[3,4];case 3:throw n=s.sent(),iO.debug("Failed to sync cache info into memory",n),n;case 4:try{(r=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=(0,et.__assign)((0,et.__assign)({},r.user),{token:r.token}))}catch(e){iO.debug("cannot load federated user from auth storage")}if(!t)return[3,5];return this.user=t,iO.debug("get current authenticated federated user",this.user),[2,this.user];case 5:iO.debug("get current authenticated userpool user"),i=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return i=s.sent(),[3,9];case 8:return"No userPool"===(o=s.sent())&&iO.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),iO.debug("The user is not authenticated by the error",o),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=i,[2,this.user]}})})},e.prototype.currentSession=function(){var e=this;return(iO.debug("Getting current session"),this.userPool)?new Promise(function(t,n){e.currentUserPoolUser().then(function(r){e.userSession(r).then(function(e){t(e)}).catch(function(e){iO.debug("Failed to get the current session",e),n(e)})}).catch(function(e){iO.debug("Failed to get the current user",e),n(e)})}):Promise.reject(Error("No User Pool in the configuration."))},e.prototype._userSession=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){var t,n,r=this;return(0,et.__generator)(this,function(i){switch(i.label){case 0:if(!e)return iO.debug("the user is null"),[2,this.rejectAuthError(B.NoUserSession)];t=this._config.clientMetadata,0===this.inflightSessionPromiseCounter&&(this.inflightSessionPromise=new Promise(function(n,i){e.getSession(function(t,o){return(0,et.__awaiter)(r,void 0,void 0,function(){var r;return(0,et.__generator)(this,function(s){switch(s.label){case 0:if(!t)return[3,5];if(iO.debug("Failed to get the session from user",e),!this.isSessionInvalid(t))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return s.sent(),[3,4];case 3:return r=s.sent(),i(Error("Session is invalid due to: "+t.message+" and failed to clean up invalid session: "+r.message)),[2];case 4:return i(t),[2];case 5:return iO.debug("Succeed to get the user session",o),n(o),[2]}})})},{clientMetadata:t})})),this.inflightSessionPromiseCounter++,i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.inflightSessionPromise];case 2:return n=i.sent(),e.signInUserSession=n,[2,n];case 3:return this.inflightSessionPromiseCounter--,[7];case 4:return[2]}})})},e.prototype.userSession=function(e){return this._userSession(e)},e.prototype.currentUserCredentials=function(){return(0,et.__awaiter)(this,void 0,void 0,function(){var e,t,n=this;return(0,et.__generator)(this,function(r){switch(r.label){case 0:iO.debug("Getting current user credentials"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[3,4];case 3:throw e=r.sent(),iO.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){iO.debug("failed to get or parse item aws-amplify-federatedInfo",e)}if(t)return[2,this.Credentials.refreshFederatedToken(t)];return[2,this.currentSession().then(function(e){return iO.debug("getting session success",e),n.Credentials.set(e,"session")}).catch(function(){return iO.debug("getting guest credentials"),n.Credentials.set(null,"guest")})]}})})},e.prototype.currentCredentials=function(){return iO.debug("getting current credentials"),this.Credentials.get()},e.prototype.verifyUserAttribute=function(e,t,n){return void 0===n&&(n=this._config.clientMetadata),new Promise(function(r,i){e.getAttributeVerificationCode(t,{onSuccess:function(e){return r(e)},onFailure:function(e){return i(e)}},n)})},e.prototype.verifyUserAttributeSubmit=function(e,t,n){return n?new Promise(function(r,i){e.verifyAttribute(t,n,{onSuccess:function(e){r(e)},onFailure:function(e){i(e)}})}):this.rejectAuthError(B.EmptyCode)},e.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then(function(n){return t.verifyUserAttribute(n,e)})},e.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var n=this;return n.currentUserPoolUser().then(function(r){return n.verifyUserAttributeSubmit(r,e,t)})},e.prototype.cognitoIdentitySignOut=function(e,t){return(0,et.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return(0,et.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._storageSync];case 1:return o.sent(),[3,3];case 2:throw n=o.sent(),iO.debug("Failed to sync cache info into memory",n),n;case 3:return r=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,o){if(e&&e.global){iO.debug("user global sign out",t);var s=i._config.clientMetadata;t.getSession(function(e,s){return(0,et.__awaiter)(i,void 0,void 0,function(){var i,s=this;return(0,et.__generator)(this,function(a){switch(a.label){case 0:if(!e)return[3,5];if(iO.debug("failed to get the user session",e),!this.isSessionInvalid(e))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),o(Error("Session is invalid due to: "+e.message+" and failed to clean up invalid session: "+i.message)),[2];case 4:return[2,o(e)];case 5:return t.globalSignOut({onSuccess:function(e){if(iO.debug("global sign out success"),!r)return n();s.oAuthSignOutRedirect(n,o)},onFailure:function(e){return iO.debug("global sign out failed",e),o(e)}}),[2]}})})},{clientMetadata:s})}else iO.debug("user sign out",t),t.signOut(function(){if(!r)return n();i.oAuthSignOutRedirect(n,o)})})]}})})},e.prototype.oAuthSignOutRedirect=function(e,t){e7().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},e.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},e.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e(Error("Signout timeout fail"))},3e3)},e.prototype.signOut=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){var t;return(0,et.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return n.sent(),[3,3];case 2:return n.sent(),iO.debug("failed to clear cached items"),[3,3];case 3:if(!this.userPool)return[3,7];if(!(t=this.userPool.getCurrentUser()))return[3,5];return[4,this.cognitoIdentitySignOut(e,t)];case 4:return n.sent(),[3,6];case 5:iO.debug("no current Cognito user"),n.label=6;case 6:return[3,8];case 7:iO.debug("no Cognito User pool"),n.label=8;case 8:return iP("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},e.prototype.cleanCachedItems=function(){return(0,et.__awaiter)(this,void 0,void 0,function(){return(0,et.__generator)(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},e.prototype.changePassword=function(e,t,n,r){var i=this;return void 0===r&&(r=this._config.clientMetadata),new Promise(function(o,s){i.userSession(e).then(function(i){e.changePassword(t,n,function(e,t){return e?(iO.debug("change password failure",e),s(e)):o(t)},r)})})},e.prototype.forgotPassword=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(B.EmptyUsername);var n=this.createCognitoUser(e);return new Promise(function(r,i){n.forgotPassword({onSuccess:function(){r()},onFailure:function(t){iO.debug("forgot password failure",t),iP("forgotPassword_failure",t,e+" forgotPassword failed"),i(t)},inputVerificationCode:function(t){iP("forgotPassword",n,e+" has initiated forgot password flow"),r(t)}},t)})},e.prototype.forgotPasswordSubmit=function(e,t,n,r){if(void 0===r&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(B.EmptyUsername);if(!t)return this.rejectAuthError(B.EmptyCode);if(!n)return this.rejectAuthError(B.EmptyPassword);var i=this.createCognitoUser(e);return new Promise(function(o,s){i.confirmPassword(t,n,{onSuccess:function(t){iP("forgotPasswordSubmit",i,e+" forgotPasswordSubmit successful"),o(t)},onFailure:function(t){iP("forgotPasswordSubmit_failure",t,e+" forgotPasswordSubmit failed"),s(t)}},r)})},e.prototype.currentUserInfo=function(){return(0,et.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i,o,s;return(0,et.__generator)(this,function(a){switch(a.label){case 0:if(!(!(e=this.Credentials.getCredSource())||"aws"===e||"userPool"===e))return[3,9];return[4,this.currentUserPoolUser().catch(function(e){return iO.error(e)})];case 1:if(!(t=a.sent()))return[2,null];a.label=2;case 2:return a.trys.push([2,8,,9]),[4,this.userAttributes(t)];case 3:n=a.sent(),r=this.attributesToObject(n),i=null,a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return i=a.sent(),[3,7];case 6:return o=a.sent(),iO.debug("Failed to retrieve credentials while getting current user info",o),[3,7];case 7:return[2,{id:i?i.identityId:void 0,username:t.getUsername(),attributes:r}];case 8:return s=a.sent(),iO.error("currentUserInfo error",s),[2,{}];case 9:if("federated"===e)return[2,(t=this.user)||{}];return[2]}})})},e.prototype.federatedSignIn=function(e,t,n){return(0,et.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,c,u,l,f,h,d;return(0,et.__generator)(this,function(p){switch(p.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===e&&this._config.identityPoolId&&!this._config.userPoolId)throw Error("Federation with Identity Pools requires tokens passed as arguments");if(!(rE(e)||e&&["customProvider"].find(function(t){return e.hasOwnProperty(t)})||e&&["customState"].find(function(t){return e.hasOwnProperty(t)})||void 0===e))return[3,1];return i=rE(r=e||{provider:j.Cognito})?r.provider:r.customProvider,rE(r),o=r.customState,this._config.userPoolId&&(s=rI(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,a=rI(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,a,s,i,o)),[3,4];case 1:i=e;try{(c=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&iO.warn("There is already a signed in user: "+c+" in your app.\n																	You should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return u=t.token,l=t.identity_id,f=t.expires_at,[4,this.Credentials.set({provider:i,token:u,identity_id:l,user:n,expires_at:f},"federation")];case 2:return h=p.sent(),[4,this.currentAuthenticatedUser()];case 3:return iP("signIn",d=p.sent(),"A user "+d.username+" has been signed in"),iO.debug("federated sign in credentials",h),[2,h];case 4:return[2]}})})},e.prototype._handleAuthResponse=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c,u,l,f,h,d;return(0,et.__generator)(this,function(p){switch(p.label){case 0:if(this.oAuthFlowInProgress)return iO.debug("Skipping URL "+e+" current flow in progress"),[2];p.label=1;case 1:if(p.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw Error("OAuth responses require a User Pool defined in config");if(iP("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(e7().isBrowser?window.location.href:""),n=!!((0,nM.parse)(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){var t=(0,et.__read)(e,1)[0];return"code"===t||"error"===t}),r=!!((0,nM.parse)(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){var t=(0,et.__read)(e,1)[0];return"access_token"===t||"error"===t}),!(n||r))return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),p.label=2;case 2:return p.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:if(o=(i=p.sent()).accessToken,s=i.idToken,a=i.refreshToken,c=i.state,u=new rZ({IdToken:new rY({IdToken:s}),RefreshToken:new rQ({RefreshToken:a}),AccessToken:new rz({AccessToken:o})}),l=void 0,!this._config.identityPoolId)return[3,5];return[4,this.Credentials.set(u,"session")];case 4:l=p.sent(),iO.debug("AWS credentials",l),p.label=5;case 5:return f=/-/.test(c),(h=this.createCognitoUser(u.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(u),window&&void 0!==window.history&&window.history.replaceState(window.history.state,"",this._config.oauth.redirectSignIn),iP("signIn",h,"A user "+h.getUsername()+" has been signed in"),iP("cognitoHostedUI",h,"A user "+h.getUsername()+" has been signed in via Cognito Hosted UI"),f&&iP("customOAuthState",c.split("-").splice(1).join("-").match(/.{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""),"State for user "+h.getUsername()),[2,l];case 6:return d=p.sent(),iO.debug("Error in cognito hosted auth response",d),window&&void 0!==window.history&&window.history.replaceState(window.history.state,"",this._config.oauth.redirectSignIn),iP("signIn_failure",d,"The OAuth response flow failed"),iP("cognitoHostedUI_failure",d,"A failure occurred when returning to the Cognito Hosted UI"),iP("customState_failure",d,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},e.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e.prototype.attributesToObject=function(e){var t=this,n={};return e&&e.map(function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?n[e.Name]=t.isTruthyString(e.Value)||!0===e.Value:n[e.Name]=e.Value}),n},e.prototype.isTruthyString=function(e){return"function"==typeof e.toLowerCase&&"true"===e.toLowerCase()},e.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new r8(t);return n&&r.setAuthenticationFlowType(n),r},e.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},e.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?B.NoConfig:B.MissingAuthConfig},e.prototype.rejectAuthError=function(e){return Promise.reject(new iT(e))},e.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new iA(e))},e.prototype.rememberDevice=function(){return(0,et.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,et.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),iO.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){e.setDeviceStatusRemembered({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new iT(B.DeviceConfig)):"NetworkError"===e.code?n(new iT(B.NetworkError)):n(e)}})})]}})})},e.prototype.forgetDevice=function(){return(0,et.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,et.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),iO.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){e.forgetDevice({onSuccess:function(e){t(e)},onFailure:function(e){"InvalidParameterException"===e.code?n(new iT(B.DeviceConfig)):"NetworkError"===e.code?n(new iT(B.NetworkError)):n(e)}})})]}})})},e.prototype.fetchDevices=function(){return(0,et.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,et.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=n.sent(),[3,3];case 2:throw t=n.sent(),iO.debug("The user is not authenticated by the error",t),Error("The user is not authenticated");case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(t,n){e.listDevices(60,null,{onSuccess:function(e){t(e.Devices.map(function(e){var t=e.DeviceAttributes.find(function(e){return"device_name"===e.Name})||{};return{id:e.DeviceKey,name:t.Value}}))},onFailure:function(e){"InvalidParameterException"===e.code?n(new iT(B.DeviceConfig)):"NetworkError"===e.code?n(new iT(B.NetworkError)):n(e)}})})]}})})},e}())(null);er.d.register(iD);var iU=new en.k("AbstractPubSubProvider"),iR=function(){function e(e){this._config=e}return e.prototype.configure=function(e){return this._config=(0,et.__assign)((0,et.__assign)({},e),this._config),iU.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(e.prototype,"options",{get:function(){return(0,et.__assign)({},this._config)},enumerable:!0,configurable:!0}),e}();(g=z||(z={})).CONNECTION_CLOSED="Connection closed",g.CONNECTION_FAILED="Connection failed",g.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",g.SUBSCRIPTION_ACK="Subscription ack",g.TIMEOUT_DISCONNECT="Timeout disconnect",(y=J||(J={})).Connected="Connected",y.ConnectedPendingNetwork="ConnectedPendingNetwork",y.ConnectionDisrupted="ConnectionDisrupted",y.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",y.Connecting="Connecting",y.ConnectedPendingDisconnect="ConnectedPendingDisconnect",y.Disconnected="Disconnected",y.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive";var ix=[400,401,403];(v=Y||(Y={})).GQL_CONNECTION_INIT="connection_init",v.GQL_CONNECTION_ERROR="connection_error",v.GQL_CONNECTION_ACK="connection_ack",v.GQL_START="start",v.GQL_START_ACK="start_ack",v.GQL_DATA="data",v.GQL_CONNECTION_KEEP_ALIVE="ka",v.GQL_STOP="stop",v.GQL_COMPLETE="complete",v.GQL_ERROR="error",(m=Q||(Q={}))[m.PENDING=0]="PENDING",m[m.CONNECTED=1]="CONNECTED",m[m.FAILED=2]="FAILED",(b=X||(X={}))[b.CLOSED=0]="CLOSED",b[b.READY=1]="READY",b[b.CONNECTING=2]="CONNECTING";var iF="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",iM={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},iL=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ij=function(){function e(){}return e.prototype.networkMonitor=function(t){if(e7().isNode)return nF.from([{online:!0}]);var n=e8()?self:window;return new nF(function(t){t.next({online:n.navigator.onLine});var r=function(){return t.next({online:!0})},i=function(){return t.next({online:!1})};return n.addEventListener("online",r),n.addEventListener("offline",i),e._observers.push(t),function(){n.removeEventListener("online",r),n.removeEventListener("offline",i),e._observers=e._observers.filter(function(e){return e!==t})}})},e._observerOverride=function(t){var n,r,i=function(n){if(n.closed)return e._observers=e._observers.filter(function(e){return e!==n}),"continue";n.next(t)};try{for(var o=iL(e._observers),s=o.next();!s.done;s=o.next()){var a=s.value;i(a)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e._observers=[],e}(),iB=function(){return new ij().networkMonitor()},iK={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}},iV=function(){function e(){var e=this;this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=iB().subscribe(function(t){var n,r=t.online;e.record(r?iK.ONLINE:iK.OFFLINE),null===(n=e._initialNetworkStateSubscription)||void 0===n||n.unsubscribe()}),this._linkedConnectionStateObservable=new nF(function(t){t.next(e._linkedConnectionState),e._linkedConnectionStateObserver=t})}return e.prototype.enableNetworkMonitoring=function(){var e,t=this;null===(e=this._initialNetworkStateSubscription)||void 0===e||e.unsubscribe(),void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=iB().subscribe(function(e){var n=e.online;t.record(n?iK.ONLINE:iK.OFFLINE)}))},e.prototype.disableNetworkMonitoring=function(){var e;null===(e=this._networkMonitoringSubscription)||void 0===e||e.unsubscribe(),this._networkMonitoringSubscription=void 0},Object.defineProperty(e.prototype,"connectionStateObservable",{get:function(){var e,t=this;return this._linkedConnectionStateObservable.map(function(e){return t.connectionStatesTranslator(e)}).filter(function(t){var n=t!==e;return e=t,n})},enumerable:!0,configurable:!0}),e.prototype.record=function(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();var t=(0,et.__assign)((0,et.__assign)({},this._linkedConnectionState),e);this._linkedConnectionState=(0,et.__assign)({},t),this._linkedConnectionStateObserver.next(this._linkedConnectionState)},e.prototype.connectionStatesTranslator=function(e){var t=e.connectionState,n=e.networkState,r=e.intendedConnectionState,i=e.keepAliveState;return"connected"===t&&"disconnected"===n?J.ConnectedPendingNetwork:"connected"===t&&"disconnected"===r?J.ConnectedPendingDisconnect:"disconnected"===t&&"connected"===r&&"disconnected"===n?J.ConnectionDisruptedPendingNetwork:"disconnected"===t&&"connected"===r?J.ConnectionDisrupted:"connected"===t&&"unhealthy"===i?J.ConnectedPendingKeepAlive:"connecting"===t?J.Connecting:"disconnected"===t?J.Disconnected:J.Connected},e}();(_=Z||(Z={})).START_RECONNECT="START_RECONNECT",_.HALT_RECONNECT="HALT_RECONNECT";var iq=function(){function e(){this.reconnectObservers=[]}return e.prototype.addObserver=function(e){this.reconnectObservers.push(e)},e.prototype.record=function(e){var t=this;e===Z.START_RECONNECT&&void 0===this.reconnectSetTimeoutId&&void 0===this.reconnectIntervalId&&(this.reconnectSetTimeoutId=setTimeout(function(){t._triggerReconnect(),t.reconnectIntervalId=setInterval(function(){t._triggerReconnect()},6e4)},5e3)),e===Z.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))},e.prototype.close=function(){this.reconnectObservers.forEach(function(e){var t;null===(t=e.complete)||void 0===t||t.call(e)})},e.prototype._triggerReconnect=function(){this.reconnectObservers.forEach(function(e){var t;null===(t=e.next)||void 0===t||t.call(e)})},e}(),iG=new en.k("AWSAppSyncRealTimeProvider"),iW=function(e,t,n){nT.dispatch("api",{event:e,data:t,message:n},"PubSub",iF)},iH=/^https:\/\/\w{26}\.appsync\-api\.\w{2}(?:(?:\-\w{2,})+)\-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,iz=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.socketStatus=X.CLOSED,n.keepAliveTimeout=3e5,n.subscriptionObserverMap=new Map,n.promiseArray=[],n.connectionStateMonitor=new iV,n.reconnectionMonitor=new iq,n.connectionStateMonitorSubscription=n.connectionStateMonitor.connectionStateObservable.subscribe(function(e){iW("ConnectionStateChange",{provider:n,connectionState:e},"Connection state is "+e),n.connectionState=e,e===J.ConnectionDisrupted&&n.reconnectionMonitor.record(Z.START_RECONNECT),[J.Connected,J.ConnectedPendingDisconnect,J.ConnectedPendingKeepAlive,J.ConnectedPendingNetwork,J.ConnectionDisruptedPendingNetwork,J.Disconnected].includes(e)&&n.reconnectionMonitor.record(Z.HALT_RECONNECT)}),n}return(0,et.__extends)(t,e),t.prototype.close=function(){this.socketStatus=X.CLOSED,this.connectionStateMonitor.record(iK.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close()},t.prototype.getNewWebSocket=function(e,t){return new WebSocket(e,t)},t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw Error("Not used here")},t.prototype.publish=function(e,t,n){return(0,et.__awaiter)(this,void 0,void 0,function(){return(0,et.__generator)(this,function(e){throw Error("Operation not supported")})})},t.prototype.isCustomDomain=function(e){return null===e.match(iH)},t.prototype.subscribe=function(e,t,n){var r=this,i=null==t?void 0:t.appSyncGraphqlEndpoint;return new nF(function(e){if(t&&i){var o,s=!1,a=(0,nL.v4)(),c=function(){s||(s=!0,r._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:a,customUserAgentDetails:n}).catch(function(e){iG.debug(z.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+e),r.connectionStateMonitor.record(iK.CLOSED)}).finally(function(){s=!1}))};return o=new nF(function(e){r.reconnectionMonitor.addObserver(e)}).subscribe(function(){c()}),c(),function(){return(0,et.__awaiter)(r,void 0,void 0,function(){var e,t;return(0,et.__generator)(this,function(n){switch(n.label){case 0:null==o||o.unsubscribe(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this._waitForSubscriptionToBeConnected(a)];case 2:if(n.sent(),!(e=(this.subscriptionObserverMap.get(a)||{}).subscriptionState))return[2];if(e===Q.CONNECTED)this._sendUnsubscriptionMessage(a);else throw Error("Subscription never connected");return[3,5];case 3:return t=n.sent(),iG.debug("Error while unsubscribing "+t),[3,5];case 4:return this._removeSubscriptionObserver(a),[7];case 5:return[2]}})})}}e.error({errors:[(0,et.__assign)({},new e_("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()})},Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var t,n=e.options,r=e.observer,i=e.subscriptionId,o=e.customUserAgentDetails;return(0,et.__awaiter)(this,void 0,void 0,function(){var e,s,a,c,u,l,f,h,d,p,g,y,v,m,b,_,S,w,E,I,T,A,C=this;return(0,et.__generator)(this,function(O){switch(O.label){case 0:return e=n.appSyncGraphqlEndpoint,s=n.authenticationType,a=n.query,c=n.variables,u=n.apiKey,l=n.region,h=void 0===(f=n.graphql_headers)?function(){return{}}:f,p=void 0===(d=n.additionalHeaders)?{}:d,g=Q.PENDING,y={query:a,variables:c},this.subscriptionObserverMap.set(i,{observer:r,query:null!=a?a:"",variables:null!=c?c:{},subscriptionState:g,startAckTimeoutId:void 0}),v=JSON.stringify(y),b=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:u,appSyncGraphqlEndpoint:e,authenticationType:s,payload:v,canonicalUri:"",region:l,additionalHeaders:p})];case 1:return _=[et.__assign.apply(void 0,b.concat([O.sent()]))],[4,h()];case 2:m=et.__assign.apply(void 0,[et.__assign.apply(void 0,[et.__assign.apply(void 0,_.concat([O.sent()])),p]),((A={})[nR]=ni(o),A)]),S=JSON.stringify({id:i,payload:{data:v,extensions:{authorization:(0,et.__assign)({},m)}},type:Y.GQL_START}),O.label=3;case 3:return O.trys.push([3,5,,6]),this.connectionStateMonitor.record(iK.OPENING_CONNECTION),[4,this._initializeWebSocketConnection({apiKey:u,appSyncGraphqlEndpoint:e,authenticationType:s,region:l,additionalHeaders:p})];case 4:return O.sent(),[3,6];case 5:return w=O.sent(),this._logStartSubscriptionError(i,r,w),[2];case 6:return I=(E=null!==(t=this.subscriptionObserverMap.get(i))&&void 0!==t?t:{}).subscriptionFailedCallback,T=E.subscriptionReadyCallback,this.subscriptionObserverMap.set(i,{observer:r,subscriptionState:g,query:null!=a?a:"",variables:null!=c?c:{},subscriptionReadyCallback:T,subscriptionFailedCallback:I,startAckTimeoutId:setTimeout(function(){C._timeoutStartSubscriptionAck.call(C,i)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(S),[2]}})})},t.prototype._logStartSubscriptionError=function(e,t,n){iG.debug({err:n});var r,i=String(null!==(r=n.message)&&void 0!==r?r:"");if(Promise.resolve(this.connectionStateMonitor.record(iK.CLOSED)),this.connectionState!==J.ConnectionDisruptedPendingNetwork){tu(n)?t.error({errors:[(0,et.__assign)({},new e_(z.CONNECTION_FAILED+": "+i))]}):iG.debug(z.CONNECTION_FAILED+": "+i);var o=(this.subscriptionObserverMap.get(e)||{}).subscriptionFailedCallback;"function"==typeof o&&o()}},t.prototype._waitForSubscriptionToBeConnected=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,et.__generator)(this,function(r){return(t=this.subscriptionObserverMap.get(e))&&t.subscriptionState===Q.PENDING?[2,new Promise(function(r,i){var o=t.observer,s=t.subscriptionState,a=t.variables,c=t.query;n.subscriptionObserverMap.set(e,{observer:o,subscriptionState:s,variables:a,query:c,subscriptionReadyCallback:r,subscriptionFailedCallback:i})})]:[2]})})},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===X.READY){var t={id:e,type:Y.GQL_STOP},n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){iG.debug({err:e})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket){this.socketStatus=X.CLOSED;return}if(this.connectionStateMonitor.record(iK.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{iG.debug("closing WebSocket..."),this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId);var e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=X.CLOSED,this.connectionStateMonitor.record(iK.CLOSED)}}},t.prototype._handleIncomingSubscriptionMessage=function(e){var t=this;if("string"==typeof e.data){iG.debug("subscription message from AWS AppSync RealTime: "+e.data);var n=JSON.parse(String(e.data)),r=n.id,i=void 0===r?"":r,o=n.payload,s=n.type,a=this.subscriptionObserverMap.get(i)||{},c=a.observer,u=void 0===c?null:c,l=a.query,f=void 0===l?"":l,h=a.variables,d=void 0===h?{}:h,p=a.startAckTimeoutId,g=a.subscriptionReadyCallback,y=a.subscriptionFailedCallback;if(iG.debug({id:i,observer:u,query:f,variables:d}),s===Y.GQL_DATA&&o&&o.data){u?u.next(o):iG.debug("observer not found for id: "+i);return}if(s===Y.GQL_START_ACK){iG.debug("subscription ready for "+JSON.stringify({query:f,variables:d})),"function"==typeof g&&g(),p&&clearTimeout(p),iW(z.SUBSCRIPTION_ACK,{query:f,variables:d},"Connection established for subscription");var v=Q.CONNECTED;u&&this.subscriptionObserverMap.set(i,{observer:u,query:f,variables:d,startAckTimeoutId:void 0,subscriptionState:v,subscriptionReadyCallback:g,subscriptionFailedCallback:y}),this.connectionStateMonitor.record(iK.CONNECTION_ESTABLISHED);return}if(s===Y.GQL_CONNECTION_KEEP_ALIVE){this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId),this.keepAliveTimeoutId=setTimeout(function(){return t._errorDisconnect(z.TIMEOUT_DISCONNECT)},this.keepAliveTimeout),this.keepAliveAlertTimeoutId=setTimeout(function(){t.connectionStateMonitor.record(iK.KEEP_ALIVE_MISSED)},65e3),this.connectionStateMonitor.record(iK.KEEP_ALIVE);return}if(s===Y.GQL_ERROR){var v=Q.FAILED;u&&(this.subscriptionObserverMap.set(i,{observer:u,query:f,variables:d,startAckTimeoutId:p,subscriptionReadyCallback:g,subscriptionFailedCallback:y,subscriptionState:v}),iG.debug(z.CONNECTION_FAILED+": "+JSON.stringify(o)),u.error({errors:[(0,et.__assign)({},new e_(z.CONNECTION_FAILED+": "+JSON.stringify(o)))]}),p&&clearTimeout(p),"function"==typeof y&&y())}}},t.prototype._errorDisconnect=function(e){iG.debug("Disconnect error: "+e),this.awsRealTimeSocket&&(this.connectionStateMonitor.record(iK.CLOSED),this.awsRealTimeSocket.close()),this.socketStatus=X.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e);if(t){var n=t.observer,r=t.query,i=t.variables;if(!n)return;this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:Q.FAILED}),this.connectionStateMonitor.record(iK.CLOSED),iG.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i}))}},t.prototype._initializeWebSocketConnection=function(e){var t=this,n=e.appSyncGraphqlEndpoint,r=e.authenticationType,i=e.apiKey,o=e.region,s=e.additionalHeaders;if(this.socketStatus!==X.READY)return new Promise(function(e,a){return(0,et.__awaiter)(t,void 0,void 0,function(){var t,c,u,l,f,h,d,p,g;return(0,et.__generator)(this,function(y){switch(y.label){case 0:if(this.promiseArray.push({res:e,rej:a}),this.socketStatus!==X.CLOSED)return[3,5];y.label=1;case 1:return y.trys.push([1,4,,5]),this.socketStatus=X.CONNECTING,t="{}",[4,this._awsRealTimeHeaderBasedAuth({authenticationType:r,payload:t,canonicalUri:"/connect",apiKey:i,appSyncGraphqlEndpoint:n,region:o,additionalHeaders:s})];case 2:return u=(c=y.sent())?JSON.stringify(c):"",l=nj.lW.from(u).toString("base64"),f=nj.lW.from(t).toString("base64"),h=null!=n?n:"",h=this.isCustomDomain(h)?h.concat("/realtime"):h.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),d=this.isSSLEnabled?"wss://":"ws://",p=(h=h.replace("https://",d).replace("http://",d))+"?header="+l+"&payload="+f,[4,this._initializeRetryableHandshake(p)];case 3:return y.sent(),this.promiseArray.forEach(function(e){var t=e.res;iG.debug("Notifying connection successful"),t()}),this.socketStatus=X.READY,this.promiseArray=[],[3,5];case 4:return g=y.sent(),iG.debug("Connection exited with",g),this.promiseArray.forEach(function(e){return(0,e.rej)(g)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=X.CLOSED,[3,5];case 5:return[2]}})})})},t.prototype._initializeRetryableHandshake=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){return(0,et.__generator)(this,function(t){switch(t.label){case 0:return iG.debug("Initializaling retryable Handshake"),[4,tf(this._initializeHandshake.bind(this),[e],5e3)];case 1:return t.sent(),[2]}})})},t.prototype._initializeHandshake=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){var t,n,r,i=this;return(0,et.__generator)(this,function(o){switch(o.label){case 0:iG.debug("Initializing handshake "+e),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,new Promise(function(t,n){var r=i.getNewWebSocket(e,"graphql-ws");r.onerror=function(){iG.debug("WebSocket connection error")},r.onclose=function(){n(Error("Connection handshake error"))},r.onopen=function(){return i.awsRealTimeSocket=r,t()}})];case 2:return o.sent(),[4,new Promise(function(e,t){if(i.awsRealTimeSocket){var n=!1;i.awsRealTimeSocket.onerror=function(e){iG.debug("WebSocket error "+JSON.stringify(e))},i.awsRealTimeSocket.onclose=function(e){iG.debug("WebSocket closed "+e.reason),t(Error(JSON.stringify(e)))},i.awsRealTimeSocket.onmessage=function(r){if("string"==typeof r.data){iG.debug("subscription message from AWS AppSyncRealTime: "+r.data+" ");var o=JSON.parse(r.data),s=o.type,a=o.payload,c=(void 0===a?{}:a).connectionTimeoutMs;if(s===Y.GQL_CONNECTION_ACK){n=!0,i.awsRealTimeSocket&&(i.keepAliveTimeout=void 0===c?3e5:c,i.awsRealTimeSocket.onmessage=i._handleIncomingSubscriptionMessage.bind(i),i.awsRealTimeSocket.onerror=function(e){iG.debug(e),i._errorDisconnect(z.CONNECTION_CLOSED)},i.awsRealTimeSocket.onclose=function(e){iG.debug("WebSocket closed "+e.reason),i._errorDisconnect(z.CONNECTION_CLOSED)}),e("Cool, connected to AWS AppSyncRealTime");return}if(s===Y.GQL_CONNECTION_ERROR){var u=o.payload,l=(void 0===u?{}:u).errors,f=(0,et.__read)(void 0===l?[]:l,1)[0],h=void 0===f?{}:f,d=h.errorType,p=h.errorCode;t({errorType:void 0===d?"":d,errorCode:void 0===p?0:p})}}};var r={type:Y.GQL_CONNECTION_INIT};i.awsRealTimeSocket.send(JSON.stringify(r));var o=function(e){e||(i.connectionStateMonitor.record(iK.CONNECTION_FAILED),t(Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))};setTimeout(function(){return o(n)},15e3)}})];case 3:return o.sent(),[3,5];case 4:if(n=(t=o.sent()).errorType,r=t.errorCode,ix.includes(r))throw new tc(n);if(n)throw Error(n);throw t;case 5:return[2]}})})},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var t=e.authenticationType,n=e.payload,r=e.canonicalUri,i=e.appSyncGraphqlEndpoint,o=e.apiKey,s=e.region,a=e.additionalHeaders;return(0,et.__awaiter)(this,void 0,void 0,function(){var e,c,u;return(0,et.__generator)(this,function(l){switch(l.label){case 0:if(e={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this),AWS_LAMBDA:this._customAuthHeader},!(!t||!e[t]))return[3,1];return iG.debug("Authentication type "+t+" not supported"),[2,void 0];case 1:return c=e[t],u=nM.parse(null!=i?i:"").host,iG.debug("Authenticating with "+t),[4,c({payload:n,canonicalUri:r,appSyncGraphqlEndpoint:i,apiKey:o,region:s,host:u,additionalHeaders:a})];case 2:return[2,l.sent()]}})})},t.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return(0,et.__awaiter)(this,void 0,void 0,function(){return(0,et.__generator)(this,function(e){switch(e.label){case 0:return[4,iD.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},t.prototype._awsRealTimeOPENIDHeader=function(e){var t=e.host;return(0,et.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,et.__generator)(this,function(i){switch(i.label){case 0:return[4,rw.getItem("federatedInfo")];case 1:if(!(n=i.sent()))return[3,2];return e=n.token,[3,4];case 2:return[4,iD.currentAuthenticatedUser()];case 3:(r=i.sent())&&(e=r.token),i.label=4;case 4:if(!e)throw Error("No federated jwt");return[2,{Authorization:e,host:t}]}})})},t.prototype._awsRealTimeApiKeyHeader=function(e){var t=e.apiKey,n=e.host;return(0,et.__awaiter)(this,void 0,void 0,function(){return(0,et.__generator)(this,function(e){return[2,{host:n,"x-amz-date":new Date().toISOString().replace(/[:\-]|\.\d{3}/g,""),"x-api-key":t}]})})},t.prototype._awsRealTimeIAMHeader=function(e){var t=e.payload,n=e.canonicalUri,r=e.appSyncGraphqlEndpoint,i=e.region;return(0,et.__awaiter)(this,void 0,void 0,function(){var e,o,s;return(0,et.__generator)(this,function(a){switch(a.label){case 0:return e={region:i,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!a.sent())throw Error("No credentials");return[4,nD.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return o=a.sent(),s={url:""+r+n,data:t,method:"POST",headers:(0,et.__assign)({},iM)},[2,rl.sign(s,o,e).headers]}})})},t.prototype._customAuthHeader=function(e){var t=e.host,n=e.additionalHeaders;if(!n||!n.Authorization)throw Error("No auth token specified");return{Authorization:n.Authorization,host:t}},t.prototype._ensureCredentials=function(){return nD.get().then(function(e){if(!e)return!1;var t=nD.shear(e);return iG.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0}).catch(function(e){return iG.warn("ensure credentials error",e),!1})},t}(iR),iJ=e7().isNode,iY=new en.k("PubSub"),iQ=new(function(){function e(e){this._options=null!=e?e:{},iY.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(e.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new iz(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),e.prototype.getModuleName=function(){return"InternalPubSub"},e.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return iY.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},e.prototype.addPluggable=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){return(0,et.__generator)(this,function(t){return e&&"PubSub"===e.getCategory()?(this._pluggables.push(e),[2,e.configure(this._options)]):[2]})})},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter(function(t){return t.getProviderName()!==e})},e.prototype.getProviderByName=function(e){return e===nU?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(t){return t.getProviderName()===e})},e.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw Error("Could not find provider named "+String(t));return[n]},e.prototype.publish=function(e,t,n){return(0,et.__awaiter)(this,void 0,void 0,function(){return(0,et.__generator)(this,function(r){return[2,Promise.all(this.getProviders(n).map(function(r){return r.publish(e,t,n)}))]})})},e.prototype.subscribe=function(e,t,n){if(iJ&&this._options&&this._options.ssr)throw Error("Subscriptions are not supported for Server-Side Rendering (SSR)");iY.debug("subscribe options",t);var r=this.getProviders(t),i=(0,et.__assign)({category:A.PubSub,action:x.Subscribe},n);return new nF(function(n){var o=r.map(function(n){return{provider:n,observable:n.subscribe(e,t,i)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return o.forEach(function(e){return e.unsubscribe()})}})},e}());function iX(e,t){return function(){return e.apply(t,arguments)}}er.d.register(iQ),(S=$||($={})).NO_API_KEY="No api-key configured",S.NO_CURRENT_USER="No current user",S.NO_CREDENTIALS="No credentials",S.NO_FEDERATED_JWT="No federated jwt",S.NO_AUTH_TOKEN="No auth token specified";let{toString:iZ}=Object.prototype,{getPrototypeOf:i$}=Object,i0=(w=Object.create(null),e=>{let t=iZ.call(e);return w[t]||(w[t]=t.slice(8,-1).toLowerCase())}),i1=e=>(e=e.toLowerCase(),t=>i0(t)===e),i2=e=>t=>typeof t===e,{isArray:i3}=Array,i4=i2("undefined"),i5=i1("ArrayBuffer"),i6=i2("string"),i8=i2("function"),i7=i2("number"),i9=e=>null!==e&&"object"==typeof e,oe=e=>{if("object"!==i0(e))return!1;let t=i$(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ot=i1("Date"),on=i1("File"),or=i1("Blob"),oi=i1("FileList"),oo=e=>i9(e)&&i8(e.pipe),os=e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||i8(e.append)&&("formdata"===(t=i0(e))||"object"===t&&i8(e.toString)&&"[object FormData]"===e.toString()))},oa=i1("URLSearchParams"),oc=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ou(e,t,{allOwnKeys:n=!1}={}){let r,i;if(null!=e){if("object"!=typeof e&&(e=[e]),i3(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{let i;let o=n?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;for(r=0;r<s;r++)i=o[r],t.call(null,e[i],i,e)}}}function ol(e,t){let n;t=t.toLowerCase();let r=Object.keys(e),i=r.length;for(;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}let of="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,oh=e=>!i4(e)&&e!==of,od=(e,t,n,{allOwnKeys:r}={})=>(ou(t,(t,r)=>{n&&i8(t)?e[r]=iX(t,n):e[r]=t},{allOwnKeys:r}),e),op=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),og=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},oy=(e,t,n,r)=>{let i,o,s;let a={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)s=i[o],(!r||r(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=!1!==n&&i$(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},ov=(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;let r=e.indexOf(t,n);return -1!==r&&r===n},om=e=>{if(!e)return null;if(i3(e))return e;let t=e.length;if(!i7(t))return null;let n=Array(t);for(;t-- >0;)n[t]=e[t];return n},ob=(E="undefined"!=typeof Uint8Array&&i$(Uint8Array),e=>E&&e instanceof E),o_=(e,t)=>{let n;let r=e&&e[Symbol.iterator],i=r.call(e);for(;(n=i.next())&&!n.done;){let r=n.value;t.call(e,r[0],r[1])}},oS=(e,t)=>{let n;let r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},ow=i1("HTMLFormElement"),oE=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),oI=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),oT=i1("RegExp"),oA=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e),r={};ou(n,(n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)}),Object.defineProperties(e,r)},oC=e=>{oA(e,(t,n)=>{if(i8(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;let r=e[n];if(i8(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},oO=(e,t)=>{let n={};return(e=>{e.forEach(e=>{n[e]=!0})})(i3(e)?e:String(e).split(t)),n},ok=()=>{},oN=(e,t)=>Number.isFinite(e=+e)?e:t,oP="abcdefghijklmnopqrstuvwxyz",oD="0123456789",oU={DIGIT:oD,ALPHA:oP,ALPHA_DIGIT:oP+oP.toUpperCase()+oD},oR=(e=16,t=oU.ALPHA_DIGIT)=>{let n="",{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},ox=e=>{let t=Array(10),n=(e,r)=>{if(i9(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;let i=i3(e)?[]:{};return ou(e,(e,t)=>{let o=n(e,r+1);i4(o)||(i[t]=o)}),t[r]=void 0,i}}return e};return n(e,0)},oF=i1("AsyncFunction"),oM=e=>e&&(i9(e)||i8(e))&&i8(e.then)&&i8(e.catch);var oL={isArray:i3,isArrayBuffer:i5,isBuffer:function(e){return null!==e&&!i4(e)&&null!==e.constructor&&!i4(e.constructor)&&i8(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:os,isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&i5(e.buffer)},isString:i6,isNumber:i7,isBoolean:e=>!0===e||!1===e,isObject:i9,isPlainObject:oe,isUndefined:i4,isDate:ot,isFile:on,isBlob:or,isRegExp:oT,isFunction:i8,isStream:oo,isURLSearchParams:oa,isTypedArray:ob,isFileList:oi,forEach:ou,merge:function e(){let{caseless:t}=oh(this)&&this||{},n={},r=(r,i)=>{let o=t&&ol(n,i)||i;oe(n[o])&&oe(r)?n[o]=e(n[o],r):oe(r)?n[o]=e({},r):i3(r)?n[o]=r.slice():n[o]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&ou(arguments[e],r);return n},extend:od,trim:oc,stripBOM:op,inherits:og,toFlatObject:oy,kindOf:i0,kindOfTest:i1,endsWith:ov,toArray:om,forEachEntry:o_,matchAll:oS,isHTMLForm:ow,hasOwnProperty:oI,hasOwnProp:oI,reduceDescriptors:oA,freezeMethods:oC,toObjectSet:oO,toCamelCase:oE,noop:ok,toFiniteNumber:oN,findKey:ol,global:of,isContextDefined:oh,ALPHABET:oU,generateString:oR,isSpecCompliantForm:function(e){return!!(e&&i8(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:ox,isAsyncFn:oF,isThenable:oM};function oj(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}oL.inherits(oj,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oL.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});let oB=oj.prototype,oK={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{oK[e]={value:e}}),Object.defineProperties(oj,oK),Object.defineProperty(oB,"isAxiosError",{value:!0}),oj.from=(e,t,n,r,i,o)=>{let s=Object.create(oB);return oL.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),oj.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};var oV=n(6379).lW;function oq(e){return oL.isPlainObject(e)||oL.isArray(e)}function oG(e){return oL.endsWith(e,"[]")?e.slice(0,-2):e}function oW(e,t,n){return e?e.concat(t).map(function(e,t){return e=oG(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}let oH=oL.toFlatObject(oL,{},null,function(e){return/^is[A-Z]/.test(e)});var oz=function(e,t,n){if(!oL.isObject(e))throw TypeError("target must be an object");t=t||new FormData,n=oL.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!oL.isUndefined(t[e])});let r=n.metaTokens,i=n.visitor||l,o=n.dots,s=n.indexes,a=n.Blob||"undefined"!=typeof Blob&&Blob,c=a&&oL.isSpecCompliantForm(t);if(!oL.isFunction(i))throw TypeError("visitor must be a function");function u(e){if(null===e)return"";if(oL.isDate(e))return e.toISOString();if(!c&&oL.isBlob(e))throw new oj("Blob is not supported. Use a Buffer instead.");return oL.isArrayBuffer(e)||oL.isTypedArray(e)?c&&"function"==typeof Blob?new Blob([e]):oV.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"==typeof e){if(oL.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else{var c;if(oL.isArray(e)&&(c=e,oL.isArray(c)&&!c.some(oq))||(oL.isFileList(e)||oL.endsWith(n,"[]"))&&(a=oL.toArray(e)))return n=oG(n),a.forEach(function(e,r){oL.isUndefined(e)||null===e||t.append(!0===s?oW([n],r,o):null===s?n:n+"[]",u(e))}),!1}}return!!oq(e)||(t.append(oW(i,n,o),u(e)),!1)}let f=[],h=Object.assign(oH,{defaultVisitor:l,convertValue:u,isVisitable:oq});if(!oL.isObject(e))throw TypeError("data must be an object");return!function e(n,r){if(!oL.isUndefined(n)){if(-1!==f.indexOf(n))throw Error("Circular reference detected in "+r.join("."));f.push(n),oL.forEach(n,function(n,o){let s=!(oL.isUndefined(n)||null===n)&&i.call(t,n,oL.isString(o)?o.trim():o,r,h);!0===s&&e(n,r?r.concat(o):[o])}),f.pop()}}(e),t};function oJ(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\x00"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function oY(e,t){this._pairs=[],e&&oz(e,this,t)}let oQ=oY.prototype;function oX(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function oZ(e,t,n){let r;if(!t)return e;let i=n&&n.encode||oX,o=n&&n.serialize;if(r=o?o(t,n):oL.isURLSearchParams(t)?t.toString():new oY(t,n).toString(i)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}oQ.append=function(e,t){this._pairs.push([e,t])},oQ.toString=function(e){let t=e?function(t){return e.call(this,t,oJ)}:oJ;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};var o$=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oL.forEach(this.handlers,function(t){null!==t&&e(t)})}},o0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},o1="undefined"!=typeof URLSearchParams?URLSearchParams:oY,o2="undefined"!=typeof FormData?FormData:null,o3="undefined"!=typeof Blob?Blob:null;let o4="undefined"!=typeof window&&"undefined"!=typeof document,o5=(I="undefined"!=typeof navigator&&navigator.product,o4&&0>["ReactNative","NativeScript","NS"].indexOf(I)),o6="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var o8={...ee,isBrowser:!0,classes:{URLSearchParams:o1,FormData:o2,Blob:o3},protocols:["http","https","file","blob","url","data"]},o7=function(e){if(oL.isFormData(e)&&oL.isFunction(e.entries)){let t={};return oL.forEachEntry(e,(e,n)=>{!function e(t,n,r,i){let o=t[i++];if("__proto__"===o)return!0;let s=Number.isFinite(+o),a=i>=t.length;if(o=!o&&oL.isArray(r)?r.length:o,a)return oL.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&oL.isObject(r[o])||(r[o]=[]);let c=e(t,n,r[o],i);return c&&oL.isArray(r[o])&&(r[o]=function(e){let t,n;let r={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)r[n=i[t]]=e[n];return r}(r[o])),!s}(oL.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),n,t,0)}),t}return null};let o9={transitional:o0,adapter:["xhr","http"],transformRequest:[function(e,t){let n;let r=t.getContentType()||"",i=r.indexOf("application/json")>-1,o=oL.isObject(e);o&&oL.isHTMLForm(e)&&(e=new FormData(e));let s=oL.isFormData(e);if(s)return i?JSON.stringify(o7(e)):e;if(oL.isArrayBuffer(e)||oL.isBuffer(e)||oL.isStream(e)||oL.isFile(e)||oL.isBlob(e))return e;if(oL.isArrayBufferView(e))return e.buffer;if(oL.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1){var a,c;return(a=e,c=this.formSerializer,oz(a,new o8.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return o8.isNode&&oL.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},c))).toString()}if((n=oL.isFileList(e))||r.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return oz(n?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),function(e,t,n){if(oL.isString(e))try{return(0,JSON.parse)(e),oL.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){let t=this.transitional||o9.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&oL.isString(e)&&(n&&!this.responseType||r)){let n=t&&t.silentJSONParsing;try{return JSON.parse(e)}catch(e){if(!n&&r){if("SyntaxError"===e.name)throw oj.from(e,oj.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:o8.classes.FormData,Blob:o8.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oL.forEach(["delete","get","head","post","put","patch"],e=>{o9.headers[e]={}});let se=oL.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var st=e=>{let t,n,r;let i={};return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&se[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)}),i};let sn=Symbol("internals");function sr(e){return e&&String(e).trim().toLowerCase()}function si(e){return!1===e||null==e?e:oL.isArray(e)?e.map(si):String(e)}let so=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ss(e,t,n,r,i){if(oL.isFunction(r))return r.call(this,t,n);if(i&&(t=n),oL.isString(t)){if(oL.isString(r))return -1!==t.indexOf(r);if(oL.isRegExp(r))return r.test(t)}}class sa{constructor(e){e&&this.set(e)}set(e,t,n){let r=this;function i(e,t,n){let i=sr(t);if(!i)throw Error("header name must be a non-empty string");let o=oL.findKey(r,i);o&&void 0!==r[o]&&!0!==n&&(void 0!==n||!1===r[o])||(r[o||t]=si(e))}let o=(e,t)=>oL.forEach(e,(e,n)=>i(e,n,t));return oL.isPlainObject(e)||e instanceof this.constructor?o(e,t):oL.isString(e)&&(e=e.trim())&&!so(e)?o(st(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=sr(e)){let n=oL.findKey(this,e);if(n){let e=this[n];if(!t)return e;if(!0===t)return function(e){let t;let n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=r.exec(e);)n[t[1]]=t[2];return n}(e);if(oL.isFunction(t))return t.call(this,e,n);if(oL.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=sr(e)){let n=oL.findKey(this,e);return!!(n&&void 0!==this[n]&&(!t||ss(this,this[n],n,t)))}return!1}delete(e,t){let n=this,r=!1;function i(e){if(e=sr(e)){let i=oL.findKey(n,e);i&&(!t||ss(n,n[i],i,t))&&(delete n[i],r=!0)}}return oL.isArray(e)?e.forEach(i):i(e),r}clear(e){let t=Object.keys(this),n=t.length,r=!1;for(;n--;){let i=t[n];(!e||ss(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){let t=this,n={};return oL.forEach(this,(r,i)=>{let o=oL.findKey(n,i);if(o){t[o]=si(r),delete t[i];return}let s=e?i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n):String(i).trim();s!==i&&delete t[i],t[s]=si(r),n[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return oL.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&oL.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){let t=this[sn]=this[sn]={accessors:{}},n=t.accessors,r=this.prototype;function i(e){let t=sr(e);n[t]||(!function(e,t){let n=oL.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(r,e),n[t]=!0)}return oL.isArray(e)?e.forEach(i):i(e),this}}function sc(e,t){let n=this||o9,r=t||n,i=sa.from(r.headers),o=r.data;return oL.forEach(e,function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function su(e){return!!(e&&e.__CANCEL__)}function sl(e,t,n){oj.call(this,null==e?"canceled":e,oj.ERR_CANCELED,t,n),this.name="CanceledError"}sa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),oL.reduceDescriptors(sa.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),oL.freezeMethods(sa),oL.inherits(sl,oj,{__CANCEL__:!0});var sf=o8.hasStandardBrowserEnv?{write(e,t,n,r,i,o){let s=[e+"="+encodeURIComponent(t)];oL.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),oL.isString(r)&&s.push("path="+r),oL.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){let t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function sh(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}var sd=o8.hasStandardBrowserEnv?function(){let e;let t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){let r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){let n=oL.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},sp=function(e,t){let n;e=e||10;let r=Array(e),i=Array(e),o=0,s=0;return t=void 0!==t?t:1e3,function(a){let c=Date.now(),u=i[s];n||(n=c),r[o]=a,i[o]=c;let l=s,f=0;for(;l!==o;)f+=r[l++],l%=e;if((o=(o+1)%e)===s&&(s=(s+1)%e),c-n<t)return;let h=u&&c-u;return h?Math.round(1e3*f/h):void 0}};function sg(e,t){let n=0,r=sp(50,250);return i=>{let o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,c=r(a);n=o;let u={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:i};u[t?"download":"upload"]=!0,e(u)}}let sy="undefined"!=typeof XMLHttpRequest;var sv=sy&&function(e){return new Promise(function(t,n){let r,i,o=e.data,s=sa.from(e.headers).normalize(),{responseType:a,withXSRFToken:c}=e;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}if(oL.isFormData(o)){if(o8.hasStandardBrowserEnv||o8.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if(!1!==(i=s.getContentType())){let[e,...t]=i?i.split(";").map(e=>e.trim()).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}}let l=new XMLHttpRequest;if(e.auth){let t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(t+":"+n))}let f=sh(e.baseURL,e.url);function h(){if(!l)return;let r=sa.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),i=a&&"text"!==a&&"json"!==a?l.response:l.responseText,o={data:i,status:l.status,statusText:l.statusText,headers:r,config:e,request:l};!function(e,t,n){let r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new oj("Request failed with status code "+n.status,[oj.ERR_BAD_REQUEST,oj.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}(function(e){t(e),u()},function(e){n(e),u()},o),l=null}if(l.open(e.method.toUpperCase(),oZ(f,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=h:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(h)},l.onabort=function(){l&&(n(new oj("Request aborted",oj.ECONNABORTED,e,l)),l=null)},l.onerror=function(){n(new oj("Network Error",oj.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||o0;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new oj(t,r.clarifyTimeoutError?oj.ETIMEDOUT:oj.ECONNABORTED,e,l)),l=null},o8.hasStandardBrowserEnv&&(c&&oL.isFunction(c)&&(c=c(e)),c||!1!==c&&sd(f))){let t=e.xsrfHeaderName&&e.xsrfCookieName&&sf.read(e.xsrfCookieName);t&&s.set(e.xsrfHeaderName,t)}void 0===o&&s.setContentType(null),"setRequestHeader"in l&&oL.forEach(s.toJSON(),function(e,t){l.setRequestHeader(t,e)}),oL.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&"json"!==a&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",sg(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",sg(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=t=>{l&&(n(!t||t.type?new sl(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));let d=function(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);if(d&&-1===o8.protocols.indexOf(d)){n(new oj("Unsupported protocol "+d+":",oj.ERR_BAD_REQUEST,e));return}l.send(o||null)})};let sm={http:null,xhr:sv};oL.forEach(sm,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let sb=e=>`- ${e}`,s_=e=>oL.isFunction(e)||null===e||!1===e;var sS={getAdapter:e=>{let t,n;e=oL.isArray(e)?e:[e];let{length:r}=e,i={};for(let o=0;o<r;o++){let r;if(n=t=e[o],!s_(t)&&void 0===(n=sm[(r=String(t)).toLowerCase()]))throw new oj(`Unknown adapter '${r}'`);if(n)break;i[r||"#"+o]=n}if(!n){let e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")),t=r?e.length>1?"since :\n"+e.map(sb).join("\n"):" "+sb(e[0]):"as no adapter specified";throw new oj("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return n},adapters:sm};function sw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sl(null,e)}function sE(e){sw(e),e.headers=sa.from(e.headers),e.data=sc.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);let t=sS.getAdapter(e.adapter||o9.adapter);return t(e).then(function(t){return sw(e),t.data=sc.call(e,e.transformResponse,t),t.headers=sa.from(t.headers),t},function(t){return!su(t)&&(sw(e),t&&t.response&&(t.response.data=sc.call(e,e.transformResponse,t.response),t.response.headers=sa.from(t.response.headers))),Promise.reject(t)})}let sI=e=>e instanceof sa?e.toJSON():e;function sT(e,t){t=t||{};let n={};function r(e,t,n){return oL.isPlainObject(e)&&oL.isPlainObject(t)?oL.merge.call({caseless:n},e,t):oL.isPlainObject(t)?oL.merge({},t):oL.isArray(t)?t.slice():t}function i(e,t,n){return oL.isUndefined(t)?oL.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!oL.isUndefined(t))return r(void 0,t)}function s(e,t){return oL.isUndefined(t)?oL.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}let c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(sI(e),sI(t),!0)};return oL.forEach(Object.keys(Object.assign({},e,t)),function(r){let o=c[r]||i,s=o(e[r],t[r],r);oL.isUndefined(s)&&o!==a||(n[r]=s)}),n}let sA="1.6.7",sC={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{sC[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});let sO={};sC.transitional=function(e,t,n){function r(e,t){return"[Axios v"+sA+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new oj(r(i," has been removed"+(t?" in "+t:"")),oj.ERR_DEPRECATED);return t&&!sO[i]&&(sO[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var sk={assertOptions:function(e,t,n){if("object"!=typeof e)throw new oj("options must be an object",oj.ERR_BAD_OPTION_VALUE);let r=Object.keys(e),i=r.length;for(;i-- >0;){let o=r[i],s=t[o];if(s){let t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new oj("option "+o+" must be "+n,oj.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new oj("Unknown option "+o,oj.ERR_BAD_OPTION)}},validators:sC};let sN=sk.validators;class sP{constructor(e){this.defaults=e,this.interceptors={request:new o$,response:new o$}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=Error();let n=t.stack?t.stack.replace(/^.+\n/,""):"";e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}throw e}}_request(e,t){let n,r;"string"==typeof e?(t=t||{}).url=e:t=e||{},t=sT(this.defaults,t);let{transitional:i,paramsSerializer:o,headers:s}=t;void 0!==i&&sk.assertOptions(i,{silentJSONParsing:sN.transitional(sN.boolean),forcedJSONParsing:sN.transitional(sN.boolean),clarifyTimeoutError:sN.transitional(sN.boolean)},!1),null!=o&&(oL.isFunction(o)?t.paramsSerializer={serialize:o}:sk.assertOptions(o,{encode:sN.function,serialize:sN.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&oL.merge(s.common,s[t.method]);s&&oL.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=sa.concat(a,s);let c=[],u=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(u=u&&e.synchronous,c.unshift(e.fulfilled,e.rejected))});let l=[];this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let f=0;if(!u){let e=[sE.bind(this),void 0];for(e.unshift.apply(e,c),e.push.apply(e,l),r=e.length,n=Promise.resolve(t);f<r;)n=n.then(e[f++],e[f++]);return n}r=c.length;let h=t;for(f=0;f<r;){let e=c[f++],t=c[f++];try{h=e(h)}catch(e){t.call(this,e);break}}try{n=sE.call(this,h)}catch(e){return Promise.reject(e)}for(f=0,r=l.length;f<r;)n=n.then(l[f++],l[f++]);return n}getUri(e){e=sT(this.defaults,e);let t=sh(e.baseURL,e.url);return oZ(t,e.params,e.paramsSerializer)}}oL.forEach(["delete","get","head","options"],function(e){sP.prototype[e]=function(t,n){return this.request(sT(n||{},{method:e,url:t,data:(n||{}).data}))}}),oL.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(sT(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}sP.prototype[e]=t(),sP.prototype[e+"Form"]=t(!0)});class sD{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});let n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;let r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new sl(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;let t=new sD(function(t){e=t});return{token:t,cancel:e}}}let sU={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sU).forEach(([e,t])=>{sU[t]=e});let sR=function e(t){let n=new sP(t),r=iX(sP.prototype.request,n);return oL.extend(r,sP.prototype,n,{allOwnKeys:!0}),oL.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(sT(t,n))},r}(o9);sR.Axios=sP,sR.CanceledError=sl,sR.CancelToken=sD,sR.isCancel=su,sR.VERSION=sA,sR.toFormData=oz,sR.AxiosError=oj,sR.Cancel=sR.CanceledError,sR.all=function(e){return Promise.all(e)},sR.spread=function(e){return function(t){return e.apply(null,t)}},sR.isAxiosError=function(e){return oL.isObject(e)&&!0===e.isAxiosError},sR.mergeConfig=sT,sR.AxiosHeaders=sa,sR.formToJSON=e=>o7(oL.isHTMLForm(e)?new FormData(e):e),sR.getAdapter=sS.getAdapter,sR.HttpStatusCode=sU,sR.default=sR;var sx=new en.k("RestClient"),sF=function(){function e(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=nD,this._options=e,sx.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return e.prototype.ajax=function(e,t,n){return(0,et.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,c,u,l,f,h,d,p,g,y,v,m,b,_,S,w,E,I;return(0,et.__generator)(this,function(T){switch(T.label){case 0:if(sx.debug(t,e),o="us-east-1",s="execute-api",a=void 0,"string"==typeof e?(r=this._parseUrl(e),i=e):(i=e.endpoint,a=e.custom_header,o=e.region,s=e.service,r=this._parseUrl(e.endpoint)),c={method:t,url:i,host:r.host,path:r.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},u={},f=(l=Object.assign({},n)).response,l.body&&("function"==typeof FormData&&l.body instanceof FormData?(u["Content-Type"]="multipart/form-data",c.data=l.body):(u["Content-Type"]="application/json; charset=UTF-8",c.data=JSON.stringify(l.body))),l.responseType&&(c.responseType=l.responseType),l.withCredentials&&(c.withCredentials=l.withCredentials),l.timeout&&(c.timeout=l.timeout),l.cancellableToken&&(c.cancelToken=l.cancellableToken.token),c.signerServiceInfo=l.signerServiceInfo,"function"!=typeof a)return[3,2];return[4,a()];case 1:return d=T.sent(),[3,3];case 2:d=void 0,T.label=3;case 3:if(h=d,c.headers=(0,et.__assign)((0,et.__assign)((0,et.__assign)({},u),h),l.headers),(p=(0,nM.parse)(i,!0,!0)).search,g=(0,et.__rest)(p,["search"]),c.url=(0,nM.format)((0,et.__assign)((0,et.__assign)({},g),{query:(0,et.__assign)((0,et.__assign)({},g.query),l.queryStringParameters||{})})),void 0!==c.headers.Authorization)return c.headers=Object.keys(c.headers).reduce(function(e,t){return c.headers[t]&&(e[t]=c.headers[t]),e},{}),[2,this._request(c,f)];T.label=4;case 4:return T.trys.push([4,6,,7]),[4,this.Credentials.get()];case 5:return y=T.sent(),[3,7];case 6:return T.sent(),sx.debug("No credentials available, the request will be unsigned"),[2,this._request(c,f)];case 7:return T.trys.push([7,9,,10]),[4,sR(v=this._sign((0,et.__assign)({},c),y,{region:o,service:s}))];case 8:return m=T.sent(),[2,f?m:m.data];case 9:if(b=T.sent(),sx.debug(b),nK.isClockSkewError(b)&&(S=(_=b.response.headers)&&(_.date||_.Date),w=new Date(S),E=nK.getDateFromHeaderString(v.headers["x-amz-date"]),nK.isClockSkewed(w)))return I=E.getTime()-nK.getClockOffset(),nK.setClockOffset(w.getTime()-I),[2,this.ajax(e,t,n)];throw b;case 10:return[2]}})})},e.prototype.get=function(e,t){return this.ajax(e,"GET",t)},e.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},e.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},e.prototype.post=function(e,t){return this.ajax(e,"POST",t)},e.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},e.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},e.prototype.cancel=function(e,t){var n=this._cancelTokenMap.get(e);return!!n&&(n.cancel(t),!0)},e.prototype.hasCancelToken=function(e){return this._cancelTokenMap.has(e)},e.prototype.isCancel=function(e){return sR.isCancel(e)},e.prototype.getCancellableToken=function(){return sR.CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},e.prototype.endpoint=function(e){var t=this,n=this._options.endpoints,r="";return Array.isArray(n)&&n.forEach(function(n){n.name===e&&(r=n.endpoint,"string"==typeof n.region?t._region=n.region:"string"==typeof t._options.region&&(t._region=t._options.region),"string"==typeof n.service?t._service=n.service||"execute-api":t._service="execute-api","function"==typeof n.custom_header?t._custom_header=n.custom_header:t._custom_header=void 0)}),r},e.prototype._sign=function(e,t,n){var r=n.service,i=n.region,o=e.signerServiceInfo,s=(0,et.__rest)(e,["signerServiceInfo"]),a=i||this._region||this._options.region,c=r||this._service||this._options.service,u={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},l=Object.assign({region:a,service:c},o),f=rl.sign(s,u,l);return f.data&&(f.body=f.data),sx.debug("Signed Request: ",f),delete f.headers.host,f},e.prototype._request=function(e,t){return void 0===t&&(t=!1),sR(e).then(function(e){return t?e:e.data}).catch(function(e){throw sx.debug(e),e})},e.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},e}(),sM=new en.k("GraphQLAPI"),sL=function(){function e(e){this._api=null,this.Auth=iD,this.Cache=rw,this.Credentials=nD,this._options=e,sM.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"InternalGraphQLAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=(0,et.__rest)(t,["API"]),i=(0,et.__assign)((0,et.__assign)({},r),void 0===n?{}:n);return sM.debug("configure GraphQL API",{opt:i}),i.aws_project_region&&(i=Object.assign({},i,{region:i.aws_project_region,header:{}})),void 0!==i.graphql_headers&&"function"!=typeof i.graphql_headers&&(sM.warn("graphql_headers should be a function"),i.graphql_headers=void 0),this._options=Object.assign({},this._options,i),this.createInstance(),this._options},e.prototype.createInstance=function(){return(sM.debug("create Rest instance"),this._options)?(this._api=new sF(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},e.prototype._headerBasedAuth=function(e,t){return void 0===t&&(t={}),(0,et.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,c;return(0,et.__generator)(this,function(u){switch(u.label){case 0:switch(r=(n=this._options).aws_appsync_authenticationType,i=n.aws_appsync_apiKey,o={},e||r||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11];case"AWS_LAMBDA":return[3,15]}return[3,16];case 1:if(!i)throw Error($.NO_API_KEY);return o={Authorization:null,"X-Api-Key":i},[3,17];case 2:return[4,this._ensureCredentials()];case 3:if(!u.sent())throw Error($.NO_CREDENTIALS);return[3,17];case 4:return u.trys.push([4,9,,10]),s=void 0,[4,rw.getItem("federatedInfo")];case 5:if(!(a=u.sent()))return[3,6];return s=a.token,[3,8];case 6:return[4,iD.currentAuthenticatedUser()];case 7:(c=u.sent())&&(s=c.token),u.label=8;case 8:if(!s)throw Error($.NO_FEDERATED_JWT);return o={Authorization:s},[3,10];case 9:case 13:throw u.sent(),Error($.NO_CURRENT_USER);case 10:case 14:return[3,17];case 11:return u.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return o={Authorization:u.sent().getAccessToken().getJwtToken()},[3,14];case 15:if(!t.Authorization)throw Error($.NO_AUTH_TOKEN);return o={Authorization:t.Authorization},[3,17];case 16:return o={Authorization:null},[3,17];case 17:return[2,o]}})})},e.prototype.getGraphqlOperationType=function(e){var t=eK(e).definitions;return(0,et.__read)(t,1)[0].operation},e.prototype.graphql=function(e,t,n){var r=e.query,i=e.variables,o=void 0===i?{}:i,s=e.authMode,a=e.authToken,c="string"==typeof r?eK(r):eK(ez(r)),u=(0,et.__read)(c.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0],l=(void 0===u?{}:u).operation,f=t||{};switch(a&&(f.Authorization=a),l){case"query":case"mutation":this.createInstanceIfNotCreated();var h=this._api.getCancellableToken(),d={cancellableToken:h,withCredentials:this._options.withCredentials},p=this._graphql({query:c,variables:o,authMode:s},f,d,n);return this._api.updateRequestToBeCancellable(p,h),p;case"subscription":return this._graphqlSubscribe({query:c,variables:o,authMode:s},f,n);default:throw Error("invalid operation type: ".concat(l))}},e.prototype._graphql=function(e,t,n,r){var i=e.query,o=e.variables,s=e.authMode;return void 0===t&&(t={}),void 0===n&&(n={}),(0,et.__awaiter)(this,void 0,void 0,function(){var e,a,c,u,l,f,h,d,p,g,y,v,m,b,_,S,w,E,I;return(0,et.__generator)(this,function(T){switch(T.label){case 0:if(this.createInstanceIfNotCreated(),a=(e=this._options).aws_appsync_region,c=e.aws_appsync_graphqlEndpoint,l=void 0===(u=e.graphql_headers)?function(){return{}}:u,f=e.graphql_endpoint,h=e.graphql_endpoint_iam_region,d=[{}],!(p=!f))return[3,2];return[4,this._headerBasedAuth(s,t)];case 1:p=T.sent(),T.label=2;case 2:if(g=[et.__assign.apply(void 0,d.concat([p]))],!(y=f))return[3,6];if(!h)return[3,4];return[4,this._headerBasedAuth(s,t)];case 3:return v=T.sent(),[3,5];case 4:v={Authorization:null},T.label=5;case 5:y=v,T.label=6;case 6:return m=[et.__assign.apply(void 0,g.concat([y]))],[4,l({query:i,variables:o})];case 7:if(b=Object.assign({headers:et.__assign.apply(void 0,[et.__assign.apply(void 0,[et.__assign.apply(void 0,m.concat([T.sent()])),t]),!f&&((I={})["x-amz-user-agent"]=ni(r),I)]),body:{query:ez(i),variables:o},signerServiceInfo:{service:f?"execute-api":"appsync",region:f?h:a}},n),!(_=f||c))throw{data:{},errors:[new e_("No graphql endpoint provided.")]};T.label=8;case 8:return T.trys.push([8,10,,11]),[4,this._api.post(_,b)];case 9:return S=T.sent(),[3,11];case 10:if(w=T.sent(),this._api.isCancel(w))throw w;return S={data:{},errors:[new e_(w.message,null,null,null,null,w)]},[3,11];case 11:if((E=S.errors)&&E.length)throw S;return[2,S]}})})},e.prototype.createInstanceIfNotCreated=function(){return(0,et.__awaiter)(this,void 0,void 0,function(){return(0,et.__generator)(this,function(e){switch(e.label){case 0:if(this._api)return[3,2];return[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},e.prototype._graphqlSubscribe=function(e,t,n){var r=e.query,i=e.variables,o=e.authMode,s=e.authToken;void 0===t&&(t={});var a=this._options,c=a.aws_appsync_region,u=a.aws_appsync_graphqlEndpoint,l=a.aws_appsync_authenticationType,f=a.aws_appsync_apiKey,h=a.graphql_headers;if(iQ&&"function"==typeof iQ.subscribe)return iQ.subscribe("",{provider:nU,appSyncGraphqlEndpoint:u,authenticationType:o||l||"AWS_IAM",apiKey:f,query:ez(r),region:c,variables:i,graphql_headers:void 0===h?function(){return{}}:h,additionalHeaders:t,authToken:s},n);throw sM.debug("No pubsub module applied for subscription"),Error("No pubsub module applied for subscription")},e.prototype._ensureCredentials=function(){var e=this;return this.Credentials.get().then(function(t){if(!t)return!1;var n=e.Credentials.shear(t);return sM.debug("set credentials for api",n),!0}).catch(function(e){return sM.warn("ensure credentials error",e),!1})},e}(),sj=new sL(null);er.d.register(sj);var sB=new en.k("RestAPI"),sK=function(){function e(e){this._api=null,this.Credentials=nD,this._options=e,sB.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"RestAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=(0,et.__rest)(t,["API"]),i=(0,et.__assign)((0,et.__assign)({},r),void 0===n?{}:n);if(sB.debug("configure Rest API",{opt:i}),i.aws_project_region){if(i.aws_cloud_logic_custom){var o=i.aws_cloud_logic_custom;i.endpoints="string"==typeof o?JSON.parse(o):o}i=Object.assign({},i,{region:i.aws_project_region,header:{}})}return Array.isArray(i.endpoints)?i.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(sB.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?i.endpoints=this._options.endpoints:i.endpoints=[],this._options=Object.assign({},this._options,i),this.createInstance(),this._options},e.prototype.createInstance=function(){return sB.debug("create Rest API instance"),this._api=new sF(this._options),this._api.Credentials=this.Credentials,!0},e.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.get(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.post(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.put(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.del(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.head(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},e.prototype.endpoint=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){return(0,et.__generator)(this,function(t){return[2,this._api.endpoint(e)]})})},e.prototype.getEndpointInfo=function(e,t){var n=this._options.endpoints;if(!Array.isArray(n))throw Error("API category not configured");var r=n.find(function(t){return t.name===e});if(!r)throw Error("API ".concat(e," does not exist"));var i={endpoint:r.endpoint+t};return"string"==typeof r.region?i.region=r.region:"string"==typeof this._options.region&&(i.region=this._options.region),"string"==typeof r.service?i.service=r.service||"execute-api":i.service="execute-api","function"==typeof r.custom_header?i.custom_header=r.custom_header:i.custom_header=void 0,i},e}(),sV=new sK(null);er.d.register(sV);var sq=new en.k("API"),sG=function(){function e(e){this.Auth=iD,this.Cache=rw,this.Credentials=nD,this._options=e,this._restApi=new sK(e),this._graphqlApi=new sL(e),sq.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"InternalAPI"},e.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return(0,et.__assign)((0,et.__assign)({},t),n)},e.prototype.get=function(e,t,n){return this._restApi.get(e,t,this.getInitWithCustomUserAgentDetails(n,O.Get))},e.prototype.post=function(e,t,n){return this._restApi.post(e,t,this.getInitWithCustomUserAgentDetails(n,O.Post))},e.prototype.put=function(e,t,n){return this._restApi.put(e,t,this.getInitWithCustomUserAgentDetails(n,O.Put))},e.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,this.getInitWithCustomUserAgentDetails(n,O.Patch))},e.prototype.del=function(e,t,n){return this._restApi.del(e,t,this.getInitWithCustomUserAgentDetails(n,O.Del))},e.prototype.head=function(e,t,n){return this._restApi.head(e,t,this.getInitWithCustomUserAgentDetails(n,O.Head))},e.prototype.isCancel=function(e){return this._restApi.isCancel(e)},e.prototype.cancel=function(e,t){return this._restApi.hasCancelToken(e)?this._restApi.cancel(e,t):!!this._graphqlApi.hasCancelToken(e)&&this._graphqlApi.cancel(e,t)},e.prototype.getInitWithCustomUserAgentDetails=function(e,t){var n={category:A.API,action:t};return(0,et.__assign)((0,et.__assign)({},e),{customUserAgentDetails:n})},e.prototype.endpoint=function(e){return(0,et.__awaiter)(this,void 0,void 0,function(){return(0,et.__generator)(this,function(t){return[2,this._restApi.endpoint(e)]})})},e.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},e.prototype.graphql=function(e,t,n){var r=(0,et.__assign)({category:A.API,action:O.GraphQl},n);return this._graphqlApi.graphql(e,t,r)},e}(),sW=new sG(null);er.d.register(sW),new en.k("API");var sH=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,et.__extends)(t,e),t.prototype.getModuleName=function(){return"API"},t.prototype.graphql=function(t,n){return e.prototype.graphql.call(this,t,n)},t}(sG))(null);er.d.register(sH)},1463:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(3728),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},o=new r.k("Amplify"),s=new(function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Geo=null,this.Notifications=null,this.Logger=r.k,this.ServiceWorker=null}return e.prototype.register=function(e){o.debug("component registered in amplify",e),this._components.push(e),"function"==typeof e.getModuleName?(this._modules[e.getModuleName()]=e,this[e.getModuleName()]=e):o.debug("no getModuleName method for component",e),e.configure(this._config)},e.prototype.configure=function(e){var t=this;return e&&(this._config=Object.assign(this._config,e),o.debug("amplify config",this._config),Object.entries(this._modules).forEach(function(e){var n=i(e,2),r=(n[0],n[1]);Object.keys(r).forEach(function(e){t._modules[e]&&(r[e]=t._modules[e])})}),this._components.map(function(e){e.configure(t._config)})),this._config},e.prototype.addPluggable=function(e){e&&e.getCategory&&"function"==typeof e.getCategory&&this._components.map(function(t){t.addPluggable&&"function"==typeof t.addPluggable&&t.addPluggable(e)})},e}())},3728:function(e,t,n){"use strict";n.d(t,{k:function(){return u}});var r,i,o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},c={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};(i=r||(r={})).DEBUG="DEBUG",i.ERROR="ERROR",i.INFO="INFO",i.WARN="WARN",i.VERBOSE="VERBOSE";var u=function(){function e(e,t){void 0===t&&(t=r.WARN),this.name=e,this.level=t,this._pluggables=[]}return e.prototype._padding=function(e){return e<10?"0"+e:""+e},e.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},e.prototype.configure=function(e){return e&&(this._config=e),this._config},e.prototype._log=function(t){for(var n,i,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u=this.level;e.LOG_LEVEL&&(u=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(u=window.LOG_LEVEL);var l=c[u];if(c[t]>=l){var f=console.log.bind(console);t===r.ERROR&&console.error&&(f=console.error.bind(console)),t===r.WARN&&console.warn&&(f=console.warn.bind(console));var h="[".concat(t,"] ").concat(this._ts()," ").concat(this.name),d="";if(1===s.length&&"string"==typeof s[0])f(d="".concat(h," - ").concat(s[0]));else if(1===s.length)d="".concat(h," ").concat(s[0]),f(h,s[0]);else if("string"==typeof s[0]){var p=s.slice(1);1===p.length&&(p=p[0]),d="".concat(h," - ").concat(s[0]," ").concat(p),f("".concat(h," - ").concat(s[0]),p)}else d="".concat(h," ").concat(s),f(h,s);try{for(var g=o(this._pluggables),y=g.next();!y.done;y=g.next()){var v=y.value,m={message:d,timestamp:Date.now()};v.pushLogs([m])}}catch(e){n={error:e}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.INFO],s(e),!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.INFO],s(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.WARN],s(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.ERROR],s(e),!1))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.DEBUG],s(e),!1))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,a([r.VERBOSE],s(e),!1))},e.prototype.addPluggable=function(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))},e.prototype.listPluggables=function(){return this._pluggables},e.LOG_LEVEL=null,e}()},1403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n(5758),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}for(var o=new Uint8Array(r.DIGEST_LENGTH),i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],f=0;f<r.BLOCK_SIZE;f++){if(f<16)this.temp[f]=(255&e[4*f])<<24|(255&e[4*f+1])<<16|(255&e[4*f+2])<<8|255&e[4*f+3];else{var h=this.temp[f-2],d=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,p=((h=this.temp[f-15])>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[f]=(d+this.temp[f-7]|0)+(p+this.temp[f-16]|0)}var g=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&c^~a&u)|0)+(l+(r.KEY[f]+this.temp[f]|0)|0)|0,y=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=u,u=c,c=a,a=s+g|0,s=o,o=i,i=n,n=g+y|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=c,t[6]+=u,t[7]+=l},e}();t.RawSha256=i},5758:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=9007199254740991},1441:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(0,n(5949).__exportStar)(n(9332),t)},9332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(5949),i=n(5758),o=n(1403),s=n(8045),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=(0,s.convertToBuffer)(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(var r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(0,s.isEmptyData)(e)&&!this.error)try{this.hash.update((0,s.convertToBuffer)(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return(0,r.__awaiter)(this,void 0,void 0,function(){return(0,r.__generator)(this,function(e){return[2,this.digestSync()]})})},e}();t.Sha256=a},4719:function(e,t,n){"use strict";var r=n(6379).lW;Object.defineProperty(t,"__esModule",{value:!0}),t.convertToBuffer=void 0;var i=n(7477),o=void 0!==r&&r.from?function(e){return r.from(e,"utf8")}:i.fromUtf8;t.convertToBuffer=function(e){return e instanceof Uint8Array?e:"string"==typeof e?o(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}},8045:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var r=n(4719);Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var i=n(7929);Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var o=n(2316);Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var s=n(9677);Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})},7929:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},2316:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numToUint8=void 0,t.numToUint8=function(e){return new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])}},9677:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=void 0,t.uint32ArrayFrom=function(e){if(!Array.from){for(var t=new Uint32Array(e.length);0<e.length;)t[0]=e[0];return t}return Uint32Array.from(e)}},7477:function(e,t,n){"use strict";n.r(t),n.d(t,{fromUtf8:function(){return o},toUtf8:function(){return s}});var r=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&(64512&i)==55296&&(64512&e.charCodeAt(n+1))==56320){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)},i=function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];i<128?t+=String.fromCharCode(i):192<=i&&i<224?t+=String.fromCharCode((31&i)<<6|63&e[++n]):240<=i&&i<365?t+=decodeURIComponent("%"+[i,e[++n],e[++n],e[++n]].map(function(e){return e.toString(16)}).join("%")):t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t},o=function(e){return"function"==typeof TextEncoder?new TextEncoder().encode(e):r(e)},s=function(e){return"function"==typeof TextDecoder?new TextDecoder("utf-8").decode(e):i(e)}},3188:function(e,t){"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.Q=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},i=e.split(";"),o=(t||{}).decode||n,s=0;s<i.length;s++){var a=i[s],c=a.indexOf("=");if(!(c<0)){var u=a.substring(0,c).trim();if(void 0==r[u]){var l=a.substring(c+1,a.length).trim();'"'===l[0]&&(l=l.slice(1,-1)),r[u]=function(e,t){try{return t(e)}catch(t){return e}}(l,o)}}}return r},t.q=function(e,t,n){var o=n||{},s=o.encode||r;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var a=s(t);if(a&&!i.test(a))throw TypeError("argument val is invalid");var c=e+"="+a;if(null!=o.maxAge){var u=o.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(u)}if(o.domain){if(!i.test(o.domain))throw TypeError("option domain is invalid");c+="; Domain="+o.domain}if(o.path){if(!i.test(o.path))throw TypeError("option path is invalid");c+="; Path="+o.path}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw TypeError("option expires is invalid");c+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(c+="; HttpOnly"),o.secure&&(c+="; Secure"),o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return c};var n=decodeURIComponent,r=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},7258:function(e,t,n){var r,i;void 0!==(r="function"==typeof(i=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(new Date*1+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,!0!==o[c]&&(a+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(i[u]=c,e===u)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}(function(){})})?i.call(t,n,t,e):i)&&(e.exports=r),e.exports=i()},2451:function(e){"use strict";let t=self.fetch.bind(self);e.exports=t,e.exports.default=e.exports},5630:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(9998)},3880:function(e,t,n){!function(){var t={477:function(e){"use strict";e.exports=n(5768)}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}},s=!0;try{t[e](o,o.exports,i),s=!1}finally{s&&delete r[e]}return o.exports}i.ab="//";var o={};!function(){var e,t=o,n=(e=i(477))&&"object"==typeof e&&"default"in e?e.default:e,r=/https?|ftp|gopher|file/;function s(e){"string"==typeof e&&(e=m(e));var t,i,o,s,a,c,u,l,f,h=(i=(t=e).auth,o=t.hostname,s=t.protocol||"",a=t.pathname||"",c=t.hash||"",u=t.query||"",l=!1,i=i?encodeURIComponent(i).replace(/%3A/i,":")+"@":"",t.host?l=i+t.host:o&&(l=i+(~o.indexOf(":")?"["+o+"]":o),t.port&&(l+=":"+t.port)),u&&"object"==typeof u&&(u=n.encode(u)),f=t.search||u&&"?"+u||"",s&&":"!==s.substr(-1)&&(s+=":"),t.slashes||(!s||r.test(s))&&!1!==l?(l="//"+(l||""),a&&"/"!==a[0]&&(a="/"+a)):l||(l=""),c&&"#"!==c[0]&&(c="#"+c),f&&"?"!==f[0]&&(f="?"+f),{protocol:s,host:l,pathname:a=a.replace(/[?#]/g,encodeURIComponent),search:f=f.replace("#","%23"),hash:c});return""+h.protocol+h.host+h.pathname+h.search+h.hash}var a="http://",c=a+"w.w",u=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,l=/https?|ftp|gopher|file/;function f(e,t){var n="string"==typeof e?m(e):e;e="object"==typeof e?s(e):e;var r=m(t),i="";n.protocol&&!n.slashes&&(i=n.protocol,e=e.replace(n.protocol,""),i+="/"===t[0]||"/"===e[0]?"/":""),i&&r.protocol&&(i="",r.slashes||(i=r.protocol,t=t.replace(r.protocol,"")));var o=e.match(u);o&&!r.protocol&&(e=e.substr((i=o[1]+(o[2]||"")).length),/^\/\/[^/]/.test(t)&&(i=i.slice(0,-1)));var f=new URL(e,c+"/"),h=new URL(t,f).toString().replace(c,""),d=r.protocol||n.protocol;return d+=n.slashes||r.slashes?"//":"",!i&&d?h=h.replace(a,d):i&&(h=h.replace(a,"")),l.test(h)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==h.slice(-1)||(h=h.slice(0,-1)),i&&(h=i+("/"===h[0]?h.substr(1):h)),h}function h(){}h.prototype.parse=m,h.prototype.format=s,h.prototype.resolve=f,h.prototype.resolveObject=f;var d=/^https?|ftp|gopher|file/,p=/^(.*?)([#?].*)/,g=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,y=/^([a-z0-9.+-]*:)?\/\/\/*/i,v=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function m(e,t,r){if(void 0===t&&(t=!1),void 0===r&&(r=!1),e&&"object"==typeof e&&e instanceof h)return e;var i=(e=e.trim()).match(p);e=i?i[1].replace(/\\/g,"/")+i[2]:e.replace(/\\/g,"/"),v.test(e)&&"/"!==e.slice(-1)&&(e+="/");var o=!/(^javascript)/.test(e)&&e.match(g),a=y.test(e),u="";o&&(d.test(o[1])||(u=o[1].toLowerCase(),e=""+o[2]+o[3]),o[2]||(a=!1,d.test(o[1])?(u=o[1],e=""+o[3]):e="//"+o[3]),3!==o[2].length&&1!==o[2].length||(u=o[1],e="/"+o[3]));var l,f=(i?i[1]:e).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),m=f&&f[1],b=new h,_="",S="";try{l=new URL(e)}catch(t){_=t,u||r||!/^\/\//.test(e)||/^\/\/.+[@.]/.test(e)||(S="/",e=e.substr(1));try{l=new URL(e,c)}catch(e){return b.protocol=u,b.href=u,b}}b.slashes=a&&!S,b.host="w.w"===l.host?"":l.host,b.hostname="w.w"===l.hostname?"":l.hostname.replace(/(\[|\])/g,""),b.protocol=_?u||null:l.protocol,b.search=l.search.replace(/\\/g,"%5C"),b.hash=l.hash.replace(/\\/g,"%5C");var w=e.split("#");!b.search&&~w[0].indexOf("?")&&(b.search="?"),b.hash||""!==w[1]||(b.hash="#"),b.query=t?n.decode(l.search.substr(1)):b.search.substr(1),b.pathname=S+(o?l.pathname.replace(/['^|`]/g,function(e){return"%"+e.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(e,t){try{return decodeURIComponent(t).split("").map(function(e){var t=e.charCodeAt();return t>256||/^[a-z0-9]$/i.test(e)?e:"%"+t.toString(16).toUpperCase()}).join("")}catch(e){return t}}):l.pathname),"about:"===b.protocol&&"blank"===b.pathname&&(b.protocol="",b.pathname=""),_&&"/"!==e[0]&&(b.pathname=b.pathname.substr(1)),u&&!d.test(u)&&"/"!==e.slice(-1)&&"/"===b.pathname&&(b.pathname=""),b.path=b.pathname+b.search,b.auth=[l.username,l.password].map(decodeURIComponent).filter(Boolean).join(":"),b.port=l.port,m&&!b.host.endsWith(m)&&(b.host+=m,b.port=m.slice(1)),b.href=S?""+b.pathname+b.search+b.hash:s(b);var E=/^(file)/.test(b.href)?["host","hostname"]:[];return Object.keys(b).forEach(function(e){~E.indexOf(e)||(b[e]=b[e]||null)}),b}t.parse=m,t.format=s,t.resolve=f,t.resolveObject=function(e,t){return m(f(e,t))},t.Url=h}(),e.exports=o}()},9998:function(e){!function(){var t={229:function(e){var t,n,r,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c=[],u=!1,l=-1;function f(){u&&r&&(u=!1,r.length?c=r.concat(c):l=-1,c.length&&h())}function h(){if(!u){var e=a(f);u=!0;for(var t=c.length;t;){for(r=c,c=[];++l<t;)r&&r[l].run();l=-1,t=c.length}r=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||u||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},s=!0;try{t[e](o,o.exports,r),s=!1}finally{s&&delete n[e]}return o.exports}r.ab="//";var i=r(229);e.exports=i}()},5742:function(e,t,n){e.exports=n(1242)},5202:function(e){"use strict";e.exports=function(e,t,n,r){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var c=0;c<a;++c){var u,l,f,h,d=e[c].replace(o,"%20"),p=d.indexOf(n);(p>=0?(u=d.substr(0,p),l=d.substr(p+1)):(u=d,l=""),f=decodeURIComponent(u),h=decodeURIComponent(l),Object.prototype.hasOwnProperty.call(i,f))?Array.isArray(i[f])?i[f].push(h):i[f]=[i[f],h]:i[f]=h}return i}},3489:function(e){"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,i){return(n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e)?Object.keys(e).map(function(i){var o=encodeURIComponent(t(i))+r;return Array.isArray(e[i])?e[i].map(function(e){return o+encodeURIComponent(t(e))}).join(n):o+encodeURIComponent(t(e[i]))}).join(n):i?encodeURIComponent(t(i))+r+encodeURIComponent(t(e)):""}},5768:function(e,t,n){"use strict";t.decode=t.parse=n(5202),t.encode=t.stringify=n(3489)},5949:function(e,t,n){"use strict";n.r(t),n.d(t,{__assign:function(){return o},__asyncDelegator:function(){return _},__asyncGenerator:function(){return b},__asyncValues:function(){return S},__await:function(){return m},__awaiter:function(){return l},__classPrivateFieldGet:function(){return T},__classPrivateFieldSet:function(){return A},__createBinding:function(){return h},__decorate:function(){return a},__exportStar:function(){return d},__extends:function(){return i},__generator:function(){return f},__importDefault:function(){return I},__importStar:function(){return E},__makeTemplateObject:function(){return w},__metadata:function(){return u},__param:function(){return c},__read:function(){return g},__rest:function(){return s},__spread:function(){return y},__spreadArrays:function(){return v},__values:function(){return p}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function f(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function h(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function d(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{var n;(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function S(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function A(e,t,n){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},2674:function(e,t,n){var r=n(2335),i=n(5234),o=i;o.v1=r,o.v4=i,e.exports=o},614:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0;return[t[e[r++]],t[e[r++]],t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],"-",t[e[r++]],t[e[r++]],t[e[r++]],t[e[r++]],t[e[r++]],t[e[r++]]].join("")}},1485:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=Array(16);e.exports=function(){for(var e,t=0;t<16;t++)(3&t)==0&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},2335:function(e,t,n){var r,i,o=n(1485),s=n(614),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],f=(e=e||{}).node||r,h=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==h){var d=o();null==f&&(f=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=i=(d[6]<<8|d[7])&16383)}var p=void 0!==e.msecs?e.msecs:new Date().getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,y=p-a+(g-c)/1e4;if(y<0&&void 0===e.clockseq&&(h=h+1&16383),(y<0||p>a)&&void 0===e.nsecs&&(g=0),g>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=g,i=h;var v=((268435455&(p+=122192928e5))*1e4+g)%4294967296;l[u++]=v>>>24&255,l[u++]=v>>>16&255,l[u++]=v>>>8&255,l[u++]=255&v;var m=p/4294967296*1e4&268435455;l[u++]=m>>>8&255,l[u++]=255&m,l[u++]=m>>>24&15|16,l[u++]=m>>>16&255,l[u++]=h>>>8|128,l[u++]=255&h;for(var b=0;b<6;++b)l[u+b]=f[b];return t||s(l)}},5234:function(e,t,n){var r=n(1485),i=n(614);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},8666:function(e,t,n){e.exports=n(7603).Observable},7603:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}t.Observable=void 0;var o=function(){return"function"==typeof Symbol},s=function(e){return o()&&Boolean(Symbol[e])},a=function(e){return s(e)?Symbol[e]:"@@"+e};o()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var c=a("iterator"),u=a("observable"),l=a("species");function f(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw TypeError(n+" is not a function");return n}}function h(e){var t=e.constructor;return void 0!==t&&null===(t=t[l])&&(t=void 0),void 0!==t?t:S}function d(e){d.log?d.log(e):setTimeout(function(){throw e})}function p(e){Promise.resolve().then(function(){try{e()}catch(e){d(e)}})}function g(e){var t=e._cleanup;if(void 0!==t){if(e._cleanup=void 0,!t)return;try{if("function"==typeof t)t();else{var n=f(t,"unsubscribe");n&&n.call(t)}}catch(e){d(e)}}}function y(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function v(e,t,n){e._state="running";var r=e._observer;try{var i=f(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(y(e),i)i.call(r,n);else throw n;break;case"complete":y(e),i&&i.call(r)}}catch(e){d(e)}"closed"===e._state?g(e):"running"===e._state&&(e._state="ready")}function m(e,t,n){if("closed"!==e._state){if("buffering"===e._state){e._queue.push({type:t,value:n});return}if("ready"!==e._state){e._state="buffering",e._queue=[{type:t,value:n}],p(function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(v(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)});return}v(e,t,n)}}var b=function(){function e(t,r){n(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new _(this);try{this._cleanup=r.call(void 0,i)}catch(e){i.error(e)}"initializing"===this._state&&(this._state="ready")}return i(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(y(this),g(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),_=function(){function e(t){n(this,e),this._subscription=t}return i(e,[{key:"next",value:function(e){m(this._subscription,"next",e)}},{key:"error",value:function(e){m(this._subscription,"error",e)}},{key:"complete",value:function(){m(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),S=function(){function e(t){if(n(this,e),!(this instanceof e))throw TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw TypeError("Observable initializer must be a function");this._subscriber=t}return i(e,[{key:"subscribe",value:function(e){return("object"!=typeof e||null===e)&&(e={next:e,error:arguments[1],complete:arguments[2]}),new b(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise(function(n,r){if("function"!=typeof e){r(TypeError(e+" is not a function"));return}function i(){o.unsubscribe(),n()}var o=t.subscribe({next:function(t){try{e(t,i)}catch(e){r(e),o.unsubscribe()}},error:r,complete:n})})}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw TypeError(e+" is not a function");return new(h(this))(function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})})}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw TypeError(e+" is not a function");return new(h(this))(function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})})}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw TypeError(e+" is not a function");var n=h(this),r=arguments.length>1,i=!1,o=arguments[1],s=o;return new n(function(n){return t.subscribe({next:function(t){var o=!i;if(i=!0,!o||r)try{s=e(s,t)}catch(e){return n.error(e)}else s=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(TypeError("Cannot reduce an empty sequence"));n.next(s),n.complete()}})})}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=h(this);return new i(function(t){var r,o=0;return function e(s){r=s.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}})}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw TypeError(e+" is not a function");var n=h(this);return new n(function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return r.error(e)}var o=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),s()}});i.push(o)},error:function(e){r.error(e)},complete:function(){s()}});function s(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach(function(e){return e.unsubscribe()}),o.unsubscribe()}})}},{key:u,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw TypeError(t+" is not an object");var r=f(t,u);if(r){var i=r.call(t);if(Object(i)!==i)throw TypeError(i+" is not an object");return i instanceof S&&i.constructor===n?i:new n(function(e){return i.subscribe(e)})}if(s("iterator")&&(r=f(t,c)))return new n(function(e){p(function(){if(!e.closed){var n=!0,i=!1,o=void 0;try{for(var s,a=r.call(t)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var c=s.value;if(e.next(c),e.closed)return}}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}e.complete()}})});if(Array.isArray(t))return new n(function(e){p(function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}})});throw TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new("function"==typeof this?this:e)(function(e){p(function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}})})}},{key:l,get:function(){return this}}]),e}();t.Observable=S,o()&&Object.defineProperty(S,Symbol("extensions"),{value:{symbol:u,hostReportError:d},configurable:!0})}}]);